<html><head><META http-equiv="Content-Type" content="text/html; charset=utf-8"><title>CouchDB 1.1 Manual</title><link href="../DocKit/xsl.d/html-css/html.css" type="text/css" rel="stylesheet"><meta content="DocBook XSL Stylesheets V1.76.1" name="generator"><meta name="description" content="This manual documents the CouchDB 1.1 database system, including the installation, functionality, and CouchDB API. Last document update: 21 Feb 2012 20:09; Document built: 21 Feb 2012 20:9."></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="book" title="CouchDB 1.1 Manual"><div class="titlepage"><div><div><h1 class="title"><a name="couchdb-1-1"></a>CouchDB 1.1 Manual</h1></div><div><div class="abstract" title="Abstract"><p class="title"><b>Abstract</b></p><p>
        This manual documents the CouchDB
        1.1 database system, including the installation,
        functionality, and CouchDB API.
      </p><p>
  <span class="emphasis"><em>Last document update</em></span>: 21 Feb 2012 20:09;
  <span class="emphasis"><em>Document built</em></span>: 21 Feb 2012 20:9.
</p></div></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="chapter"><a href="#couchdb-single-introduction">1. Introduction</a></span></dt><dd><dl><dt><span class="section"><a href="#couchdb-single-introduction-futon">1.1. Using Futon</a></span></dt><dd><dl><dt><span class="section"><a href="#couchdb-single-introduction-futon-dbdocs">1.1.1. Managing Databases and Documents</a></span></dt><dt><span class="section"><a href="#couchdb-single-introduction-futon-replication">1.1.2. Configuring Replication</a></span></dt></dl></dd><dt><span class="section"><a href="#couchdb-single-introduction-curl">1.2. Using <span class="command"><strong>curl</strong></span></a></span></dt></dl></dd><dt><span class="chapter"><a href="#couchdb-single-features">2. Features and Functionality</a></span></dt><dd><dl><dt><span class="section"><a href="#couchdb-single-features-httprange">2.1. HTTP Range Requests</a></span></dt><dt><span class="section"><a href="#couchdb-single-features-proxying">2.2. HTTP Proxying</a></span></dt><dt><span class="section"><a href="#couchdb-single-features-commonjs">2.3. CommonJS support for map functions</a></span></dt><dt><span class="section"><a href="#couchdb-single-features-etag">2.4. Granular ETag support</a></span></dt></dl></dd><dt><span class="chapter"><a href="#couchdb-single-replication">3. Replication</a></span></dt><dd><dl><dt><span class="section"><a href="#couchdb-single-replication-replicatordb">3.1. Replicator Database</a></span></dt><dd><dl><dt><span class="section"><a href="#couchdb-single-replication-replicatordb-basics">3.1.1. Basics</a></span></dt><dt><span class="section"><a href="#couchdb-single-replication-replicatordb-docsame">3.1.2. Documents describing the same replication</a></span></dt><dt><span class="section"><a href="#couchdb-single-replication-replicatordb-cancel">3.1.3. Canceling replications</a></span></dt><dt><span class="section"><a href="#couchdb-single-replication-replicatordb-restart">3.1.4. Server restart</a></span></dt><dt><span class="section"><a href="#couchdb-single-replication-replicatordb-changing">3.1.5. Changing the Replicator Database</a></span></dt><dt><span class="section"><a href="#couchdb-single-replication-replicatordb-replicating">3.1.6. Replicating the replicator database</a></span></dt><dt><span class="section"><a href="#couchdb-single-replication-replicatordb-delegations">3.1.7. Delegations</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#couchdb-api-basics">4. CouchDB API</a></span></dt><dd><dl><dt><span class="section"><a href="#couchdb-api-introduction-requests">4.1. Request Format and Responses</a></span></dt><dt><span class="section"><a href="#couchdb-api-introduction-request-header">4.2. HTTP Headers</a></span></dt><dd><dl><dt><span class="section"><a href="#couchdb-api-introduction-request-header-request">4.2.1. Request Headers</a></span></dt><dt><span class="section"><a href="#couchdb-api-introduction-request-header-response">4.2.2. Response Headers</a></span></dt></dl></dd><dt><span class="section"><a href="#couchdb-api-introduction-json">4.3. JSON Basics</a></span></dt><dt><span class="section"><a href="#couchdb-api-introduction-returncodes">4.4. HTTP Status Codes</a></span></dt><dt><span class="section"><a href="#couchdb-api-overview">4.5. CouchDB API Overview</a></span></dt></dl></dd><dt><span class="chapter"><a href="#couchdb-api-db">5. CouchDB API Server Database Methods</a></span></dt><dd><dl><dt><span class="section"><a href="#couchdb-api-db_db_get">5.1. <code class="literal">GET /db</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-db_db_put">5.2. <code class="literal">PUT /db</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-db_db_delete">5.3. <code class="literal">DELETE /db</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-db_db-changes_get">5.4. <code class="literal">GET /db/_changes</code></a></span></dt><dd><dl><dt><span class="section"><a href="#couchdb-api-db_db-changes_get-filters">5.4.1. Filtering</a></span></dt></dl></dd><dt><span class="section"><a href="#couchdb-api-db_db-compact_post">5.5. <code class="literal">POST /db/_compact</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-db_db-compact-design-doc_post">5.6. <code class="literal">POST /db/_compact/design-doc</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-db_db-view-cleanup_post">5.7. <code class="literal">POST /db/_view_cleanup</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-db_db-ensure-full-commit_post">5.8. <code class="literal">POST /db/_ensure_full_commit</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-db_db-bulk-docs_post">5.9. <code class="literal">POST /db/_bulk_docs</code></a></span></dt><dd><dl><dt><span class="section"><a href="#couchdb-api-db_db-bulk-docs_post-insert">5.9.1. Inserting Documents in Bulk</a></span></dt><dt><span class="section"><a href="#couchdb-api-db_db-bulk-docs_post-update">5.9.2. Updating Documents in Bulk</a></span></dt><dt><span class="section"><a href="#couchdb-api-db_db-bulk-docs_post-commit">5.9.3. Bulk Documents Transaction Semantics</a></span></dt><dt><span class="section"><a href="#couchdb-api-db_db-bulk-docs_post-errors">5.9.4. Bulk Document Validation and Conflict Errors</a></span></dt></dl></dd><dt><span class="section"><a href="#couchdb-api-db_db-temp-view_post">5.10. <code class="literal">POST /db/_temp_view</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-db_db-purge_post">5.11. <code class="literal">POST /db/_purge</code></a></span></dt><dd><dl><dt><span class="section"><a href="#couchdb-api-db_db-purge_post-indexrebuild">5.11.1. Updating Indexes</a></span></dt></dl></dd><dt><span class="section"><a href="#couchdb-api-db_db-all-docs_get">5.12. <code class="literal">GET /db/_all_docs</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-db_db-all-docs_post">5.13. <code class="literal">POST /db/_all_docs</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-db_db-missing-revs_post">5.14. <code class="literal">POST /db/_missing_revs</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-db_db-revs-diff_post">5.15. <code class="literal">POST /db/_revs_diff</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-db_db-security_get">5.16. <code class="literal">GET /db/_security</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-db_db-security_put">5.17. <code class="literal">PUT /db/_security</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-db_db-revs-limit_get">5.18. <code class="literal">GET /db/_revs_limit</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-db_db-revs-limit_put">5.19. <code class="literal">PUT /db/_revs_limit</code></a></span></dt></dl></dd><dt><span class="chapter"><a href="#couchdb-api-dbdoc">6. CouchDB API Server Document Methods</a></span></dt><dd><dl><dt><span class="section"><a href="#couchdb-api-dbdoc_db_post">6.1. <code class="literal">POST /db</code></a></span></dt><dd><dl><dt><span class="section"><a href="#couchdb-api-dbdoc_db_post-docid">6.1.1. Specifying the Document ID</a></span></dt><dt><span class="section"><a href="#couchdb-api-dbdoc_db_batchmode">6.1.2. Batch Mode Writes</a></span></dt><dt><span class="section"><a href="#couchdb-api-dbdoc_db-doc-attachments">6.1.3. Including Attachments</a></span></dt></dl></dd><dt><span class="section"><a href="#couchdb-api-dbdoc_db-doc_get">6.2. <code class="literal">GET /db/doc</code></a></span></dt><dd><dl><dt><span class="section"><a href="#couchdb-api-dbdoc_db-doc_get-attachments">6.2.1. Attachments</a></span></dt><dt><span class="section"><a href="#couchdb-api-dbdoc_db-doc_get-revs">6.2.2. Getting a List of Revisions</a></span></dt><dt><span class="section"><a href="#couchdb-api-dbdoc_db-doc_get-revsextended">6.2.3. Obtaining an Extended Revision History</a></span></dt><dt><span class="section"><a href="#couchdb-api-dbdoc_db-doc_get-specrev">6.2.4. Obtaining a Specific Revision</a></span></dt></dl></dd><dt><span class="section"><a href="#couchdb-api-dbdoc_db-doc_head">6.3. <code class="literal">HEAD /db/doc</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-dbdoc_db-doc_put">6.4. <code class="literal">PUT /db/doc</code></a></span></dt><dd><dl><dt><span class="section"><a href="#couchdb-api-dbdoc_db-doc_put-update">6.4.1. Updating an Existing Document</a></span></dt></dl></dd><dt><span class="section"><a href="#couchdb-api-dbdoc_db-doc_delete">6.5. <code class="literal">DELETE /db/doc</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-dbdoc_db-doc_copy">6.6. <code class="literal">COPY /db/doc</code></a></span></dt><dd><dl><dt><span class="section"><a href="#couchdb-api-dbdoc_db-doc_copy-simple">6.6.1. Copying a Document</a></span></dt><dt><span class="section"><a href="#couchdb-api-dbdoc_db-doc_copy-specrev">6.6.2. Copying from a Specific Revision</a></span></dt><dt><span class="section"><a href="#couchdb-api-dbdoc_db-doc_copy-existing">6.6.3. Copying to an Existing Document</a></span></dt></dl></dd><dt><span class="section"><a href="#couchdb-api-dbdoc_db-doc-attachment_get">6.7. <code class="literal">GET /db/doc/attachment</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-dbdoc_db-doc-attachment_put">6.8. <code class="literal">PUT /db/doc/attachment</code></a></span></dt><dd><dl><dt><span class="section"><a href="#couchdb-api-dbdoc_db-doc-attachment_put-existing">6.8.1. Updating an Existing Attachment</a></span></dt></dl></dd><dt><span class="section"><a href="#couchdb-api-dbdoc_db-doc-attachment_delete">6.9. <code class="literal">DELETE /db/doc/attachment</code></a></span></dt></dl></dd><dt><span class="chapter"><a href="#couchdb-api-localdb">7. CouchDB API Server Local (non-replicating) Document Methods</a></span></dt><dd><dl><dt><span class="section"><a href="#couchdb-api-localdb_db-local-localdoc_get">7.1. <code class="literal">GET /db/_local/local-doc</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-localdb_db-local-localdoc_put">7.2. <code class="literal">PUT /db/_local/local-doc</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-localdb_db-local-localdoc_delete">7.3. <code class="literal">DELETE /db/_local/local-doc</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-localdb_db-local-localdoc_copy">7.4. <code class="literal">COPY /db/_local/local-doc</code></a></span></dt></dl></dd><dt><span class="chapter"><a href="#couchdb-api-design">8. CouchDB API Server Design Document Methods</a></span></dt><dd><dl><dt><span class="section"><a href="#couchdb-api-design_db-design-designdoc_get">8.1. <code class="literal">GET /db/_design/design-doc</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-design_db-design-designdoc_put">8.2. <code class="literal">PUT /db/_design/design-doc</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-design_db-design-designdoc_delete">8.3. <code class="literal">DELETE /db/_design/design-doc</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-design_db-design-designdoc_copy">8.4. <code class="literal">COPY /db/_design/design-doc</code></a></span></dt><dd><dl><dt><span class="section"><a href="#couchdb-api-design_db-design-designdoc_copy-simple">8.4.1. Copying a Design Document</a></span></dt><dt><span class="section"><a href="#couchdb-api-design_db-design-designdoc_copy-specrev">8.4.2. Copying from a Specific Revision</a></span></dt><dt><span class="section"><a href="#couchdb-api-design_db-design-designdoc_copy-existing">8.4.3. Copying to an Existing Design Document</a></span></dt></dl></dd><dt><span class="section"><a href="#couchdb-api-design_db-design-designdoc-attachment_get">8.5. <code class="literal">GET /db/_design/design-doc/attachment</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-design_db-design-designdoc-attachment_put">8.6. <code class="literal">PUT /db/_design/design-doc/attachment</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-design_db-design-designdoc-attachment_delete">8.7. <code class="literal">DELETE /db/_design/design-doc/attachment</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-design_db-design-designdoc-info_get">8.8. <code class="literal">GET /db/_design/design-doc/_info</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-design_db-design-designdoc-view-viewname_get">8.9. <code class="literal">GET /db/_design/design-doc/_view/view-name</code></a></span></dt><dd><dl><dt><span class="section"><a href="#couchdb-api-design_db-design-designdoc-view-viewname_get-indexes">8.9.1. Querying Views and Indexes</a></span></dt><dt><span class="section"><a href="#couchdb-api-design_db-design-designdoc-view-viewname_get-sorting">8.9.2. Sorting Returned Rows</a></span></dt><dt><span class="section"><a href="#couchdb-api-design_db-design-designdoc-view-viewname_get-ranges">8.9.3. Specifying Start and End Values</a></span></dt><dt><span class="section"><a href="#couchdb-api-design_db-design-designdoc-view-viewname_get-limit">8.9.4. Using Limits and Skipping Rows</a></span></dt><dt><span class="section"><a href="#couchdb-api-design_db-design-designdoc-view-viewname_get-reduction">8.9.5. View Reduction and Grouping</a></span></dt></dl></dd><dt><span class="section"><a href="#couchdb-api-design_db-design-designdoc-view-viewname_post">8.10. <code class="literal">POST /db/_design/design-doc/_view/view-name</code></a></span></dt><dd><dl><dt><span class="section"><a href="#couchdb-api-design_db-design-designdoc-view-viewname_post-multidoc">8.10.1. Multi-document Fetching</a></span></dt></dl></dd><dt><span class="section"><a href="#couchdb-api-design_db-design-designdoc-show-showname_get">8.11. <code class="literal">POST /db/_design/design-doc/_show/show-name</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-design_db-design-designdoc-show-showname-doc_get">8.12. <code class="literal">POST /db/_design/design-doc/_show/show-name/doc</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-design_db-design-designdoc-list-listname-otherdesigndoc-viewname_get">8.13. <code class="literal">GET
      /db/_design/design-doc/_list/list-name/other-design-doc/view-name</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-design_db-design-designdoc-list-listname-otherdesigndoc-viewname_post">8.14. <code class="literal">POST
      /db/_design/design-doc/_list/list-name/other-design-doc/view-name</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-design_db-design-designdoc-list-listname-viewname_get">8.15. <code class="literal">GET /db/_design/design-doc/_list/list-name/view-name</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-design_db-design-designdoc-list-listname-viewname_post">8.16. <code class="literal">POST /db/_design/design-doc/_list/list-name/view-name</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-design_db-design-designdoc-update-updatename-doc_put">8.17. <code class="literal">PUT /db/_design/design-doc/_update/updatename/doc</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-design_db-design-designdoc-update-updatename_post">8.18. <code class="literal">POST /db/_design/design-doc/_update/updatename</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-design_db-design-designdoc-rewrite-rewritename-anything">8.19. <code class="literal">ALL
      /db/_design/design-doc/_rewrite/rewrite-name/anything</code></a></span></dt></dl></dd><dt><span class="chapter"><a href="#couchdb-api-misc">9. CouchDB API Server Miscellaneous Methods</a></span></dt><dd><dl><dt><span class="section"><a href="#couchdb-api-misc_root_get">9.1. <code class="literal">GET /</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-misc_active-tasks_get">9.2. <code class="literal">GET /_active_tasks</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-misc_all-dbs_get">9.3. <code class="literal">GET /_all_dbs</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-misc_log_get">9.4. <code class="literal">GET /_log</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-misc_replicate_post">9.5. <code class="literal">POST /_replicate</code></a></span></dt><dd><dl><dt><span class="section"><a href="#couchdb-api-misc_replicate_post-operation">9.5.1. Replication Operation</a></span></dt><dt><span class="section"><a href="#couchdb-api-misc_replicate_post-sourcetarget">9.5.2. Specifying the Source and Target Database</a></span></dt><dt><span class="section"><a href="#couchdb-api-misc_replicate_post-single">9.5.3. Single Replication</a></span></dt><dt><span class="section"><a href="#couchdb-api-misc_replicate_post-continuous">9.5.4. Continuous Replication</a></span></dt><dt><span class="section"><a href="#couchdb-api-misc_replicate_post-cancel">9.5.5. Canceling Continuous Replication</a></span></dt></dl></dd><dt><span class="section"><a href="#couchdb-api-misc_restart_post">9.6. <code class="literal">POST /_restart</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-misc_stats_get">9.7. <code class="literal">GET /_stats</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-misc_utils_get">9.8. <code class="literal">GET /_utils</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-misc_uuids_get">9.9. <code class="literal">GET /_uuids</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-misc_favicon_get">9.10. <code class="literal">GET /favicon.ico</code></a></span></dt></dl></dd><dt><span class="chapter"><a href="#couchdb-api-config">10. CouchDB API Server Configuration Methods</a></span></dt><dd><dl><dt><span class="section"><a href="#couchdb-api-config_config_get">10.1. <code class="literal">GET /_config</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-config_config-section_get">10.2. <code class="literal">GET /_config/section</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-config_config-section-key_get">10.3. <code class="literal">GET /_config/section/key</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-config_config-section-key_put">10.4. <code class="literal">PUT /_config/section/key</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-config_config-section-key_delete">10.5. <code class="literal">DELETE /_config/section/key</code></a></span></dt></dl></dd><dt><span class="chapter"><a href="#couchdb-api-auth">11. CouchDB API Server Authentication Methods</a></span></dt><dt><span class="chapter"><a href="#couchdb-single-configuration">12. Configuring CouchDB</a></span></dt><dd><dl><dt><span class="section"><a href="#couchdb-single-configuration-files">12.1. CouchDB Configuration Files</a></span></dt><dt><span class="section"><a href="#couchdb-single-configuration-files-locations">12.2. Configuration File Locations</a></span></dt><dt><span class="section"><a href="#couchdb-single-configuration-mochiweb">12.3. MochiWeb Server Options</a></span></dt><dt><span class="section"><a href="#couchdb-single-configuration-osprocess">12.4. OS Daemons</a></span></dt><dt><span class="section"><a href="#couchdb-single-configuration-update_notification">12.5. Update Notifications</a></span></dt><dt><span class="section"><a href="#couchdb-single-configuration-socketoptions">12.6. Socket Options Configuration Setting</a></span></dt><dt><span class="section"><a href="#couchdb-single-configuration-vhost">12.7. <code class="literal">vhosts</code> definitions</a></span></dt><dt><span class="section"><a href="#couchdb-single-configuration-ssl">12.8. Configuring SSL Network Sockets</a></span></dt><dt><span class="section"><a href="#couchdb-single-config-options">12.9. CouchDB Configuration Options</a></span></dt><dd><dl><dt><span class="section"><a href="#couchdb-single-config-options_attachments">12.9.1. <code class="literal">attachments</code> Configuration Options</a></span></dt><dt><span class="section"><a href="#couchdb-single-config-options_couchdb">12.9.2. <code class="literal">couchdb</code> Configuration Options</a></span></dt><dt><span class="section"><a href="#couchdb-single-config-options_daemons">12.9.3. <code class="literal">daemons</code> Configuration Options</a></span></dt><dt><span class="section"><a href="#couchdb-single-config-options_httpd_db_handlers">12.9.4. <code class="literal">httpd_db_handlers</code> Configuration Options</a></span></dt><dt><span class="section"><a href="#couchdb-single-config-options_couch_httpd_auth">12.9.5. <code class="literal">couch_httpd_auth</code> Configuration Options</a></span></dt><dt><span class="section"><a href="#couchdb-single-config-options_httpd">12.9.6. <code class="literal">httpd</code> Configuration Options</a></span></dt><dt><span class="section"><a href="#couchdb-single-config-options_httpd_design_handlers">12.9.7. <code class="literal">httpd_design_handlers</code> Configuration Options</a></span></dt><dt><span class="section"><a href="#couchdb-single-config-options_httpd_global_handlers">12.9.8. <code class="literal">httpd_global_handlers</code> Configuration Options</a></span></dt><dt><span class="section"><a href="#couchdb-single-config-options_log">12.9.9. <code class="literal">log</code> Configuration Options</a></span></dt><dt><span class="section"><a href="#couchdb-single-config-options_query_servers">12.9.10. <code class="literal">query_servers</code> Configuration Options</a></span></dt><dt><span class="section"><a href="#couchdb-single-config-options_query_server_config">12.9.11. <code class="literal">query_server_config</code> Configuration Options</a></span></dt><dt><span class="section"><a href="#couchdb-single-config-options_replicator">12.9.12. <code class="literal">replicator</code> Configuration Options</a></span></dt><dt><span class="section"><a href="#couchdb-single-config-options_stats">12.9.13. <code class="literal">stats</code> Configuration Options</a></span></dt><dt><span class="section"><a href="#couchdb-single-config-options_uuids">12.9.14. <code class="literal">uuids</code> Configuration Options</a></span></dt></dl></dd></dl></dd><dt><span class="appendix"><a href="#couchdb-api-json">A. JSON Structure Reference</a></span></dt></dl></div><div class="list-of-figures"><p><b>List of Figures</b></p><dl><dt>1.1. <a href="#fig-ccouchdb-single-introduction-futon-overview">Futon Overview</a></dt><dt>1.2. <a href="#fig-ccouchdb-single-introduction-futon-dbdocs-createdb">Creating a Database</a></dt><dt>1.3. <a href="#fig-ccouchdb-single-introduction-futon-dbdocs-editdoc">Editing a Document</a></dt><dt>1.4. <a href="#fig-ccouchdb-single-introduction-futon-dbdocs-finaldoc">Edited Document</a></dt><dt>1.5. <a href="#fig-ccouchdb-single-introduction-futon-replication-form">Replication Form</a></dt></dl></div><div class="list-of-tables"><p><b>List of Tables</b></p><dl><dt>5.1. <a href="#table-couchdb-api-db-summary">Database API Calls</a></dt><dt>5.2. <a href="#table-couchdb-api-db-json-db-info">
 CouchDB database information object
 </a></dt><dt>5.3. <a href="#table-couchdb-api-db_db-json-changes">
 Changes information for a database
 </a></dt><dt>5.4. <a href="#table-couchdb-api-db_db-bulk-docs-json">
 Bulk Documents
 </a></dt><dt>5.5. <a href="#table-couchdb-api-db_db-bulk-docs_post-commit">Conflicts on Bulk Inserts</a></dt><dt>5.6. <a href="#table-couchdb-api-db_db-bulk-docs-return-json">
 Bulk Document Response
 </a></dt><dt>5.7. <a href="#table-couchdb-api-db_db-all-docs">
 All Database Documents
 </a></dt><dt>5.8. <a href="#table-couchdb-api-db-json-security">
 Security Object
 </a></dt><dt>6.1. <a href="#table-couchdb-api-dbdoc-summary">Document API Calls</a></dt><dt>6.2. <a href="#table-couchdb-api-json-document">
 CouchDB Document
 </a></dt><dt>6.3. <a href="#table-couchdb-api-dbdoc-documentattachments">
 Document with Attachments
 </a></dt><dt>6.4. <a href="#table-couchdb-api-dbdoc-returneddocumentattachments">
 Returned Document with Attachments
 </a></dt><dt>6.5. <a href="#table-couchdb-api-dbdoc-document_with_revs">
 Returned CouchDB Document with Revision Info
 </a></dt><dt>6.6. <a href="#table-couchdb-api-dbdoc-document_with_revs_info">
 Returned CouchDB Document with Detailed Revision Info
 </a></dt><dt>7.1. <a href="#table-couchdb-api-localdb-summary">Local (non-replicating) Document API
    Calls</a></dt><dt>8.1. <a href="#table-couchdb-api-design-summary">Design Document API Calls</a></dt><dt>8.2. <a href="#table-couchdb-api-json-designdoc">
 Design Document
 </a></dt><dt>8.3. <a href="#table-couchdb-api-design_db-designdoc-info-json">Design Document Info JSON Contents</a></dt><dt>9.1. <a href="#table-couchdb-api-misc-summary">Miscellaneous API Calls</a></dt><dt>9.2. <a href="#table-couchdb-api-misc-active-tasks-json">
 List of Active Tasks
 </a></dt><dt>9.3. <a href="#table-couchdb-api-misc-json-replication">
 Replication Settings
 </a></dt><dt>9.4. <a href="#table-couchdb-api-misc-json-replication-status">
 Replication Status
 </a></dt><dt>9.5. <a href="#N13B75"><code class="literal">couchdb</code> statistics</a></dt><dt>9.6. <a href="#N13BD9"><code class="literal">httpd_request_methods</code> statistics</a></dt><dt>9.7. <a href="#N13C33"><code class="literal">httpd_status_codes</code> statistics</a></dt><dt>9.8. <a href="#N13CD3"><code class="literal">httpd</code> statistics</a></dt><dt>10.1. <a href="#table-couchdb-api-config-summary">Configuration API Calls</a></dt><dt>11.1. <a href="#table-couchdb-api-auth-summary">Authentication API Calls</a></dt><dt>12.1. <a href="#table-couchdb-single-config-options-summary">Configuration Groups</a></dt><dt>12.2. <a href="#table-couchdb-single-config-options-attachments-summary">Configuration Groups</a></dt><dt>12.3. <a href="#table-couchdb-single-config-options-couchdb-summary">Configuration Groups</a></dt><dt>12.4. <a href="#table-couchdb-single-config-options-daemons-summary">Configuration Groups</a></dt><dt>12.5. <a href="#table-couchdb-single-config-options-httpd_db_handlers-summary">Configuration Groups</a></dt><dt>12.6. <a href="#table-couchdb-single-config-options-couch_httpd_auth-summary">Configuration Groups</a></dt><dt>12.7. <a href="#table-couchdb-single-config-options-httpd-summary">Configuration Groups</a></dt><dt>12.8. <a href="#table-couchdb-single-config-options-httpd_design_handlers-summary">Configuration Groups</a></dt><dt>12.9. <a href="#table-couchdb-single-config-options-httpd_global_handlers-summary">Configuration Groups</a></dt><dt>12.10. <a href="#table-couchdb-single-config-options-log-summary">Configuration Groups</a></dt><dt>12.11. <a href="#table-couchdb-single-config-options-query_servers-summary">Configuration Groups</a></dt><dt>12.12. <a href="#table-couchdb-single-config-options-query_server_config-summary">Configuration Groups</a></dt><dt>12.13. <a href="#table-couchdb-single-config-options-replicator-summary">Configuration Groups</a></dt><dt>12.14. <a href="#table-couchdb-single-config-options-stats-summary">Configuration Groups</a></dt><dt>12.15. <a href="#table-couchdb-single-config-options-uuids-summary">Configuration Groups</a></dt><dt>A.1. <a href="#table-couchdb-api-json-summary">JSON Structures</a></dt><dt>A.2. <a href="#table-couchdb-api-json_all-docs">
 All Database Documents
 </a></dt><dt>A.3. <a href="#table-couchdb-api-json_bulkdocsreturn">
 Bulk Document Response
 </a></dt><dt>A.4. <a href="#table-couchdb-api-json_bulkdocs">
 Bulk Documents
 </a></dt><dt>A.5. <a href="#table-couchdb-api-json_changes">
 Changes information for a database
 </a></dt><dt>A.6. <a href="#table-couchdb-api-json_document">
 CouchDB Document
 </a></dt><dt>A.7. <a href="#table-couchdb-api-json_jsonerror">
 CouchDB Error Status
 </a></dt><dt>A.8. <a href="#table-couchdb-api-json_db-info">
 CouchDB database information object
 </a></dt><dt>A.9. <a href="#table-couchdb-api-json_design-doc">
 Design Document
 </a></dt><dt>A.10. <a href="#table-couchdb-api-json_design-doc_info">
 Design Document Information
 </a></dt><dt>A.11. <a href="#table-couchdb-api-json_design-doc_info-spatial">
 Design Document spatial index Information
 </a></dt><dt>A.12. <a href="#table-couchdb-api-json_document_with_attachments">
 Document with Attachments
 </a></dt><dt>A.13. <a href="#table-couchdb-api-json_activetasks">
 List of Active Tasks
 </a></dt><dt>A.14. <a href="#table-couchdb-api-json_replication">
 Replication Settings
 </a></dt><dt>A.15. <a href="#table-couchdb-api-json_replication-status">
 Replication Status
 </a></dt><dt>A.16. <a href="#table-couchdb-api-json_document_with_revs_info">
 Returned CouchDB Document with Detailed Revision Info
 </a></dt><dt>A.17. <a href="#table-couchdb-api-json_document_with_revs">
 Returned CouchDB Document with Revision Info
 </a></dt><dt>A.18. <a href="#table-couchdb-api-json_returneddocument_with_attachments">
 Returned Document with Attachments
 </a></dt><dt>A.19. <a href="#table-couchdb-api-json_security">
 Security Object
 </a></dt></dl></div><div class="chapter" title="Chapter&nbsp;1.&nbsp;Introduction"><div class="titlepage"><div><div><h2 class="title"><a name="couchdb-single-introduction"></a>Chapter&nbsp;1.&nbsp;Introduction</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#couchdb-single-introduction-futon">1.1. Using Futon</a></span></dt><dd><dl><dt><span class="section"><a href="#couchdb-single-introduction-futon-dbdocs">1.1.1. Managing Databases and Documents</a></span></dt><dt><span class="section"><a href="#couchdb-single-introduction-futon-replication">1.1.2. Configuring Replication</a></span></dt></dl></dd><dt><span class="section"><a href="#couchdb-single-introduction-curl">1.2. Using <span class="command"><strong>curl</strong></span></a></span></dt></dl></div><p>
    There are two interfaces to CouchDB, the built-in
    Futon web-based interface and the CouchDB API accessed through the
    HTTP REST interface. The former is the simplest way to view and
    monitor your CouchDB installation and perform a
    number of basic database and system operations. More information on
    using the Futon interface can be found in
    <a class="xref" href="#couchdb-single-introduction-futon" title="1.1.&nbsp;Using Futon">Section&nbsp;1.1, &ldquo;Using Futon&rdquo;</a>.
  </p><p>
    The primary way to interact with the CouchDB API is to use a client
    library or other interface that provides access to the underlying
    functionality through your chosen language or platform. However,
    since the API is supported through HTTP REST, you can interact with
    your CouchDB with any solution that supports the
    HTTP protocol.
  </p><p>
    There are a number of different tools that talk the HTTP protocol
    and allow you to set and configure the necessary information. One
    tool for this that allows for access from the command-line is
    <span class="command"><strong>curl</strong></span>. See
    <a class="xref" href="#couchdb-single-introduction-curl" title="1.2.&nbsp;Using curl">Section&nbsp;1.2, &ldquo;Using <span class="command"><strong>curl</strong></span>&rdquo;</a>.
  </p><div class="section" title="1.1.&nbsp;Using Futon"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-single-introduction-futon"></a>1.1.&nbsp;Using Futon</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#couchdb-single-introduction-futon-dbdocs">1.1.1. Managing Databases and Documents</a></span></dt><dt><span class="section"><a href="#couchdb-single-introduction-futon-replication">1.1.2. Configuring Replication</a></span></dt></dl></div><p>
      Futon is a native web-based interface built into CouchDB. It provides a basic interface to the majority of the
      functionality, including the ability to create, update, delete and
      view documents and views, provides access to the configuration
      parameters, and an interface for initiating replication.
    </p><p>
      The default view is the <span class="guilabel">Overview</span> page which
      provides you with a list of the databases. The basic structure of
      the page is consistent regardless of the section you are in. The
      main panel on the left provides the main interface to the
      databases, configuration or replication systems. The side panel on
      the right provides navigation to the main areas of Futon
      interface:
    </p><div class="figure"><a name="fig-ccouchdb-single-introduction-futon-overview"></a><p class="title"><b>Figure&nbsp;1.1.&nbsp;Futon Overview</b></p><div class="figure-contents"><div class="mediaobject"><table cellpadding="0" cellspacing="0" summary="manufactured viewport for HTML img" border="0" width="100%"><tr><td><img width="100%" src="images/futon-overview.png" height="100%" alt="Futon Overview"></td></tr></table></div></div></div><br class="figure-break"><p>
      The main sections are:
    </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
          <span class="guibutton">Overview</span>
        </p><p>
          The main overview page, which provides a list of the databases
          and provides the interface for querying the database and
          creating and updating documents. See
          <a class="xref" href="#couchdb-single-introduction-futon-dbdocs" title="1.1.1.&nbsp;Managing Databases and Documents">Section&nbsp;1.1.1, &ldquo;Managing Databases and Documents&rdquo;</a>.
        </p></li><li class="listitem"><p>
          <span class="guibutton">Configuration</span>
        </p><p>
          An interface into the configuration of your CouchDB installation. The interface allows you to edit the
          different configurable parameters. For more details on
          configuration, see
          <a class="xref" href="#couchdb-single-configuration" title="Chapter&nbsp;12.&nbsp;Configuring CouchDB">Chapter&nbsp;12, <i>Configuring CouchDB</i></a>.
        </p></li><li class="listitem"><p>
          <span class="guibutton">Replicator</span>
        </p><p>
          An interface to the replication system, enabling you to
          initiate replication between local and remote databases. See
          <a class="xref" href="#couchdb-single-introduction-futon-replication" title="1.1.2.&nbsp;Configuring Replication">Section&nbsp;1.1.2, &ldquo;Configuring Replication&rdquo;</a>.
        </p></li><li class="listitem"><p>
          <span class="guibutton">Status</span>
        </p><p>
          Displays a list of the running background tasks on the server.
          Background tasks include view index building, compaction and
          replication. The <span class="guibutton">Status</span> page is an
          interface to the
          <a class="link" href="#couchdb-api-misc_active-tasks_get" title="9.2.&nbsp;GET /_active_tasks">Active
          Tasks</a> API call. See
          <a class="xref" href="#couchdb-api-misc_active-tasks_get" title="9.2.&nbsp;GET /_active_tasks">Section&nbsp;9.2, &ldquo;<code class="literal">GET /_active_tasks</code>&rdquo;</a>.
        </p></li><li class="listitem"><p>
          <span class="guibutton">Verify Installation</span>
        </p><p>
          The <span class="guibutton">Verify Installation</span> allows you to
          check whether all of the components of your CouchDB installation are correctly installed.
        </p></li><li class="listitem"><p>
          <span class="guibutton">Test Suite</span>
        </p><p>
          The <span class="guibutton">Test Suite</span> section allows you to
          run the built-in test suite. This executes a number of test
          routines entirely within your browser to test the API and
          functionality of your CouchDB installation. If
          you select this page, you can run the tests by using the
          <span class="guibutton">Run All</span> button. This will execute all
          the tests, which may take some time.
        </p></li></ul></div><div class="section" title="1.1.1.&nbsp;Managing Databases and Documents"><div class="titlepage"><div><div><h3 class="title"><a name="couchdb-single-introduction-futon-dbdocs"></a>1.1.1.&nbsp;Managing Databases and Documents</h3></div></div></div><p>
        You can manage databases and documents within Futon using the
        main <span class="guibutton">Overview</span> section of the Futon
        interface.
      </p><p>
        To create a new database, click the <span class="guibutton">Create Database
        &hellip;</span> button. You will be prompted for the
        database name, as shown in the figure below.
      </p><div class="figure"><a name="fig-ccouchdb-single-introduction-futon-dbdocs-createdb"></a><p class="title"><b>Figure&nbsp;1.2.&nbsp;Creating a Database</b></p><div class="figure-contents"><div class="mediaobject"><table cellpadding="0" cellspacing="0" summary="manufactured viewport for HTML img" border="0" width="100%"><tr><td><img width="100%" src="images/futon-createdb.png" height="100%" alt="Creating a Database"></td></tr></table></div></div></div><br class="figure-break"><p>
        Once you have created the database (or selected an existing
        one), you will be shown a list of the current documents. If you
        create a new document, or select an existing document, you will
        be presented with the edit document display.
      </p><p>
        Editing documents within Futon requires selecting the document
        and then editing (and setting) the fields for the document
        individually before saving the document back into the database.
      </p><p>
        For example, the figure below shows the editor for a single
        document, a newly created document with a single ID, the
        document <code class="literal">_id</code> field.
      </p><div class="figure"><a name="fig-ccouchdb-single-introduction-futon-dbdocs-editdoc"></a><p class="title"><b>Figure&nbsp;1.3.&nbsp;Editing a Document</b></p><div class="figure-contents"><div class="mediaobject"><table cellpadding="0" cellspacing="0" summary="manufactured viewport for HTML img" border="0" width="100%"><tr><td><img width="100%" src="images/futon-editdoc.png" height="100%" alt="Editing a Document"></td></tr></table></div></div></div><br class="figure-break"><p>
        To add a field to the document:
      </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
            Click <span class="guibutton">Add Field</span>.
          </p></li><li class="listitem"><p>
            In the fieldname box, enter the name of the field you want
            to create. For example, <span class="quote">&ldquo;<span class="quote">company</span>&rdquo;</span>.
          </p></li><li class="listitem"><p>
            Click the green tick next to the field name to confirm the
            field name change.
          </p></li><li class="listitem"><p>
            Double-click the corresponding <span class="guilabel">Value</span>
            cell.
          </p></li><li class="listitem"><p>
            Enter a company name, for example <span class="quote">&ldquo;<span class="quote">Example</span>&rdquo;</span>.
          </p></li><li class="listitem"><p>
            Click the green tick next to the field value to confirm the
            field value.
          </p></li><li class="listitem"><p>
            The document is still not saved as this point. You must
            explicitly save the document by clicking the <span class="guibutton">Save
            Document</span> button at the top of the page. This
            will save the document, and then display the new document
            with the saved revision information (the
            <code class="literal">_rev</code> field).
          </p><div class="figure"><a name="fig-ccouchdb-single-introduction-futon-dbdocs-finaldoc"></a><p class="title"><b>Figure&nbsp;1.4.&nbsp;Edited Document</b></p><div class="figure-contents"><div class="mediaobject"><table cellpadding="0" cellspacing="0" summary="manufactured viewport for HTML img" border="0" width="100%"><tr><td><img width="100%" src="images/futon-editeddoc.png" height="100%" alt="Edited Document"></td></tr></table></div></div></div><br class="figure-break"></li></ol></div><p>
        The same basic interface is used for all editng operations
        within Futon. You <span class="emphasis"><em>must</em></span> rememmbr to save the
        individual element (fieldname, value) using the green tick
        button, before then saving the document.
      </p></div><div class="section" title="1.1.2.&nbsp;Configuring Replication"><div class="titlepage"><div><div><h3 class="title"><a name="couchdb-single-introduction-futon-replication"></a>1.1.2.&nbsp;Configuring Replication</h3></div></div></div><p>
        When you click the <span class="guibutton">Replicator</span> option
        within the <span class="guilabel">Tools</span> menu you are presented
        with the Replicator screen. This allows you to start replication
        between two databases by filling in or select the appropriate
        options within the form provided.
      </p><div class="figure"><a name="fig-ccouchdb-single-introduction-futon-replication-form"></a><p class="title"><b>Figure&nbsp;1.5.&nbsp;Replication Form</b></p><div class="figure-contents"><div class="mediaobject"><table cellpadding="0" cellspacing="0" summary="manufactured viewport for HTML img" border="0" width="100%"><tr><td><img width="100%" src="images/futon-replform.png" height="100%" alt="Replication Form"></td></tr></table></div></div></div><br class="figure-break"><p>
        To start a replication process, either the select the local
        database or enter a remote database name into the corresponding
        areas of the form. Replication occurs from the database on the
        left to the database on the right.
      </p><p>
        If you are specifying a remote database name, you must specify
        the full URL of the remote database (including the host, port
        number and database name). If the remote instance requires
        authentication, you can specify the username and password as
        part of the URL, for example
        <code class="literal">http://username:pass@remotehost:5984/demo</code>.
      </p><p>
        To enable continuous replication, click the
        <span class="guilabel">Continuous</span> checkbox.
      </p><p>
        To start the replication process, click the
        <span class="guibutton">Replicate</span> button. The replication process
        should start and will continue in the background. If the
        replication process will take a long time, you can monitor the
        status of the replication using the
        <span class="guibutton">Status</span> option under the
        <span class="guilabel">Tools</span> menu.
      </p><p>
        Once replication has been completed, the page will show the
        information returned when the replication process completes by
        the API.
      </p><p>
        The <span class="guilabel">Replicator</span> tool is an interface to the
        underlying replication API. For more information, see
        <a class="xref" href="#couchdb-api-misc_replicate_post" title="9.5.&nbsp;POST /_replicate">Section&nbsp;9.5, &ldquo;<code class="literal">POST /_replicate</code>&rdquo;</a>.
        For more information on replication, see
        <a class="xref" href="#couchdb-single-replication" title="Chapter&nbsp;3.&nbsp;Replication">Chapter&nbsp;3, <i>Replication</i></a>.
      </p></div></div><div class="section" title="1.2.&nbsp;Using curl"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-single-introduction-curl"></a>1.2.&nbsp;Using <span class="command"><strong>curl</strong></span></h2></div></div></div><p>
      The <span class="command"><strong>curl</strong></span> utility is a command line tool
      available on Unix, Linux, Mac OS X and Windows and many other
      platforms. <span class="command"><strong>curl</strong></span> provides easy access to the
      HTTP protocol (among others) directly from the command-line and is
      therefore an ideal way of interacting with CouchDB
      over the HTTP REST API.
    </p><p>
      For simple <code class="literal">GET</code> requests you can supply the URL
      of the request. For example, to get the database information:
    </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>curl http://127.0.0.1:5984</code></strong></pre><p>
      This returns the database information (formatted in the output
      below for clarity):
    </p><pre class="programlisting">{
   "modules" : {
      "geocouch" : "7fd793c10f3aa667a1088a937398bc5b51472b7f"
   },
   "couchdb" : "Welcome",
   "version" : "1.1.0",
}</pre><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        For some URLs, especially those that include special characters
        such as ampersand, exclamation mark, or question mark, you
        should quote the URL you are specifying on the command line. For
        example:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>curl 'http://couchdb:5984/_uuids?count=5'</code></strong></pre></div><p>
      You can explicitly set the HTTP command using the
      <code class="option">-X</code> command line option. For example, when
      creating a database, you set the name of the database in the URL
      you send using a PUT request:
    </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>curl -X PUT http://127.0.0.1:5984/demo</code></strong>
{"ok":true}</pre><p>
      But to obtain the database information you use a
      <code class="literal">GET</code> request (with the return information
      formatted for clarity):
    </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>curl -X GET http://127.0.0.1:5984/demo</code></strong>
{
   "compact_running" : false,
   "doc_count" : 0,
   "db_name" : "demo",
   "purge_seq" : 0,
   "committed_update_seq" : 0,
   "doc_del_count" : 0,
   "disk_format_version" : 5,
   "update_seq" : 0,
   "instance_start_time" : "1306421773496000",
   "disk_size" : 79
}</pre><p>
      For certain operations, you must specify the content type of
      request, which you do by specifying the
      <code class="literal">Content-Type</code> header using the
      <code class="option">-H</code> command-line option:
    </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>curl -H 'Content-type: application/json' http://127.0.0.1:5984/_uuids</code></strong></pre><p>
      You can also submit 'payload' data, that is, data in the body of
      the HTTP request using the <code class="option">-d</code> option. This is
      useful if you need to submit JSON structures, for example document
      data, as part of the request. For example, to submit a simple
      document to the <code class="literal">demo</code> database:
    </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>curl -H 'Content-type: application/json' \
     -X POST http://127.0.0.1:5984/demo \
     -d '{"company": "Example, Inc."}'</code></strong>
{"ok":true,"id":"8843faaf0b831d364278331bc3001bd8",
 "rev":"1-33b9fbce46930280dab37d672bbc8bb9"}</pre><p>
      In the above example, the argument after the <code class="option">-d</code>
      option is the JSON of the document we want to submit.
    </p><p>
      The document can be accessed by using the automatically generated
      document ID that was returned:
    </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>curl -X GET http://127.0.0.1:5984/demo/8843faaf0b831d364278331bc3001bd8</code></strong>
{"_id":"8843faaf0b831d364278331bc3001bd8",
 "_rev":"1-33b9fbce46930280dab37d672bbc8bb9",
 "company":"Example, Inc."}</pre><p>
      The API samples in the <a class="xref" href="#couchdb-api-basics" title="Chapter&nbsp;4.&nbsp;CouchDB API">Chapter&nbsp;4, <i>CouchDB API</i></a> show
      the HTTP command, URL and any payload information that needs to be
      submitted (and the expected return value). All of these examples
      can be reproduced using <span class="command"><strong>curl</strong></span> with the
      command-line examples shown above.
    </p></div></div><div class="chapter" title="Chapter&nbsp;2.&nbsp;Features and Functionality"><div class="titlepage"><div><div><h2 class="title"><a name="couchdb-single-features"></a>Chapter&nbsp;2.&nbsp;Features and Functionality</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#couchdb-single-features-httprange">2.1. HTTP Range Requests</a></span></dt><dt><span class="section"><a href="#couchdb-single-features-proxying">2.2. HTTP Proxying</a></span></dt><dt><span class="section"><a href="#couchdb-single-features-commonjs">2.3. CommonJS support for map functions</a></span></dt><dt><span class="section"><a href="#couchdb-single-features-etag">2.4. Granular ETag support</a></span></dt></dl></div><p>
    &nbsp;
  </p><div class="section" title="2.1.&nbsp;HTTP Range Requests"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-single-features-httprange"></a>2.1.&nbsp;HTTP Range Requests</h2></div></div></div><p>
      HTTP allows you to specify byte ranges for requests. This allows
      the implementation of resumable downloads and skippable audio and
      video streams alike. The following example uses a text file to
      make the range request process easier.
    </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>cat file.txt</code></strong>
My hovercraft is full of eels!</pre><p>
      Uploading this as an attachment to a <code class="literal">text</code>
      database using <span class="command"><strong>curl</strong></span>:
    </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>curl -X PUT http://127.0.0.1:5984/test/doc/file.txt \
    -H "Content-Type: application/octet-stream" -d@file.txt</code></strong>
{"ok":true,"id":"doc","rev":"1-287a28fa680ae0c7fb4729bf0c6e0cf2"}</pre><p>
      Requesting the whole file works as normal:
    </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>curl -X GET http://127.0.0.1:5984/test/doc/file.txt</code></strong>
My hovercraft is full of eels!</pre><p>
      But to retrieve only the first 13 bytes using
      <span class="command"><strong>curl</strong></span>:
    </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>curl -X GET http://127.0.0.1:5984/test/doc/file.txt -H "Range: bytes=0-12"</code></strong>
My hovercraft</pre><p>
      HTTP supports many ways to specify single and even multiple byte
      rangers. See
      <a class="ulink" href="http://tools.ietf.org/html/rfc2616#section-14.27" target="_top">RFC
      2616</a>.
    </p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        Databases that have been created with CouchDB 1.0.2 or earlier
        will support range requests in 1.1.0, but they are using a
        less-optimal algorithm. If you plan to make heavy use of this
        feature, make sure to compact your database with CouchDB 1.1.0
        to take advantage of a better algorithm to find byte ranges.
      </p></div></div><div class="section" title="2.2.&nbsp;HTTP Proxying"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-single-features-proxying"></a>2.2.&nbsp;HTTP Proxying</h2></div></div></div><p>
      The HTTP proxy feature makes it easy to map and redirect different
      content through your CouchDB URL. The proxy works by mapping a
      pathname and passing all content after that prefix through to the
      configured proxy address.
    </p><p>
      Configuration of the proxy redirect is handled through the
      <code class="literal">[httpd_global_handlers]</code> section of the CouchDB
      configuration file (typically <code class="filename">local.ini</code>). The
      format is:
    </p><pre class="programlisting">[httpd_global_handlers]
PREFIX = {couch_httpd_proxy, handle_proxy_req, &lt;&lt;"DESTINATION"&gt;&gt;}</pre><p>
      Where:
    </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
          <code class="literal">PREFIX</code>
        </p><p>
          Is the string that will be matched. The string can be any
          valid qualifier, although to ensure that existing database
          names are not overridden by a proxy configuration, you can use
          an underscore prefix.
        </p></li><li class="listitem"><p>
          <code class="literal">DESTINATION</code>
        </p><p>
          The fully-qualified URL to which the request should be sent.
          The destination must include the <code class="literal">http</code>
          prefix. The content is used verbatim in the original request,
          so you can also forward to servers on different ports and to
          specific paths on the target host.
        </p></li></ul></div><p>
      The proxy process then translates requests of the form:
    </p><pre class="programlisting">http://couchdb:5984/PREFIX/path</pre><p>
      To:
    </p><pre class="programlisting">DESTINATION/path</pre><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        Everything after <code class="literal">PREFIX</code> including the
        required forward slash will be appended to the
        <code class="literal">DESTINATION</code>.
      </p></div><p>
      The response is then communicated back to the original client.
    </p><p>
      For example, the following configuration:
    </p><pre class="programlisting">_google = {couch_httpd_proxy, handle_proxy_req, &lt;&lt;"http://www.google.com"&gt;&gt;}</pre><p>
      Would forward all requests for
      <code class="literal">http://couchdb:5984/_google</code> to the Google
      website.
    </p><p>
      The service can also be used to forward to related CouchDB
      services, such as Lucene:
    </p><pre class="programlisting">[httpd_global_handlers]
_fti = {couch_httpd_proxy, handle_proxy_req, &lt;&lt;"http://127.0.0.1:5985"&gt;&gt;}</pre><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        The proxy service is basic. If the request is not identified by
        the <code class="literal">DESTINATION</code>, or the remainder of the
        <code class="literal">PATH</code> specification is incomplete, the
        original request URL is interpreted as if the
        <code class="literal">PREFIX</code> component of that URL does not exist.
      </p><p>
        For example, requesting
        <code class="literal">http://couchdb:5984/_intranet/media</code> when
        <code class="filename">/media</code> on the proxy destination does not
        exist, will cause the request URL to be interpreted as
        <code class="literal">http://couchdb:5984/media</code>. Care should be
        taken to ensure that both requested URLs and destination URLs
        are able to cope
      </p></div></div><div class="section" title="2.3.&nbsp;CommonJS support for map functions"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-single-features-commonjs"></a>2.3.&nbsp;CommonJS support for map functions</h2></div></div></div><p>
      CommonJS support allows you to use CommonJS notation inside
      <code class="methodname">map</code> and <code class="methodname">reduce</code>
      functions, but only of libraries that are stored inside the views
      part of the design doc.
    </p><p>
      So you could continue to access CommonJS code in design_doc.foo,
      from your list functions etc, but we'd add the ability to require
      CommonJS modules within map and reduce, but only from
      <code class="filename">design_doc.views.lib</code>.
    </p><p>
      There's no worry here about namespace collisions, as Couch just
      plucks <code class="literal">views.*.map</code> and
      <code class="literal">views.*.reduce</code> out of the design doc. So you
      could have a view called <code class="literal">lib</code> if you wanted, and
      still have CommonJS stored in <code class="literal">views.lib.sha1</code>
      and <code class="literal">views.lib.stemmer</code> if you wanted.
    </p><p>
      The implementation is simplified by enforcing that CommonJS
      modules to be used in <code class="methodname">map</code> functions be
      stored in views.lib.
    </p><p>
      A sample design doc (taken from the test suite in Futon) is below:
    </p><pre class="programlisting">{
   "views" : {
      "lib" : {
         "baz" : "exports.baz = 'bam';",
         "foo" : {
            "zoom" : "exports.zoom = 'yeah';",
            "boom" : "exports.boom = 'ok';",
            "foo" : "exports.foo = 'bar';"
         }
      },
      "commonjs" : {
         "map" : "function(doc) { emit(null, require('views/lib/foo/boom').boom)}"
      }
   },
   "_id" : "_design/test"
}</pre><p>
      The <code class="literal">require()</code> statement is relative to the
      design document, but anything loaded form outside of
      <code class="literal">views/lib</code> will fail.
    </p></div><div class="section" title="2.4.&nbsp;Granular ETag support"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-single-features-etag"></a>2.4.&nbsp;Granular ETag support</h2></div></div></div><p>
      ETags have been assigned to a map/reduce group (the collection of
      views in a single design document). Any change to any of the
      indexes for those views would generate a new ETag for all view
      URL's in a single design doc, even if that specific view's results
      had not changed.
    </p><p>
      In CouchDB 1.1 each <code class="literal">_view</code> URL has it's own ETag
      which only gets updated when changes are made to the database that
      effect that index. If the index for that specific view does not
      change, that view keeps the original ETag head (therefore sending
      back 304 Not Modified more often).
    </p></div></div><div class="chapter" title="Chapter&nbsp;3.&nbsp;Replication"><div class="titlepage"><div><div><h2 class="title"><a name="couchdb-single-replication"></a>Chapter&nbsp;3.&nbsp;Replication</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#couchdb-single-replication-replicatordb">3.1. Replicator Database</a></span></dt><dd><dl><dt><span class="section"><a href="#couchdb-single-replication-replicatordb-basics">3.1.1. Basics</a></span></dt><dt><span class="section"><a href="#couchdb-single-replication-replicatordb-docsame">3.1.2. Documents describing the same replication</a></span></dt><dt><span class="section"><a href="#couchdb-single-replication-replicatordb-cancel">3.1.3. Canceling replications</a></span></dt><dt><span class="section"><a href="#couchdb-single-replication-replicatordb-restart">3.1.4. Server restart</a></span></dt><dt><span class="section"><a href="#couchdb-single-replication-replicatordb-changing">3.1.5. Changing the Replicator Database</a></span></dt><dt><span class="section"><a href="#couchdb-single-replication-replicatordb-replicating">3.1.6. Replicating the replicator database</a></span></dt><dt><span class="section"><a href="#couchdb-single-replication-replicatordb-delegations">3.1.7. Delegations</a></span></dt></dl></dd></dl></div><p>
    &nbsp;
  </p><div class="section" title="3.1.&nbsp;Replicator Database"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-single-replication-replicatordb"></a>3.1.&nbsp;Replicator Database</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#couchdb-single-replication-replicatordb-basics">3.1.1. Basics</a></span></dt><dt><span class="section"><a href="#couchdb-single-replication-replicatordb-docsame">3.1.2. Documents describing the same replication</a></span></dt><dt><span class="section"><a href="#couchdb-single-replication-replicatordb-cancel">3.1.3. Canceling replications</a></span></dt><dt><span class="section"><a href="#couchdb-single-replication-replicatordb-restart">3.1.4. Server restart</a></span></dt><dt><span class="section"><a href="#couchdb-single-replication-replicatordb-changing">3.1.5. Changing the Replicator Database</a></span></dt><dt><span class="section"><a href="#couchdb-single-replication-replicatordb-replicating">3.1.6. Replicating the replicator database</a></span></dt><dt><span class="section"><a href="#couchdb-single-replication-replicatordb-delegations">3.1.7. Delegations</a></span></dt></dl></div><p>
      A database where you
      <code class="literal">PUT</code>/<code class="literal">POST</code> documents to
      trigger replications and you <code class="literal">DELETE</code> to cancel
      ongoing replications. These documents have exactly the same
      content as the JSON objects we used to <code class="literal">POST</code> to
      <code class="literal">_replicate</code> (fields <code class="literal">source</code>,
      <code class="literal">target</code>, <code class="literal">create_target</code>,
      <code class="literal">continuous</code>, <code class="literal">doc_ids</code>,
      <code class="literal">filter</code>, <code class="literal">query_params</code>.
    </p><p>
      Replication documents can have a user defined
      <code class="literal">_id</code>. Design documents (and
      <code class="literal">_local</code> documents) added to the replicator
      database are ignored.
    </p><p>
      The default name of this database is
      <code class="literal">_replicator</code>. The name can be changed in the
      <code class="filename">local.ini</code> configuration, section
      <code class="literal">[replicator]</code>, parameter <code class="literal">db</code>.
    </p><div class="section" title="3.1.1.&nbsp;Basics"><div class="titlepage"><div><div><h3 class="title"><a name="couchdb-single-replication-replicatordb-basics"></a>3.1.1.&nbsp;Basics</h3></div></div></div><p>
        Let's say you PUT the following document into _replicator:
      </p><pre class="programlisting">{
    "_id": "my_rep",
    "source":  "http://myserver.com:5984/foo",
    "target":  "bar",
    "create_target":  true
}</pre><p>
        In the couch log you'll see 2 entries like these:
      </p><pre class="programlisting">[Thu, 17 Feb 2011 19:43:59 GMT] [info] [&lt;0.291.0&gt;] Document `my_rep` triggered replication `c0ebe9256695ff083347cbf95f93e280+create_target`
[Thu, 17 Feb 2011 19:44:37 GMT] [info] [&lt;0.124.0&gt;] Replication `c0ebe9256695ff083347cbf95f93e280+create_target` finished (triggered by document `my_rep`)</pre><p>
        As soon as the replication is triggered, the document will be
        updated by CouchDB with 3 new fields:
      </p><pre class="programlisting">{
    "_id": "my_rep",
    "source":  "http://myserver.com:5984/foo",
    "target":  "bar",
    "create_target":  true,
    "_replication_id":  "c0ebe9256695ff083347cbf95f93e280",
    "_replication_state":  "triggered",
    "_replication_state_time":  1297974122
}</pre><p>
        Special fields set by the replicator start with the prefix
        <code class="literal">_replication_</code>.
      </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
            <code class="literal">_replication_id</code>
          </p><p>
            The ID internally assigned to the replication. This is also
            the ID exposed by <code class="literal">/_active_tasks</code>.
          </p></li><li class="listitem"><p>
            <code class="literal">_replication_state</code>
          </p><p>
            The current state of the replication.
          </p></li><li class="listitem"><p>
            <code class="literal">_replication_state_time</code>
          </p><p>
            A Unix timestamp (number of seconds since 1 Jan 1970) that
            tells us when the current replication state (marked in
            <code class="literal">_replication_state</code>) was set.
          </p></li></ul></div><p>
        When the replication finishes, it will update the
        <code class="literal">_replication_state</code> field (and
        <code class="literal">_replication_state_time</code>) with the value
        <code class="literal">completed</code>, so the document will look like:
      </p><pre class="programlisting">{
    "_id": "my_rep",
    "source":  "http://myserver.com:5984/foo",
    "target":  "bar",
    "create_target":  true,
    "_replication_id":  "c0ebe9256695ff083347cbf95f93e280",
    "_replication_state":  "completed",
    "_replication_state_time":  1297974122
}</pre><p>
        When an error happens during replication, the
        <code class="literal">_replication_state</code> field is set to
        <code class="literal">error</code> (and
        <code class="literal">_replication_state</code> gets updated of course).
      </p><p>
        When you PUT/POST a document to the
        <code class="literal">_replicator</code> database, CouchDB will attempt to
        start the replication up to 10 times (configurable under
        <code class="literal">[replicator]</code>, parameter
        <code class="literal">max_replication_retry_count</code>). If it fails on
        the first attempt, it waits 5 seconds before doing a second
        attempt. If the second attempt fails, it waits 10 seconds before
        doing a third attempt. If the third attempt fails, it waits 20
        seconds before doing a fourth attempt (each attempt doubles the
        previous wait period). When an attempt fails, the Couch log will
        show you something like:
      </p><pre class="programlisting">[error] [&lt;0.149.0&gt;] Error starting replication `67c1bb92010e7abe35d7d629635f18b6+create_target` (document `my_rep_2`): {db_not_found,&lt;&lt;"could not open http://myserver:5986/foo/"&gt;&gt;</pre><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          The <code class="literal">_replication_state</code> field is only set to
          <code class="literal">error</code> when all the attempts were
          unsuccessful.
        </p></div><p>
        There are only 3 possible values for the
        <code class="literal">_replication_state</code> field:
        <code class="literal">triggered</code>, <code class="literal">completed</code> and
        <code class="literal">error</code>. Continuous replications never get
        their state set to <code class="literal">completed</code>.
      </p></div><div class="section" title="3.1.2.&nbsp;Documents describing the same replication"><div class="titlepage"><div><div><h3 class="title"><a name="couchdb-single-replication-replicatordb-docsame"></a>3.1.2.&nbsp;Documents describing the same replication</h3></div></div></div><p>
        Lets suppose 2 documents are added to the
        <code class="literal">_replicator</code> database in the following order:
      </p><pre class="programlisting">{
    "_id": "doc_A",
    "source":  "http://myserver.com:5984/foo",
    "target":  "bar"
}</pre><p>
        and
      </p><pre class="programlisting">{
    "_id": "doc_B",
    "source":  "http://myserver.com:5984/foo",
    "target":  "bar"
}</pre><p>
        Both describe exactly the same replication (only their
        <code class="literal">_ids</code> differ). In this case document
        <code class="literal">doc_A</code> triggers the replication, getting
        updated by CouchDB with the fields
        <code class="literal">_replication_state</code>,
        <code class="literal">_replication_state_time</code> and
        <code class="literal">_replication_id</code>, just like it was described
        before. Document <code class="literal">doc_B</code> however, is only
        updated with one field, the <code class="literal">_replication_id</code>
        so it will look like this:
      </p><pre class="programlisting">{
    "_id": "doc_B",
    "source":  "http://myserver.com:5984/foo",
    "target":  "bar",
    "_replication_id":  "c0ebe9256695ff083347cbf95f93e280"
}</pre><p>
        While document <code class="literal">doc_A</code> will look like this:
      </p><pre class="programlisting">{
    "_id": "doc_A",
    "source":  "http://myserver.com:5984/foo",
    "target":  "bar",
    "_replication_id":  "c0ebe9256695ff083347cbf95f93e280",
    "_replication_state":  "triggered",
    "_replication_state_time":  1297974122
}</pre><p>
        Note that both document get exactly the same value for the
        <code class="literal">_replication_id</code> field. This way you can
        identify which documents refer to the same replication - you can
        for example define a view which maps replication IDs to document
        IDs.
      </p></div><div class="section" title="3.1.3.&nbsp;Canceling replications"><div class="titlepage"><div><div><h3 class="title"><a name="couchdb-single-replication-replicatordb-cancel"></a>3.1.3.&nbsp;Canceling replications</h3></div></div></div><p>
        To cancel a replication simply <code class="literal">DELETE</code> the
        document which triggered the replication. The Couch log will
        show you an entry like the following:
      </p><pre class="programlisting">[Thu, 17 Feb 2011 20:16:29 GMT] [info] [&lt;0.125.0&gt;] Stopped replication `c0ebe9256695ff083347cbf95f93e280+continuous+create_target` because replication document `doc_A` was deleted</pre><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          You need to <code class="literal">DELETE</code> the document that
          triggered the replication. <code class="literal">DELETE</code>ing
          another document that describes the same replication but did
          not trigger it, will not cancel the replication.
        </p></div></div><div class="section" title="3.1.4.&nbsp;Server restart"><div class="titlepage"><div><div><h3 class="title"><a name="couchdb-single-replication-replicatordb-restart"></a>3.1.4.&nbsp;Server restart</h3></div></div></div><p>
        When CouchDB is restarted, it checks its
        <code class="literal">_replicator</code> database and restarts any
        replication that is described by a document that either has its
        <code class="literal">_replication_state</code> field set to
        <code class="literal">triggered</code> or it doesn't have yet the
        <code class="literal">_replication_state</code> field set.
      </p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          Continuous replications always have a
          <code class="literal">_replication_state</code> field with the value
          <code class="literal">triggered</code>, therefore they're always
          restarted when CouchDB is restarted.
        </p></div></div><div class="section" title="3.1.5.&nbsp;Changing the Replicator Database"><div class="titlepage"><div><div><h3 class="title"><a name="couchdb-single-replication-replicatordb-changing"></a>3.1.5.&nbsp;Changing the Replicator Database</h3></div></div></div><p>
        Imagine your replicator database (default name is _replicator)
        has the two following documents that represent pull replications
        from servers A and B:
      </p><pre class="programlisting">{
    "_id": "rep_from_A",
    "source":  "http://aserver.com:5984/foo",
    "target":  "foo_a",
    "continuous":  true,
    "_replication_id":  "c0ebe9256695ff083347cbf95f93e280",
    "_replication_state":  "triggered",
    "_replication_state_time":  1297971311
}
{
    "_id": "rep_from_B",
    "source":  "http://bserver.com:5984/foo",
    "target":  "foo_b",
    "continuous":  true,
    "_replication_id":  "231bb3cf9d48314eaa8d48a9170570d1",
    "_replication_state":  "triggered",
    "_replication_state_time":  1297974122
}</pre><p>
        Now without stopping and restarting CouchDB, you change the name
        of the replicator database to
        <code class="literal">another_replicator_db</code>:
      </p><pre class="programlisting">$ curl -X PUT http://localhost:5984/_config/replicator/db -d '"another_replicator_db"'
"_replicator"</pre><p>
        As soon as this is done, both pull replications defined before,
        are stopped. This is explicitly mentioned in CouchDB's log:
      </p><pre class="programlisting">[Fri, 11 Mar 2011 07:44:20 GMT] [info] [&lt;0.104.0&gt;] Stopping all ongoing replications because the replicator database was deleted or changed
[Fri, 11 Mar 2011 07:44:20 GMT] [info] [&lt;0.127.0&gt;] 127.0.0.1 - - PUT /_config/replicator/db 200</pre><p>
        Imagine now you add a replication document to the new replicator
        database named <code class="literal">another_replicator_db</code>:
      </p><pre class="programlisting">{
    "_id": "rep_from_X",
    "source":  "http://xserver.com:5984/foo",
    "target":  "foo_x",
    "continuous":  true
}</pre><p>
        From now own you have a single replication going on in your
        system: a pull replication pulling from server X. Now you change
        back the replicator database to the original one
        <code class="literal">_replicator</code>:
      </p><pre class="programlisting">$ curl -X PUT http://localhost:5984/_config/replicator/db -d '"_replicator"'
"another_replicator_db"</pre><p>
        Immediately after this operation, the replication pulling from
        server X will be stopped and the replications defined in the
        _replicator database (pulling from servers A and B) will be
        resumed.
      </p><p>
        Changing again the replicator database to
        <code class="literal">another_replicator_db</code> will stop the pull
        replications pulling from servers A and B, and resume the pull
        replication pulling from server X.
      </p></div><div class="section" title="3.1.6.&nbsp;Replicating the replicator database"><div class="titlepage"><div><div><h3 class="title"><a name="couchdb-single-replication-replicatordb-replicating"></a>3.1.6.&nbsp;Replicating the replicator database</h3></div></div></div><p>
        Imagine you have in server C a replicator database with the two
        following pull replication documents in it:
      </p><pre class="programlisting">{
     "_id": "rep_from_A",
     "source":  "http://aserver.com:5984/foo",
     "target":  "foo_a",
     "continuous":  true,
     "_replication_id":  "c0ebe9256695ff083347cbf95f93e280",
     "_replication_state":  "triggered",
     "_replication_state_time":  1297971311
}
{
     "_id": "rep_from_B",
     "source":  "http://bserver.com:5984/foo",
     "target":  "foo_b",
     "continuous":  true,
     "_replication_id":  "231bb3cf9d48314eaa8d48a9170570d1",
     "_replication_state":  "triggered",
     "_replication_state_time":  1297974122
}</pre><p>
        Now you would like to have the same pull replications going on
        in server D, that is, you would like to have server D pull
        replicating from servers A and B. You have two options:
      </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
            Explicitly add two documents to server's D replicator
            database
          </p></li><li class="listitem"><p>
            Replicate server's C replicator database into server's D
            replicator database
          </p></li></ul></div><p>
        Both alternatives accomplish exactly the same goal.
      </p></div><div class="section" title="3.1.7.&nbsp;Delegations"><div class="titlepage"><div><div><h3 class="title"><a name="couchdb-single-replication-replicatordb-delegations"></a>3.1.7.&nbsp;Delegations</h3></div></div></div><p>
        Replication documents can have a custom
        <code class="literal">user_ctx</code> property. This property defines the
        user context under which a replication runs. For the old way of
        triggering replications (POSTing to
        <code class="literal">/_replicate/</code>), this property was not needed
        (it didn't exist in fact) - this is because at the moment of
        triggering the replication it has information about the
        authenticated user. With the replicator database, since it's a
        regular database, the information about the authenticated user
        is only present at the moment the replication document is
        written to the database - the replicator database implementation
        is like a _changes feed consumer (with
        <code class="literal">?include_docs=true</code>) that reacts to what was
        written to the replicator database - in fact this feature could
        be implemented with an external script/program. This
        implementation detail implies that for non admin users, a
        <code class="literal">user_ctx</code> property, containing the user's name
        and a subset of his/her roles, must be defined in the
        replication document. This is ensured by the document update
        validation function present in the default design document of
        the replicator database. This validation function also ensure
        that a non admin user can set a user name property in the
        <code class="literal">user_ctx</code> property that doesn't match his/her
        own name (same principle applies for the roles).
      </p><p>
        For admins, the <code class="literal">user_ctx</code> property is
        optional, and if it's missing it defaults to a user context with
        name null and an empty list of roles - this mean design
        documents will not be written to local targets. If writing
        design documents to local targets is desired, the a user context
        with the roles <code class="literal">_admin</code> must be set explicitly.
      </p><p>
        Also, for admins the <code class="literal">user_ctx</code> property can be
        used to trigger a replication on behalf of another user. This is
        the user context that will be passed to local target database
        document validation functions.
      </p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          The <code class="literal">user_ctx</code> property only has effect for
          local endpoints.
        </p></div><p>
        Example delegated replication document:
      </p><pre class="programlisting">{
     "_id": "my_rep",
     "source":  "http://bserver.com:5984/foo",
     "target":  "bar",
     "continuous":  true,
     "user_ctx": {
          "name": "joe",
          "roles": ["erlanger", "researcher"]
     }
}</pre><p>
        As stated before, for admins the user_ctx property is optional,
        while for regular (non admin) users it's mandatory. When the
        roles property of <code class="literal">user_ctx</code> is missing, it
        defaults to the empty list <code class="literal">[ ]</code>.
      </p></div></div></div><div class="chapter" title="Chapter&nbsp;4.&nbsp;CouchDB API"><div class="titlepage"><div><div><h2 class="title"><a name="couchdb-api-basics"></a>Chapter&nbsp;4.&nbsp;CouchDB API</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#couchdb-api-introduction-requests">4.1. Request Format and Responses</a></span></dt><dt><span class="section"><a href="#couchdb-api-introduction-request-header">4.2. HTTP Headers</a></span></dt><dd><dl><dt><span class="section"><a href="#couchdb-api-introduction-request-header-request">4.2.1. Request Headers</a></span></dt><dt><span class="section"><a href="#couchdb-api-introduction-request-header-response">4.2.2. Response Headers</a></span></dt></dl></dd><dt><span class="section"><a href="#couchdb-api-introduction-json">4.3. JSON Basics</a></span></dt><dt><span class="section"><a href="#couchdb-api-introduction-returncodes">4.4. HTTP Status Codes</a></span></dt><dt><span class="section"><a href="#couchdb-api-overview">4.5. CouchDB API Overview</a></span></dt></dl></div><p>
    The CouchDB API is the primary method of interfacing to a CouchDB
    instance. Requests are made using HTTP and requests are used to
    request information from the database, store new data, and perform
    views and formatting of the information stored within the documents.
  </p><p>
    Requests to the API can be categorised by the different areas of the
    CouchDB system that you are accessing, and the HTTP method used to
    send the request. Different methods imply different operations, for
    example retrieval of information from the database is typically
    handled by the <code class="literal">GET</code> operation, while updates are
    handled by either a <code class="literal">POST</code> or
    <code class="literal">PUT</code> request. There are some differences between
    the information that must be supplied for the different methods. For
    a guide to the basic HTTP methods and request structure, see
    <a class="xref" href="#couchdb-api-introduction-requests" title="4.1.&nbsp;Request Format and Responses">Section&nbsp;4.1, &ldquo;Request Format and Responses&rdquo;</a>.
  </p><p>
    For nearly all operations, the submitted data, and the returned data
    structure, is defined within a JavaScript Object Notation (JSON)
    object. Basic information on the content and data types for JSON are
    provided in <a class="xref" href="#couchdb-api-introduction-json" title="4.3.&nbsp;JSON Basics">Section&nbsp;4.3, &ldquo;JSON Basics&rdquo;</a>.
  </p><p>
    Errors when accessing the CouchDB API are reported using standard
    HTTP Status Codes. A guide to the generic codes returned by CouchDB
    are provided in
    <a class="xref" href="#couchdb-api-introduction-returncodes" title="4.4.&nbsp;HTTP Status Codes">Section&nbsp;4.4, &ldquo;HTTP Status Codes&rdquo;</a>.
  </p><p>
    When accessing specific areas of the CouchDB API, specific
    information and examples on the HTTP methods and request, JSON
    structures, and error codes are provided. For a guide to the
    different areas of the API, see
    <a class="xref" href="#couchdb-api-overview" title="4.5.&nbsp;CouchDB API Overview">Section&nbsp;4.5, &ldquo;CouchDB API Overview&rdquo;</a>.
  </p><div class="section" title="4.1.&nbsp;Request Format and Responses"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-introduction-requests"></a>4.1.&nbsp;Request Format and Responses</h2></div></div></div><p>
      CouchDB supports the following HTTP request methods:
    </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
          <code class="literal">GET</code>
        </p><p>
          Request the specified item. As with normal HTTP requests, the
          format of the URL defines what is returned. With CouchDB this
          can include static items, database documents, and
          configuration and statistical information. In most cases the
          information is returned in the form of a JSON document.
        </p></li><li class="listitem"><p>
          <code class="literal">HEAD</code>
        </p><p>
          The <code class="literal">HEAD</code> method is used to get the HTTP
          header of a <code class="literal">GET</code> request without the body of
          the response.
        </p></li><li class="listitem"><p>
          <code class="literal">POST</code>
        </p><p>
          Upload data. Within CouchDB <code class="literal">POST</code> is used to
          set values, including uploading documents, setting document
          values, and starting certain administration commands.
        </p></li><li class="listitem"><p>
          <code class="literal">PUT</code>
        </p><p>
          Used to put a specified resource. In CouchDB
          <code class="literal">PUT</code> is used to create new objects,
          including databases, documents, views and design documents.
        </p></li><li class="listitem"><p>
          <code class="literal">DELETE</code>
        </p><p>
          Deletes the specified resource, including documents, views,
          and design documents.
        </p></li><li class="listitem"><p>
          <code class="literal">COPY</code>
        </p><p>
          A special method that can be used to copy documents and
          objects.
        </p></li></ul></div><p>
      If you use the an unsupported HTTP request type with a URL that
      does not support the specified type, a 405 error will be returned,
      listing the supported HTTP methods. For example:
    </p><pre class="programlisting">{
    "error":"method_not_allowed",
    "reason":"Only GET,HEAD allowed"
}</pre><p>
      The CouchDB design document API and the functions when returning
      HTML (for example as part of a show or list) enables you to
      include custom HTTP headers through the <code class="literal">headers</code>
      block of the return object. For more information, see
      <a class="xref" href="#">???</a>.
    </p></div><div class="section" title="4.2.&nbsp;HTTP Headers"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-introduction-request-header"></a>4.2.&nbsp;HTTP Headers</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#couchdb-api-introduction-request-header-request">4.2.1. Request Headers</a></span></dt><dt><span class="section"><a href="#couchdb-api-introduction-request-header-response">4.2.2. Response Headers</a></span></dt></dl></div><p>
      Because CouchDB uses HTTP for all communication, you need to
      ensure that the correct HTTP headers are supplied (and processed
      on retrieval) so that you get the right format and encoding.
      Different environments and clients will be more or less strict on
      the effect of these HTTP headers (especially when not present).
      Where possible you should be as specific as possible.
    </p><div class="section" title="4.2.1.&nbsp;Request Headers"><div class="titlepage"><div><div><h3 class="title"><a name="couchdb-api-introduction-request-header-request"></a>4.2.1.&nbsp;Request Headers</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
            <code class="literal">Content-type</code>
          </p><p>
            Specifies the content type of the information being supplied
            within the request. The specification uses MIME type
            specifications. For the majority of requests this will be
            JSON (<code class="literal">application/json</code>). For some
            settings the MIME type will be plain text. When uploading
            attachments it should be the corresponding MIME type for the
            attachment or binary
            (<code class="literal">application/octet-stream</code>).
          </p><p>
            The use of the <code class="literal">Content-type</code> on a request
            is highly recommended.
          </p></li><li class="listitem"><p>
            <code class="literal">Accept</code>
          </p><p>
            Specifies the list of accepted data types to be returned by
            the server (i.e. that are accepted/understandable by the
            client). The format should be a list of one or more MIME
            types, separated by colons.
          </p><p>
            For the majority of requests the definition should be for
            JSON data (<code class="literal">application/json</code>). For
            attachments you can either specify the MIME type explicitly,
            or use <code class="literal">*/*</code> to specify that all file types
            are supported. If the <code class="literal">Accept</code> header is
            not supplied, then the <code class="literal">*/*</code> MIME type is
            assumed (i.e. client accepts all formats).
          </p><p>
            The use of <code class="literal">Accept</code> in queries for CouchDB
            is not required, but is highly recommended as it helps to
            ensure that the data returned can be processed by the
            client.
          </p><p>
            If you specify a data type using the
            <code class="literal">Accept</code> header, CouchDB will honor the
            specified type in the <code class="literal">Content-type</code> header
            field returned. For example, if you explicitly request
            <code class="literal">application/json</code> in the
            <code class="literal">Accept</code> of a request, the returned HTTP
            headers will use the value in the returned
            <code class="literal">Content-type</code> field.
          </p><p>
            For example, when sending a request without an explicit
            <code class="literal">Accept</code> header, or when specifying
            <code class="literal">*/*</code>:
          </p><pre class="programlisting">GET /recipes HTTP/1.1
Host: couchdb:5984
Accept: */*</pre><p>
            The returned headers are:
          </p><pre class="programlisting">Server: CouchDB/1.0.1 (Erlang OTP/R13B)
Date: Thu, 13 Jan 2011 13:39:34 GMT
Content-Type: text/plain;charset=utf-8
Content-Length: 227
Cache-Control: must-revalidate</pre><p>
            Note that the returned content type is
            <code class="literal">text/plain</code> even though the information
            returned by the request is in JSON format.
          </p><p>
            Explicitly specifying the <code class="literal">Accept</code> header:
          </p><pre class="programlisting">GET /recipes HTTP/1.1
Host: couchdb:5984
Accept: application/json</pre><p>
            The headers returned include the
            <code class="literal">application/json</code> content type:
          </p><pre class="programlisting">Server: CouchDB/1.0.1 (Erlang OTP/R13B)
Date: Thu, 13 Jan 2011 13:40:11 GMT
Content-Type: application/json
Content-Length: 227
Cache-Control: must-revalidate</pre></li></ul></div></div><div class="section" title="4.2.2.&nbsp;Response Headers"><div class="titlepage"><div><div><h3 class="title"><a name="couchdb-api-introduction-request-header-response"></a>4.2.2.&nbsp;Response Headers</h3></div></div></div><p>
        Response headers are returned by the server when sending back
        content and include a number of different header fields, many of
        which are standard HTTP response header and have no significance
        to CouchDB operation. The list of response headers important to
        CouchDB are listed below.
      </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
            <code class="literal">Content-type</code>
          </p><p>
            Specifies the MIME type of the returned data. For most
            request, the returned MIME type is
            <code class="literal">text/plain</code>. All text is encoded in
            Unicode (UTF-8), and this is explicitly stated in the
            returned <code class="literal">Content-type</code>, as
            <code class="literal">text/plain;charset=utf-8</code>.
          </p></li><li class="listitem"><p>
            <code class="literal">Cache-control</code>
          </p><p>
            The cache control HTTP response header provides a suggestion
            for client caching mechanisms on how to treat the returned
            information. CouchDB typically returns the
            <code class="literal">must-revalidate</code>, which indicates that the
            information should be revalidated if possible. This is used
            to ensure that the dynamic nature of the content is
            correctly updated.
          </p></li><li class="listitem"><p>
            <code class="literal">Content-length</code>
          </p><p>
            The length (in bytes) of the returned content.
          </p></li><li class="listitem"><p>
            <code class="literal">Etag</code>
          </p><p>
            The <code class="literal">Etag</code> HTTP header field is used to
            show the revision for a document.
          </p></li></ul></div></div></div><div class="section" title="4.3.&nbsp;JSON Basics"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-introduction-json"></a>4.3.&nbsp;JSON Basics</h2></div></div></div><p>
      The majority of requests and responses to CouchDB use the
      JavaScript Object Notation (JSON) for formatting the content and
      structure of the data and responses.
    </p><p>
      JSON is used because it is the simplest and easiest to use
      solution for working with data within a web browser, as JSON
      structures can be evaluated and used as JavaScript objects within
      the web browser environment. JSON also integrates with the
      server-side JavaScript used within CouchDB.
    </p><p>
      JSON supports the same basic types as supported by JavaScript,
      these are:
    </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
          Number (either integer or floating-point).
        </p></li><li class="listitem"><p>
          String; this should be enclosed by double-quotes and supports
          Unicode characters and backslash escaping. For example:
        </p><pre class="programlisting">"A String"</pre></li><li class="listitem"><p>
          Boolean - a <code class="literal">true</code> or
          <code class="literal">false</code> value. You can use these strings
          directly. For example:
        </p><pre class="programlisting">{ "value": true}</pre></li><li class="listitem"><p>
          Array - a list of values enclosed in square brackets. For
          example:
        </p><pre class="programlisting">["one", "two", "three"]</pre></li><li class="listitem"><p>
          Object - a set of key/value pairs (i.e. an associative array,
          or hash). The key must be a string, but the value can be any
          of the supported JSON values. For example:
        </p><pre class="programlisting">{
   "servings" : 4,
   "subtitle" : "Easy to make in advance, and then cook when ready",
   "cooktime" : 60,
   "title" : "Chicken Coriander"
}</pre><p>
          In CouchDB, the JSON object is used to represent a variety of
          structures, including the main CouchDB document.
        </p></li></ul></div><p>
      Parsing JSON into a JavaScript object is supported through the
      <code class="literal">eval()</code> function in JavaScript, or through
      various libraries that will perform the parsing of the content
      into a JavaScript object for you. Libraries for parsing and
      generating JSON are available in many languages, including Perl,
      Python, Ruby, Erlang and others.
    </p><div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
        Care should be taken to ensure that your JSON structures are
        valid, invalid structures will cause CouchDB to return an HTTP
        status code of 500 (server error). See
        <a class="xref" href="#couchdb-api-introduction-returncode-500">HTTP               Status Code 500</a>
        .
      </p></div></div><div class="section" title="4.4.&nbsp;HTTP Status Codes"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-introduction-returncodes"></a>4.4.&nbsp;HTTP Status Codes</h2></div></div></div><p>
      With the interface to CouchDB working through HTTP, error codes
      and statuses are reported using a combination of the HTTP status
      code number, and corresponding data in the body of the response
      data.
    </p><p>
      A list of the error codes returned by CouchDB, and generic
      descriptions of the related errors are provided below. The meaning
      of different status codes for specific request types are provided
      in the corresponding API call reference.
    </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><a name="couchdb-api-introduction-returncode-200"></a>
          <code class="literal">200 - OK</code>
        </p><p>
          Request completed successfully.
        </p></li><li class="listitem"><p><a name="couchdb-api-introduction-returncode-201"></a>
          <code class="literal">201 - Created</code>
        </p><p>
          Document created successfully.
        </p></li><li class="listitem"><p><a name="couchdb-api-introduction-returncode-202"></a>
          <code class="literal">202 - Accepted</code>
        </p><p>
          Request has been accepted, but the corresponding operation may
          not have completed. This is used for background operations,
          such as database compaction.
        </p></li><li class="listitem"><p><a name="couchdb-api-introduction-returncode-304"></a>
          <code class="literal">304 - Not Modified</code>
        </p><p>
          The additional content requested has not been modified. This
          is used with the ETag system to identify the version of
          information returned.
        </p></li><li class="listitem"><p><a name="couchdb-api-introduction-returncode-400"></a>
          <code class="literal">400 - Bad Request</code>
        </p><p>
          Bad request structure. The error can indicate an error with
          the request URL, path or headers. Differences in the supplied
          MD5 hash and content also trigger this error, as this may
          indicate message corruption.
        </p></li><li class="listitem"><p><a name="couchdb-api-introduction-returncode-401"></a>
          <code class="literal">401 - Unauthorized</code>
        </p><p>
          The item requested was not available using the supplied
          authorization, or authorization was not supplied.
        </p></li><li class="listitem"><p><a name="couchdb-api-introduction-returncode-403"></a>
          <code class="literal">403 - Forbidden</code>
        </p><p>
          The requested item or operation is forbidden.
        </p></li><li class="listitem"><p><a name="couchdb-api-introduction-returncode-404"></a>
          <code class="literal">404 - Not Found</code>
        </p><p>
          The requested content could not be found. The content will
          include further information, as a JSON object, if available.
          The structure will contain two keys, <code class="literal">error</code>
          and <code class="literal">reason</code>. For example:
        </p><pre class="programlisting">{"error":"not_found","reason":"no_db_file"}</pre></li><li class="listitem"><p><a name="couchdb-api-introduction-returncode-405"></a>
          <code class="literal">405 - Resource Not Allowed</code>
        </p><p>
          A request was made using an invalid HTTP request type for the
          URL requested. For example, you have requested a
          <code class="literal">PUT</code> when a <code class="literal">POST</code> is
          required. Errors of this type can also triggered by invalid
          URL strings.
        </p></li><li class="listitem"><p><a name="couchdb-api-introduction-returncode-406"></a>
          <code class="literal">406 - Not Acceptable</code>
        </p><p>
          The requested content type is not supported by the server.
        </p></li><li class="listitem"><p><a name="couchdb-api-introduction-returncode-409"></a>
          <code class="literal">409 - Conflict</code>
        </p><p>
          Request resulted in an update conflict.
        </p></li><li class="listitem"><p><a name="couchdb-api-introduction-returncode-412"></a>
          <code class="literal">412 - Precondition Failed</code>
        </p><p>
          The request headers from the client and the capabilities of
          the server do not match.
        </p></li><li class="listitem"><p><a name="couchdb-api-introduction-returncode-415"></a>
          <code class="literal">415 - Bad Content Type</code>
        </p><p>
          The content types supported, and the content type of the
          information being requested or submitted indicate that the
          content type is not supported.
        </p></li><li class="listitem"><p><a name="couchdb-api-introduction-returncode-416"></a>
          <code class="literal">416 - Requested Range Not Satisfiable</code>
        </p><p>
          The range specified in the request header cannot be satisfied
          by the server.
        </p></li><li class="listitem"><p><a name="couchdb-api-introduction-returncode-417"></a>
          <code class="literal">417 - Expectation Failed</code>
        </p><p>
          When sending documents in bulk, the bulk load operation
          failed.
        </p></li><li class="listitem"><p><a name="couchdb-api-introduction-returncode-500"></a>
          <code class="literal">500 - Internal Server Error</code>
        </p><p>
          The request was invalid, either because the supplied JSON was
          invalid, or invalid information was supplied as part of the
          request.
        </p></li></ul></div></div><div class="section" title="4.5.&nbsp;CouchDB API Overview"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-overview"></a>4.5.&nbsp;CouchDB API Overview</h2></div></div></div><p>
      The components of the API URL path help determine the part of the
      CouchDB server that is being accessed. The result is the structure
      of the URL request both identifies and effectively describes the
      area of the database you are accessing.
    </p><p>
      As with all URLs, the individual components are separated by a
      forward slash.
    </p><p>
      As a general rule, URL components and JSON fields starting with
      the <code class="literal">_</code> (underscore) character represent a
      special component or entity within the server or returned object.
      For example, the URL fragment <code class="literal">/_all_dbs</code> gets a
      list of all of the databases in a CouchDB instance.
    </p><p>
      The remainder of the URL API structure can be divided up according
      to the URL structure. The different sections are divided as
      follows:
    </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
          <code class="literal">/db</code>
        </p><p>
          Database methods, related to adding, updating or deleting
          databases, and setting database parameters and operations. For
          more detailed information, see
          <a class="xref" href="#couchdb-api-db" title="Chapter&nbsp;5.&nbsp;CouchDB API Server Database Methods">Chapter&nbsp;5, <i>CouchDB API Server Database Methods</i></a> .
        </p></li><li class="listitem"><p>
          <code class="literal">/db/doc</code>
        </p><p>
          Document methods, those that create, store, update or delete
          CouchDB documents and their attachments. For more information,
          see <a class="xref" href="#couchdb-api-dbdoc" title="Chapter&nbsp;6.&nbsp;CouchDB API Server Document Methods">Chapter&nbsp;6, <i>CouchDB API Server Document Methods</i></a>.
        </p></li><li class="listitem"><p>
          <code class="literal">/db/_local/local-doc</code>
        </p><p>
          Document methods, those that create, store, update or delete
          CouchDB documents only within the local database. Local
          documents are not synchronized with other databases. For more
          information, see
          <a class="xref" href="#couchdb-api-localdb" title="Chapter&nbsp;7.&nbsp;CouchDB API Server Local (non-replicating) Document Methods">Chapter&nbsp;7, <i>CouchDB API Server Local (non-replicating) Document Methods</i></a>.
        </p></li><li class="listitem"><p>
          <code class="literal">/db/_design/design-doc</code>
        </p><p>
          Design documents provide the methods and structure for
          recovering information from a CouchDB database in the form of
          views, shows and lists. For more information, see
          <a class="xref" href="#couchdb-api-design" title="Chapter&nbsp;8.&nbsp;CouchDB API Server Design Document Methods">Chapter&nbsp;8, <i>CouchDB API Server Design Document Methods</i></a>.
        </p></li><li class="listitem"><p>
          <code class="literal">/_special</code>
        </p><p>
          Special methods that obtain or set information about the
          CouchDB instance, including methods for configuring
          replication, accessing the logs, and generate Universally
          Unique IDs (UUIDs). For more information, see
          <a class="xref" href="#couchdb-api-misc" title="Chapter&nbsp;9.&nbsp;CouchDB API Server Miscellaneous Methods">Chapter&nbsp;9, <i>CouchDB API Server Miscellaneous Methods</i></a>.
        </p></li><li class="listitem"><p>
          <code class="literal">/_config</code>
        </p><p>
          Methods for getting, and settings, CouchDB configuration
          parameters. For more information, see
          <a class="xref" href="#couchdb-api-misc" title="Chapter&nbsp;9.&nbsp;CouchDB API Server Miscellaneous Methods">Chapter&nbsp;9, <i>CouchDB API Server Miscellaneous Methods</i></a>.
        </p></li></ul></div></div></div><div class="chapter" title="Chapter&nbsp;5.&nbsp;CouchDB API Server Database Methods"><div class="titlepage"><div><div><h2 class="title"><a name="couchdb-api-db"></a>Chapter&nbsp;5.&nbsp;CouchDB API Server Database Methods</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#couchdb-api-db_db_get">5.1. <code class="literal">GET /db</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-db_db_put">5.2. <code class="literal">PUT /db</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-db_db_delete">5.3. <code class="literal">DELETE /db</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-db_db-changes_get">5.4. <code class="literal">GET /db/_changes</code></a></span></dt><dd><dl><dt><span class="section"><a href="#couchdb-api-db_db-changes_get-filters">5.4.1. Filtering</a></span></dt></dl></dd><dt><span class="section"><a href="#couchdb-api-db_db-compact_post">5.5. <code class="literal">POST /db/_compact</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-db_db-compact-design-doc_post">5.6. <code class="literal">POST /db/_compact/design-doc</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-db_db-view-cleanup_post">5.7. <code class="literal">POST /db/_view_cleanup</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-db_db-ensure-full-commit_post">5.8. <code class="literal">POST /db/_ensure_full_commit</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-db_db-bulk-docs_post">5.9. <code class="literal">POST /db/_bulk_docs</code></a></span></dt><dd><dl><dt><span class="section"><a href="#couchdb-api-db_db-bulk-docs_post-insert">5.9.1. Inserting Documents in Bulk</a></span></dt><dt><span class="section"><a href="#couchdb-api-db_db-bulk-docs_post-update">5.9.2. Updating Documents in Bulk</a></span></dt><dt><span class="section"><a href="#couchdb-api-db_db-bulk-docs_post-commit">5.9.3. Bulk Documents Transaction Semantics</a></span></dt><dt><span class="section"><a href="#couchdb-api-db_db-bulk-docs_post-errors">5.9.4. Bulk Document Validation and Conflict Errors</a></span></dt></dl></dd><dt><span class="section"><a href="#couchdb-api-db_db-temp-view_post">5.10. <code class="literal">POST /db/_temp_view</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-db_db-purge_post">5.11. <code class="literal">POST /db/_purge</code></a></span></dt><dd><dl><dt><span class="section"><a href="#couchdb-api-db_db-purge_post-indexrebuild">5.11.1. Updating Indexes</a></span></dt></dl></dd><dt><span class="section"><a href="#couchdb-api-db_db-all-docs_get">5.12. <code class="literal">GET /db/_all_docs</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-db_db-all-docs_post">5.13. <code class="literal">POST /db/_all_docs</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-db_db-missing-revs_post">5.14. <code class="literal">POST /db/_missing_revs</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-db_db-revs-diff_post">5.15. <code class="literal">POST /db/_revs_diff</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-db_db-security_get">5.16. <code class="literal">GET /db/_security</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-db_db-security_put">5.17. <code class="literal">PUT /db/_security</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-db_db-revs-limit_get">5.18. <code class="literal">GET /db/_revs_limit</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-db_db-revs-limit_put">5.19. <code class="literal">PUT /db/_revs_limit</code></a></span></dt></dl></div><p>
    The Database methods provide an interface to an entire database
    withing CouchDB. These are database, rather than document, level
    requests.
  </p><p>
    A list of the available methods and URL paths are provided below:
  </p><div class="table"><a name="table-couchdb-api-db-summary"></a><p class="title"><b>Table&nbsp;5.1.&nbsp;Database API Calls</b></p><div class="table-contents"><table summary="Database API Calls" border="1"><colgroup><col class="method" width="33%"><col class="path" width="33%"><col class="desc" width="34%"></colgroup><thead><tr><th>Method</th><th>Path</th><th>Description</th></tr></thead><tbody><tr><td><code class="literal">GET</code></td><td><code class="literal">/db</code></td><td><a class="link" href="#couchdb-api-db_db_get" title="5.1.&nbsp;GET /db">
 Returns database information
 </a></td></tr><tr><td><code class="literal">PUT</code></td><td><code class="literal">/db</code></td><td><a class="link" href="#couchdb-api-db_db_put" title="5.2.&nbsp;PUT /db">
 Create a new database
 </a></td></tr><tr><td><code class="literal">DELETE</code></td><td><code class="literal">/db</code></td><td><a class="link" href="#couchdb-api-db_db_delete" title="5.3.&nbsp;DELETE /db">
 Delete an existing database
 </a></td></tr><tr><td><code class="literal">GET</code></td><td><code class="literal">/db/_all_docs</code></td><td><a class="link" href="#couchdb-api-db_db-all-docs_get" title="5.12.&nbsp;GET /db/_all_docs">
 Returns a built-in view of all documents in this database
 </a></td></tr><tr><td><code class="literal">POST</code></td><td><code class="literal">/db/_all_docs</code></td><td><a class="link" href="#couchdb-api-db_db-all-docs_post" title="5.13.&nbsp;POST /db/_all_docs">
 Returns certain rows from the built-in view of all documents
 </a></td></tr><tr><td><code class="literal">POST</code></td><td><code class="literal">/db/_bulk_docs</code></td><td><a class="link" href="#couchdb-api-db_db-bulk-docs_post" title="5.9.&nbsp;POST /db/_bulk_docs">
 Insert multiple documents in to the database in a single request
 </a></td></tr><tr><td><code class="literal">GET</code></td><td><code class="literal">/db/_changes</code></td><td><a class="link" href="#couchdb-api-db_db-changes_get" title="5.4.&nbsp;GET /db/_changes">
 Returns changes for the given database
 </a></td></tr><tr><td><code class="literal">POST</code></td><td><code class="literal">/db/_compact</code></td><td><a class="link" href="#couchdb-api-db_db-compact_post" title="5.5.&nbsp;POST /db/_compact">
 Starts a compaction for the database
 </a></td></tr><tr><td><code class="literal">POST</code></td><td><code class="literal">/db/_compact/design-doc</code></td><td><a class="link" href="#couchdb-api-db_db-compact-design-doc_post" title="5.6.&nbsp;POST /db/_compact/design-doc">
 Starts a compaction for all the views in the selected design
 document
 </a></td></tr><tr><td><code class="literal">POST</code></td><td><code class="literal">/db/_ensure_full_commit</code></td><td><a class="link" href="#couchdb-api-db_db-ensure-full-commit_post" title="5.8.&nbsp;POST /db/_ensure_full_commit">
 Makes sure all uncommitted changes are written and synchronized
 to the disk
 </a></td></tr><tr><td><code class="literal">POST</code></td><td><code class="literal">/db/_missing_revs</code></td><td><a class="link" href="#couchdb-api-db_db-missing-revs_post" title="5.14.&nbsp;POST /db/_missing_revs">
 Given a list of document revisions, returns the document
 revisions that do not exist in the database
 </a></td></tr><tr><td><code class="literal">POST</code></td><td><code class="literal">/db/_purge</code></td><td><a class="link" href="#couchdb-api-db_db-purge_post" title="5.11.&nbsp;POST /db/_purge">
 Purge some historical documents entirely from database history
 </a></td></tr><tr><td><code class="literal">POST</code></td><td><code class="literal">/db/_revs_diff</code></td><td><a class="link" href="#couchdb-api-db_db-revs-diff_post" title="5.15.&nbsp;POST /db/_revs_diff">
 Given a list of document revisions, returns differences between
 the given revisions and ones that are in the database
 </a></td></tr><tr><td><code class="literal">GET</code></td><td><code class="literal">/db/_revs_limit</code></td><td><a class="link" href="#couchdb-api-db_db-revs-limit_get" title="5.18.&nbsp;GET /db/_revs_limit">
 Gets the limit of historical revisions to store for a single
 document in the database
 </a></td></tr><tr><td><code class="literal">PUT</code></td><td><code class="literal">/db/_revs_limit</code></td><td><a class="link" href="#couchdb-api-db_db-revs-limit_put" title="5.19.&nbsp;PUT /db/_revs_limit">
 Sets the limit of historical revisions to store for a single
 document in the database
 </a></td></tr><tr><td><code class="literal">GET</code></td><td><code class="literal">/db/_security</code></td><td><a class="link" href="#couchdb-api-db_db-security_get" title="5.16.&nbsp;GET /db/_security">
 Returns the special security object for the database
 </a></td></tr><tr><td><code class="literal">PUT</code></td><td><code class="literal">/db/_security</code></td><td><a class="link" href="#couchdb-api-db_db-security_put" title="5.17.&nbsp;PUT /db/_security">
 Sets the special security object for the database
 </a></td></tr><tr><td><code class="literal">POST</code></td><td><code class="literal">/db/_temp_view</code></td><td><a class="link" href="#couchdb-api-db_db-temp-view_post" title="5.10.&nbsp;POST /db/_temp_view">
 Execute a given view function for all documents and return the
 result
 </a></td></tr><tr><td><code class="literal">POST</code></td><td><code class="literal">/db/_view_cleanup</code></td><td><a class="link" href="#couchdb-api-db_db-view-cleanup_post" title="5.7.&nbsp;POST /db/_view_cleanup">
 Removes view files that are not used by any design document
 </a></td></tr></tbody></table></div></div><br class="table-break"><p>
    For all the database methods, the database name within the URL path
    should be the database name that you wish to perform the operation
    on. For example, to obtain the meta information for the database
    <code class="literal">recipes</code>, you would use the HTTP request:
  </p><pre class="programlisting">GET /recipes</pre><p>
    For clarity, the form below is used in the URL paths:
  </p><pre class="programlisting">GET /db</pre><p>
    Where <code class="literal">db</code> is the name of any database.
  </p><div class="section" title="5.1.&nbsp;GET /db"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-db_db_get"></a>5.1.&nbsp;<code class="literal">GET /db</code></h2></div></div></div><div class="informaltable"><table summary="URL API GET /db" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">GET /db</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 None
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 Information about the database in JSON format
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">no</td></tr><tr><td colspan="3"><span class="bold"><strong>Return Codes</strong></span></td></tr><tr><td>404</td><td colspan="2">
 The requested content could not be found. The returned content
 will include further information, as a JSON object, if available.
 </td></tr></tbody></table></div><p>
      Gets information about the specified database. For example, to
      retrieve the information for the database
      <code class="literal">recipe</code>:
    </p><div class="formalcodebox"><div class="formalcodebox-title">HTTP Request</div><pre class="programlisting">GET http://couchdb:5984/recipes
Accept: application/json</pre></div><p>
      The JSON response contains meta information about the database. A
      sample of the JSON returned for an empty database is provided
      below:
    </p><div class="formalcodebox"><div class="formalcodebox-title">HTTP Response</div><pre class="programlisting">{
   "compact_running" : false,
   "committed_update_seq" : 375048,
   "disk_format_version" : 5,
   "disk_size" : 33153123,
   "doc_count" : 18386,
   "doc_del_count" : 0,
   "db_name" : "recipes",
   "instance_start_time" : "1290700340925570",
   "purge_seq" : 10,
   "update_seq" : 375048
}</pre></div><p>
      The elements of the returned structure are shown in the table
      below:
    </p><div class="table"><a name="table-couchdb-api-db-json-db-info"></a><p class="title"><b>Table&nbsp;5.2.&nbsp;
 CouchDB database information object
 </b></p><div class="table-contents"><table summary="
 CouchDB database information object
 " border="1"><colgroup><col class="item" width="30%"><col class="desc" width="70%"></colgroup><tbody><tr><td><span class="bold"><strong>Field</strong></span></td><td><span class="bold"><strong>Description</strong></span></td></tr><tr><td><code class="literal">committed_update_seq</code>  </td><td>
 The number of committed update.
 </td></tr><tr><td><code class="literal">compact_running</code>  </td><td>
 Set to true if the database compaction routine is operating on
 this database.
 </td></tr><tr><td><code class="literal">db_name</code>  </td><td>
 The name of the database.
 </td></tr><tr><td><code class="literal">disk_format_version</code>  </td><td>
 The version of the physical format used for the data when it is
 stored on disk.
 </td></tr><tr><td><code class="literal">disk_size</code>  </td><td>
 Size in bytes of the data as stored on the disk. Views indexes
 are not included in the calculation.
 </td></tr><tr><td><code class="literal">doc_count</code>  </td><td>
 A count of the documents in the specified database.
 </td></tr><tr><td><code class="literal">doc_del_count</code>  </td><td>
 Number of deleted documents
 </td></tr><tr><td><code class="literal">instance_start_time</code>  </td><td>
 Timestamp of when the database was created, expressed in
 milliseconds since the epoch.
 </td></tr><tr><td><code class="literal">purge_seq</code>  </td><td>
 The number of purge operations on the database.
 </td></tr><tr><td><code class="literal">update_seq</code>  </td><td>
 The current number of updates to the database.
 </td></tr></tbody></table></div></div><br class="table-break"></div><div class="section" title="5.2.&nbsp;PUT /db"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-db_db_put"></a>5.2.&nbsp;<code class="literal">PUT /db</code></h2></div></div></div><div class="informaltable"><table summary="URL API PUT /db" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">PUT /db</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 None
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 JSON success statement
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">no</td></tr><tr><td colspan="3"><span class="bold"><strong>Return Codes</strong></span></td></tr><tr><td>400</td><td colspan="2">
 Invalid database name
 </td></tr><tr><td>412</td><td colspan="2">
 Database already exists
 </td></tr></tbody></table></div><p>
      Creates a new database. The database name must be composed of one
      or more of the following characters:
    </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
          Lowercase characters (<code class="literal">a-z</code>)
        </p></li><li class="listitem"><p>
          Name must begin with a lowercase letter
        </p></li><li class="listitem"><p>
          Digits (<code class="literal">0-9</code>)
        </p></li><li class="listitem"><p>
          Any of the characters <code class="literal">_</code>,
          <code class="literal">$</code>, <code class="literal">(</code>,
          <code class="literal">)</code>, <code class="literal">+</code>,
          <code class="literal">-</code>, and <code class="literal">/</code>.
        </p></li></ul></div><p>
      Trying to create a database that does not meet these requirements
      will return an error quoting these restrictions.
    </p><p>
      To create the database <code class="literal">recipes</code>:
    </p><pre class="programlisting">PUT http://couchdb:5984/recipes
Content-Type: application/json</pre><p>
      The returned content contains the JSON status:
    </p><pre class="programlisting">{
   "ok" : true
}</pre><p>
      Anything should be treated as an error, and the problem should be
      taken form the HTTP response code.
    </p></div><div class="section" title="5.3.&nbsp;DELETE /db"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-db_db_delete"></a>5.3.&nbsp;<code class="literal">DELETE /db</code></h2></div></div></div><div class="informaltable"><table summary="URL API DELETE /db" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">DELETE /db</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 None
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 JSON success statement
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">no</td></tr><tr><td colspan="3"><span class="bold"><strong>Return Codes</strong></span></td></tr><tr><td>200</td><td colspan="2">
 Database has been deleted
 </td></tr><tr><td>404</td><td colspan="2">
 The requested content could not be found. The returned content
 will include further information, as a JSON object, if available.
 </td></tr></tbody></table></div><p>
      Deletes the specified database, and all the documents and
      attachments contained within it.
    </p><p>
      To delete the database <code class="literal">recipes</code> you would send
      the request:
    </p><pre class="programlisting">DELETE http://couchdb:5984/recipes
Content-Type: application/json</pre><p>
      If successful, the returned JSON will indicate success
    </p><pre class="programlisting">{
   "ok" : true
}</pre></div><div class="section" title="5.4.&nbsp;GET /db/_changes"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-db_db-changes_get"></a>5.4.&nbsp;<code class="literal">GET /db/_changes</code></h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#couchdb-api-db_db-changes_get-filters">5.4.1. Filtering</a></span></dt></dl></div><div class="informaltable"><table summary="URL API GET /db/_changes" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">GET /db/_changes</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 None
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 JSON of the changes to the database
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">no</td></tr><tr><td><span class="bold"><strong>Query Arguments</strong></span></td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">doc_ids</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Specify the list of documents IDs to be filtered
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>json</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Default</strong></span></td><td>none</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">feed</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Type of feed
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>string</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Default</strong></span></td><td>normal</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Supported Values</strong></span></td><td class="auto-generated">&nbsp;</td></tr><tr><td>&nbsp;</td><td><code class="literal">continuous</code></td><td>Continuous (non-polling) mode</td></tr><tr><td>&nbsp;</td><td><code class="literal">longpoll</code></td><td>Long polling mode</td></tr><tr><td>&nbsp;</td><td><code class="literal">normal</code></td><td>Normal mode</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">filter</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Filter function from a design document to get updates
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>string</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Default</strong></span></td><td>none</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Supported Values</strong></span></td><td class="auto-generated">&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">heartbeat</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Period after which an empty line is sent during longpoll or
 continuous
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>numeric</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Default</strong></span></td><td>60000</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Quantity</strong></span></td><td>milliseconds</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">include_docs</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Include the document with the result
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>boolean</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Default</strong></span></td><td>false</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">limit</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Maximum number of rows rows to return
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>numeric</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Default</strong></span></td><td>none</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">since</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Start the results from changes immediately after the
 specified sequence number
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>numeric</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Default</strong></span></td><td>0</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">timeout</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Maximum period to wait before the response is sent
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>numeric</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Default</strong></span></td><td>60000</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Quantity</strong></span></td><td>milliseconds</td></tr></tbody></table></div><p>
      Obtains a list of the changes made to the database. This can be
      used to monitor for update and modifications to the database for
      post processing or synchronization. There are three different
      types of supported changes feeds, poll, longpoll, and continuous.
      All requests are poll requests by default. You can select any feed
      type explicitly using the <code class="literal">feed</code> query argument.
    </p><p>
      </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
            <span class="bold"><strong>Poll</strong></span>
          </p><p>
            With polling you can request the changes that have occured
            since a specific sequence number. This returns the JSON
            structure containing the changed document information. When
            you perform a poll change request, only the changes since
            the specific sequence number are returned. For example, the
            query
          </p><pre class="programlisting">DELETE http://couchdb:5984/recipes/_changes
Content-Type: application/json</pre><p>
            Will get all of the changes in the database. You can request
            a starting point using the <code class="literal">since</code> query
            argument and specifying the sequence number. You will need
            to record the latest sequence number in your client and then
            use this when making another request as the new value to the
            <code class="literal">since</code> parameter.
          </p></li><li class="listitem"><p>
            <span class="bold"><strong>Longpoll</strong></span>
          </p><p>
            With long polling the request to the server will remain open
            until a change is made on the database, when the changes
            will be reported, and then the connection will close. The
            long poll is useful when you want to monitor for changes for
            a specific purpose without wanting to monitoring
            continuously for changes.
          </p><p>
            Because the wait for a change can be significant you can set
            a timeout before the connection is automatically closed (the
            <code class="literal">timeout</code> argument). You can also set a
            heartbeat interval (using the <code class="literal">heartbeat</code>
            query argument), which sends a newline to keep the
            connection open.
          </p></li><li class="listitem"><p>
            <span class="bold"><strong>Continuous</strong></span>
          </p><p>
            Continuous sends all new changes back to the client
            immediately, without closing the connection. In continuous
            mode the format of the changes is slightly different to
            accommodate the continuous nature while ensuring that the
            JSON output is still valid for each change notification.
          </p><p>
            As with the longpoll feed type you can set both the timeout
            and heartbeat intervals to ensure that the connection is
            kept open for new changesand updates.
          </p></li></ul></div><p>
    </p><p>
      The return structure for <code class="literal">normal</code> and
      <code class="literal">longpoll</code> modes is a JSON array of changes
      objects, and the last update sequence number. The structure is
      described in the following table.
    </p><div class="table"><a name="table-couchdb-api-db_db-json-changes"></a><p class="title"><b>Table&nbsp;5.3.&nbsp;
 Changes information for a database
 </b></p><div class="table-contents"><table summary="
 Changes information for a database
 " border="1"><colgroup><col class="item" width="30%"><col class="desc" width="70%"></colgroup><tbody><tr><td><span class="bold"><strong>Field</strong></span></td><td><span class="bold"><strong>Description</strong></span></td></tr><tr><td><code class="literal">last_seq</code>  </td><td>
 Last change sequence number
 </td></tr><tr><td><code class="literal">results</code> <code class="literal">[array]</code> </td><td>
 Changes made to a database
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">changes</code> <code class="literal">[array]</code> </td><td>
 List of changes, field-by-field, for this document
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">id</code>  </td><td>
 Document ID
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">seq</code>  </td><td>
 Update sequence number
 </td></tr></tbody></table></div></div><br class="table-break"><p>
      The return format for <code class="literal">continuous</code> mode the
      server sends a CRLF (carriage-return, linefeed) delimited line for
      each change. Each line contains the
      <a class="link" href="#table-couchdb-api-db_db-json-changes" title="Table&nbsp;5.3.&nbsp; Changes information for a database">JSON
      object</a>.
    </p><p>
      You can also request the full contents of each document change
      (instead of just the change notification) by using the
      <code class="literal">include_docs</code> parameter.
    </p><div class="section" title="5.4.1.&nbsp;Filtering"><div class="titlepage"><div><div><h3 class="title"><a name="couchdb-api-db_db-changes_get-filters"></a>5.4.1.&nbsp;Filtering</h3></div></div></div><p>
        You can filter the contents of the changes feed in a number of
        ways. The most basic way is to specify one or more document IDs
        to the query. This causes the returned structure value to only
        contain changes for the specified IDs. Note that the value of
        this query argument should be a JSON formatted array.
      </p><p>
        You can also filter the <code class="literal">_changes</code> feed by
        defining a filter function within a design document. The
        specification for the filter is the same as for replication
        filters. You specify the name of the filter function to the
        <code class="literal">filter</code> parameter, specifying the design
        document name and filter name. For example:
      </p><pre class="programlisting">GET /db/_changes?filter=design_doc/filtername</pre><p>
        The <code class="literal">_changes</code> feed can be used to watch
        changes to specific document ID's or the list of
        <code class="literal">_design</code> documents in a database. If the
        <code class="literal">filters</code> parameter is set to
        <code class="literal">_doc_ids</code> a list of doc IDs can be passed in
        the <code class="option">doc_ids</code> parameter as a JSON array.
      </p><p>
        For more information, see
        <a class="xref" href="#">???</a>.
      </p></div></div><div class="section" title="5.5.&nbsp;POST /db/_compact"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-db_db-compact_post"></a>5.5.&nbsp;<code class="literal">POST /db/_compact</code></h2></div></div></div><div class="informaltable"><table summary="URL API POST /db/_compact" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">POST /db/_compact</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 None
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 JSON success statement
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">no</td></tr><tr><td colspan="3"><span class="bold"><strong>Return Codes</strong></span></td></tr><tr><td>202</td><td colspan="2">
 Compaction request has been accepted
 </td></tr><tr><td>404</td><td colspan="2">
 The requested content could not be found. The returned content
 will include further information, as a JSON object, if available.
 </td></tr></tbody></table></div><p>
      Request compaction of the specified database. Compaction
      compresses the disk database file by performing the following
      operations:
    </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
          Writes a new version of the database file, removing any unused
          sections from the new version during write. Because a new file
          is temporary created for this purpose, you will need twice the
          current storage space of the specified database in order for
          the compaction routine to complete.
        </p></li><li class="listitem"><p>
          Removes old revisions of documents from the database, up to
          the per-database limit specified by the
          <code class="literal">_revs_limit</code> database parameter. See
          <a class="xref" href="#couchdb-api-db_db_get" title="5.1.&nbsp;GET /db">Section&nbsp;5.1, &ldquo;<code class="literal">GET /db</code>&rdquo;</a> .
        </p></li></ul></div><p>
      Compaction can only be requested on an individual database; you
      cannot compact all the databases for a CouchDB instance. The
      compaction process runs as a background process.
    </p><p>
      You can determine if the compaction process is operating on a
      database by obtaining the database meta information, the
      <code class="literal">compact_running</code> value of the returned database
      structure will be set to true. See
      <a class="xref" href="#couchdb-api-db_db_get" title="5.1.&nbsp;GET /db">Section&nbsp;5.1, &ldquo;<code class="literal">GET /db</code>&rdquo;</a> .
    </p><p>
      You can also obtain a list of running processes to determine
      whether compaction is currently running. See
      <a class="xref" href="#couchdb-api-misc_active-tasks_get" title="9.2.&nbsp;GET /_active_tasks">Section&nbsp;9.2, &ldquo;<code class="literal">GET /_active_tasks</code>&rdquo;</a>.
    </p></div><div class="section" title="5.6.&nbsp;POST /db/_compact/design-doc"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-db_db-compact-design-doc_post"></a>5.6.&nbsp;<code class="literal">POST /db/_compact/design-doc</code></h2></div></div></div><div class="informaltable"><table summary="URL API POST /db/_compact/design-doc" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">POST /db/_compact/design-doc</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 None
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 JSON success statement
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">yes</td></tr><tr><td colspan="3"><span class="bold"><strong>Return Codes</strong></span></td></tr><tr><td>202</td><td colspan="2">
 Compaction request has been accepted
 </td></tr><tr><td>404</td><td colspan="2">
 The requested content could not be found. The returned content
 will include further information, as a JSON object, if available.
 </td></tr></tbody></table></div><p>
      Compacts the view indexes associated with the specified design
      document. You can use this in place of the full database
      compaction if you know a specific set of view indexes have been
      affected by a recent database change.
    </p><p>
      For example, to compact the views associated with the
      <code class="literal">recipes</code> design document:
    </p><pre class="programlisting">POST http://couchdb:5984/recipes/_compact/recipes
Content-Type: application/json</pre><p>
      CouchDB will immediately return with a status indicating that the
      compaction request has been received (HTTP status code 202):
    </p><pre class="programlisting">{
   "ok" : true
}</pre></div><div class="section" title="5.7.&nbsp;POST /db/_view_cleanup"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-db_db-view-cleanup_post"></a>5.7.&nbsp;<code class="literal">POST /db/_view_cleanup</code></h2></div></div></div><div class="informaltable"><table summary="URL API POST /db/_view_cleanup" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">POST /db/_view_cleanup</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 None
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 JSON success statement
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">yes</td></tr></tbody></table></div><p>
      Cleans up the cached view output on disk for a given view. For
      example:
    </p><pre class="programlisting">POST http://couchdb:5984/recipes/_view_cleanup
Content-Type: application/json</pre><p>
      If the request is successful, a basic status message us returned:
    </p><pre class="programlisting">{
   "ok" : true
}</pre></div><div class="section" title="5.8.&nbsp;POST /db/_ensure_full_commit"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-db_db-ensure-full-commit_post"></a>5.8.&nbsp;<code class="literal">POST /db/_ensure_full_commit</code></h2></div></div></div><div class="informaltable"><table summary="URL API POST /db/_ensure_full_commit" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">POST /db/_ensure_full_commit</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 None
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 JSON success statement
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">no</td></tr><tr><td colspan="3"><span class="bold"><strong>Return Codes</strong></span></td></tr><tr><td>200</td><td colspan="2">
 Commit completed successfully
 </td></tr><tr><td>404</td><td colspan="2">
 The requested content could not be found. The returned content
 will include further information, as a JSON object, if available.
 </td></tr></tbody></table></div><p>
      Commits any recent changes to the specified database to disk. You
      should call this if you want to ensure that recent changes have
      been written. For example, to commit all the changes to disk for
      the database <code class="literal">recipes</code> you would use:
    </p><pre class="programlisting">POST http://couchdb:5984/recipes/_ensure_full_commit
Content-Type: application/json</pre><p>
      This returns a status message, containing the success message and
      the timestamp for when the CouchDB instance was started:
    </p><pre class="programlisting">{
  "ok" : true,
  "instance_start_time" : "1288186189373361"
}</pre></div><div class="section" title="5.9.&nbsp;POST /db/_bulk_docs"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-db_db-bulk-docs_post"></a>5.9.&nbsp;<code class="literal">POST /db/_bulk_docs</code></h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#couchdb-api-db_db-bulk-docs_post-insert">5.9.1. Inserting Documents in Bulk</a></span></dt><dt><span class="section"><a href="#couchdb-api-db_db-bulk-docs_post-update">5.9.2. Updating Documents in Bulk</a></span></dt><dt><span class="section"><a href="#couchdb-api-db_db-bulk-docs_post-commit">5.9.3. Bulk Documents Transaction Semantics</a></span></dt><dt><span class="section"><a href="#couchdb-api-db_db-bulk-docs_post-errors">5.9.4. Bulk Document Validation and Conflict Errors</a></span></dt></dl></div><div class="informaltable"><table summary="URL API POST /db/_bulk_docs" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">POST /db/_bulk_docs</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 JSON of the docs and updates to be applied
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 JSON of updated documents
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">no</td></tr><tr><td colspan="3"><span class="bold"><strong>Return Codes</strong></span></td></tr><tr><td>201</td><td colspan="2">
 Document(s) have been created or updated
 </td></tr></tbody></table></div><p>
      The bulk document API allows you to create and update multiple
      documents at the same time within a single request. The basic
      operation is similar to creating or updating a single document,
      except that you batch the document structure and information and .
      When creating new documents the document ID is optional. For
      updating existing documents, you must provide the document ID,
      revision information, and new document values.
    </p><p>
      For both inserts and updates the basic structure of the JSON is
      the same:
    </p><div class="table"><a name="table-couchdb-api-db_db-bulk-docs-json"></a><p class="title"><b>Table&nbsp;5.4.&nbsp;
 Bulk Documents
 </b></p><div class="table-contents"><table summary="
 Bulk Documents
 " border="1"><colgroup><col class="item" width="30%"><col class="desc" width="70%"></colgroup><tbody><tr><td><span class="bold"><strong>Field</strong></span></td><td><span class="bold"><strong>Description</strong></span></td></tr><tr><td><code class="literal">all_or_nothing</code> (optional) </td><td>
 Sets the database commit mode to use all-or-nothing semantics
 </td></tr><tr><td><code class="literal">docs</code> <code class="literal">[array]</code> </td><td>
 Bulk Documents Document
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">_id</code> (optional) </td><td>
 Document ID
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">_rev</code> (optional) </td><td>
 Revision ID (when updating an existing document)
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">_deleted</code> (optional) </td><td>
 Whether the document should be deleted
 </td></tr></tbody></table></div></div><br class="table-break"><div class="section" title="5.9.1.&nbsp;Inserting Documents in Bulk"><div class="titlepage"><div><div><h3 class="title"><a name="couchdb-api-db_db-bulk-docs_post-insert"></a>5.9.1.&nbsp;Inserting Documents in Bulk</h3></div></div></div><p>
        To insert documents in bulk into a database you need to supply a
        JSON structure with the array of documents that you want to add
        to the database. Using this method you can either include a
        document ID, or allow the document ID to be automatically
        generated.
      </p><p>
        For example, the following inserts three new documents, two with
        the supplied document IDs, and one which will have a document ID
        generated:
      </p><pre class="programlisting">{
   "docs" : [
      {
         "_id" : "FishStew",
         "servings" : 4,
         "subtitle" : "Delicious with fresh bread",
         "title" : "Fish Stew"
      },
      {
         "_id" : "LambStew",
         "servings" : 6,
         "subtitle" : "Delicious with scone topping",
         "title" : "Lamb Stew"
      },
      {
         "servings" : 8,
         "subtitle" : "Delicious with suet dumplings",
         "title" : "Beef Stew"
      },
   ]
}</pre><p>
        The return type from a bulk insertion will be 201, with the
        content of the returned structure indicating specific success or
        otherwise messages on a per-document basis.
      </p><p>
        The return structure from the example above contains a list of
        the documents created, here with the combination and their
        revision IDs:
      </p><pre class="programlisting">POST http://couchdb:5984/recipes/_bulk_docs
Content-Type: application/json

[
   {
      "id" : "FishStew",
      "rev" : "1-9c65296036141e575d32ba9c034dd3ee",
   },
   {
      "id" : "LambStew",
      "rev" : "1-34c318924a8f327223eed702ddfdc66d",
   },
   {
      "id" : "7f7638c86173eb440b8890839ff35433",
      "rev" : "1-857c7cbeb6c8dd1dd34a0c73e8da3c44",
   }
]</pre><p>
        The content and structure of the returned JSON will depend on
        the transaction semantics being used for the bulk update; see
        <a class="xref" href="#couchdb-api-db_db-bulk-docs_post-commit" title="5.9.3.&nbsp;Bulk Documents Transaction Semantics">Section&nbsp;5.9.3, &ldquo;Bulk Documents Transaction Semantics&rdquo;</a>
        for more information. Conflicts and validation errors when
        updating documents in bulk must be handled separately; see
        <a class="xref" href="#couchdb-api-db_db-bulk-docs_post-errors" title="5.9.4.&nbsp;Bulk Document Validation and Conflict Errors">Section&nbsp;5.9.4, &ldquo;Bulk Document Validation and Conflict Errors&rdquo;</a>.
      </p></div><div class="section" title="5.9.2.&nbsp;Updating Documents in Bulk"><div class="titlepage"><div><div><h3 class="title"><a name="couchdb-api-db_db-bulk-docs_post-update"></a>5.9.2.&nbsp;Updating Documents in Bulk</h3></div></div></div><p>
        The bulk document update procedure is similar to the insertion
        procedure, except that you must specify the document ID and
        current revision for every document in the bulk update JSON
        string.
      </p><p>
        For example, you could send the following request:
      </p><pre class="programlisting">POST http://couchdb:5984/recipes/_bulk_docs
Content-Type: application/json

{
   "docs" : [
      {
         "_id" : "FishStew",
         "_rev" : "1-9c65296036141e575d32ba9c034dd3ee",
         "servings" : 4,
         "subtitle" : "Delicious with freshly baked bread",
         "title" : "Fish Stew"
      },
      {
         "_id" : "LambStew",
         "_rev" : "1-34c318924a8f327223eed702ddfdc66d",
         "servings" : 6,
         "subtitle" : "Serve with a wholemeal scone topping",
         "title" : "Lamb Stew"
      },
      {
         "_id" : "7f7638c86173eb440b8890839ff35433"
         "_rev" : "1-857c7cbeb6c8dd1dd34a0c73e8da3c44",
         "servings" : 8,
         "subtitle" : "Hand-made dumplings make a great accompaniment",
         "title" : "Beef Stew"
      }
   ]
}</pre><p>
        The return structure is the JSON of the updated documents, with
        the new revision and ID information:
      </p><pre class="programlisting">[
   {
      "id" : "FishStew",
      "rev" : "2-e7af4c4e9981d960ecf78605d79b06d1"
   },
   {
      "id" : "LambStew",
      "rev" : "2-0786321986194c92dd3b57dfbfc741ce"
   },
   {
      "id" : "7f7638c86173eb440b8890839ff35433",
      "rev" : "2-bdd3bf3563bee516b96885a66c743f8e"
   }
]</pre><p>
        You can optionally delete documents during a bulk update by
        adding the <code class="literal">_deleted</code> field with a value of
        <code class="literal">true</code> to each docment ID/revision combination
        within the submitted JSON structure.
      </p><p>
        The return type from a bulk insertion will be 201, with the
        content of the returned structure indicating specific success or
        otherwise messages on a per-document basis.
      </p><p>
        The content and structure of the returned JSON will depend on
        the transaction semantics being used for the bulk update; see
        <a class="xref" href="#couchdb-api-db_db-bulk-docs_post-commit" title="5.9.3.&nbsp;Bulk Documents Transaction Semantics">Section&nbsp;5.9.3, &ldquo;Bulk Documents Transaction Semantics&rdquo;</a>
        for more information. Conflicts and validation errors when
        updating documents in bulk must be handled separately; see
        <a class="xref" href="#couchdb-api-db_db-bulk-docs_post-errors" title="5.9.4.&nbsp;Bulk Document Validation and Conflict Errors">Section&nbsp;5.9.4, &ldquo;Bulk Document Validation and Conflict Errors&rdquo;</a>.
      </p></div><div class="section" title="5.9.3.&nbsp;Bulk Documents Transaction Semantics"><div class="titlepage"><div><div><h3 class="title"><a name="couchdb-api-db_db-bulk-docs_post-commit"></a>5.9.3.&nbsp;Bulk Documents Transaction Semantics</h3></div></div></div><p>
        CouchDB supports two different modes for updating (or inserting)
        documents using the bulk documentation system. Each mode affects
        both the state of the documents in the event of system failure,
        and the level of conflict checking performed on each document.
        The two modes are:
      </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
            <code class="literal">non-atomic</code>
          </p><p>
            The default mode is non-atomic, that is, CouchDB will only
            guarantee that some of the documents will be saved when you
            send the request. The response will contain the list of
            documents successfully inserted or updated during the
            process. In the event of a crash, some of the documents may
            have been successfully saved, and some will have been lost.
          </p><p>
            In this mode, the response structure will indicate whether
            the document was updated by supplying the new
            <code class="literal">_rev</code> parameter indicating a new document
            revision was created. If the update failed, then you will
            get an <code class="literal">error</code> of type
            <code class="literal">conflict</code>. For example:
          </p><pre class="programlisting">[
   {
      "id" : "FishStew",
      "error" : "conflict",
      "reason" : "Document update conflict."
   },
   {
      "id" : "LambStew",
      "error" : "conflict",
      "reason" : "Document update conflict."
   },
   {
      "id" : "7f7638c86173eb440b8890839ff35433",
      "error" : "conflict",
      "reason" : "Document update conflict."
   }
]</pre><p>
            In this case no new revision has been created and you will
            need to submit the document update, with the correct
            revision tag, to update the document.
          </p></li><li class="listitem"><p>
            <code class="literal">all-or-nothing</code>
          </p><p>
            In all-or-nothing mode, either all documents are written to
            the database, or no documents are written to the database,
            in the event of a system failure during commit.
          </p><p>
            In addition, the per-document conflict checking is not
            performed. Instead a new revision of the document is
            created, even if the new revision is in conflict with the
            current revision in the database. The returned structure
            contains the list of documents with new revisions:
          </p><pre class="programlisting">[
   {
      "id" : "FishStew",
      "rev" : "2-e7af4c4e9981d960ecf78605d79b06d1"
   },
   {
      "id" : "LambStew",
      "rev" : "2-0786321986194c92dd3b57dfbfc741ce"
   },
   {
      "id" : "7f7638c86173eb440b8890839ff35433",
      "rev" : "2-bdd3bf3563bee516b96885a66c743f8e"
   }
]</pre><p>
            When updating documents using this mode the revision of a
            document included in views will be arbitrary. You can check
            the conflict status for a document by using the
            <code class="literal">conflicts=true</code> query argument when
            accessing the view. Conflicts should be handled individually
            to ensure the consistency of your database.
          </p><p>
            To use this mode, you must include the
            <code class="literal">all_or_nothing</code> field (set to true) within
            the main body of the JSON of the request.
          </p></li></ul></div><p>
        The effects of different database operations on the different
        modes are summarized in the table below:
      </p><div class="table"><a name="table-couchdb-api-db_db-bulk-docs_post-commit"></a><p class="title"><b>Table&nbsp;5.5.&nbsp;Conflicts on Bulk Inserts</b></p><div class="table-contents"><table summary="Conflicts on Bulk Inserts" border="1"><colgroup><col width="25%"><col width="25%"><col width="25%"><col width="25%"></colgroup><thead><tr><th>
                Transaction Mode
              </th><th>
                Transaction
              </th><th>
                Cause
              </th><th>
                Resolution
              </th></tr></thead><tbody><tr><td>
                Non-atomic
              </td><td>
                Insert
              </td><td>
                Requested document ID already exists
              </td><td>
                Resubmit with different document ID, or update the
                existing document
              </td></tr><tr><td>
                Non-atomic
              </td><td>
                Update
              </td><td>
                Revision missing or incorrect
              </td><td>
                Resubmit with correct revision
              </td></tr><tr><td>
                All-or-nothing
              </td><td>
                Insert
              </td><td>
                Additional revision inserted
              </td><td>
                Resolve conflicted revisions
              </td></tr><tr><td>
                All-or-nothing
              </td><td>
                Update
              </td><td>
                Additional revision inserted
              </td><td>
                Resolve conflicted revisions
              </td></tr></tbody></table></div></div><br class="table-break"><p>
        Replication of documents is independent of the type of insert or
        update. The documents and revisions created during a bulk insert
        or update are replicated in the same way as any other document.
        This can mean that if you make use of the all-or-nothing mode
        the exact list of documents, revisions (and their conflict
        state) may or may not be replicated to other databases
        correctly.
      </p></div><div class="section" title="5.9.4.&nbsp;Bulk Document Validation and Conflict Errors"><div class="titlepage"><div><div><h3 class="title"><a name="couchdb-api-db_db-bulk-docs_post-errors"></a>5.9.4.&nbsp;Bulk Document Validation and Conflict Errors</h3></div></div></div><p>
        The JSON returned by the <code class="literal">_bulk_docs</code> operation
        consists of an array of JSON structures, one for each document
        in the original submission. The returned JSON structure should
        be examined to ensure that all of the documents submitted in the
        original request were successfully added to the database.
      </p><p>
        The exact structure of the returned information is shown in
        <a class="xref" href="#table-couchdb-api-db_db-bulk-docs-return-json" title="Table&nbsp;5.6.&nbsp; Bulk Document Response">Table&nbsp;5.6, &ldquo;
 Bulk Document Response
 &rdquo;</a>.
      </p><div class="table"><a name="table-couchdb-api-db_db-bulk-docs-return-json"></a><p class="title"><b>Table&nbsp;5.6.&nbsp;
 Bulk Document Response
 </b></p><div class="table-contents"><table summary="
 Bulk Document Response
 " border="1"><colgroup><col class="item" width="30%"><col class="desc" width="70%"></colgroup><tbody><tr><td><span class="bold"><strong>Field</strong></span></td><td><span class="bold"><strong>Description</strong></span></td></tr><tr><td><code class="literal">docs</code> <code class="literal">[array]</code> </td><td>
 Bulk Docs Returned Documents
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">error</code>  </td><td>
 Error type
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">id</code>  </td><td>
 Document ID
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">reason</code>  </td><td>
 Error string with extended reason
 </td></tr></tbody></table></div></div><br class="table-break"><p>
        When a document (or document revision) is not correctly comitted
        to the database because of an error, you should check the
        <code class="literal">error</code> field to determine error type and
        course of action. Errors will be one of the following type:
      </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
            <code class="literal">conflict</code>
          </p><p>
            The document as submitted is in conflict. If you used the
            default bulk transaction mode then the new revision will not
            have been created and you will need to re-submit the
            document to the database. If you used
            <code class="literal">all-or-nothing</code> mode then you will need to
            manually resolve the conflicted revisions of the document.
          </p><p>
            Conflict resolution of documents added using the bulk docs
            interface is identical to the resolution procedures used
            when resolving conflict errors during replication.
          </p></li><li class="listitem"><p>
            <code class="literal">forbidden</code>
          </p><p>
            Entries with this error type indicate that the validation
            routine applied to the document during submission has
            returned an error.
          </p><p>
            For example, if your validation routine includes the
            following:
          </p><pre class="programlisting">throw({forbidden: 'invalid recipe ingredient'});</pre><p>
            The error returned will be:
          </p><pre class="programlisting">{
   "id" : "7f7638c86173eb440b8890839ff35433",
   "error" : "forbidden",
   "reason" : "invalid recipe ingredient"
}</pre><p>
            For more information, see
            <a class="xref" href="#">???</a>.
          </p></li></ul></div></div></div><div class="section" title="5.10.&nbsp;POST /db/_temp_view"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-db_db-temp-view_post"></a>5.10.&nbsp;<code class="literal">POST /db/_temp_view</code></h2></div></div></div><div class="informaltable"><table summary="URL API POST /db/_temp_view" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">POST /db/_temp_view</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 JSON with the temporary view definition
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 Temporary view result set
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">yes</td></tr></tbody></table></div><p>
      Creates (and executes) a temporary view based on the view function
      supplied in the JSON request. For example:
    </p><pre class="programlisting">POST http://couchdb:5984/recipes/_temp_view
Content-Type: application/json

{
   "map" : "function(doc) { if (doc.value &gt; 9995) { emit(null, doc.value); } }"
}</pre><p>
      The resulting JSON response is the result from the execution of
      the temporary view:
    </p><pre class="programlisting">{
   "total_rows" : 3,
   "rows" : [
      {
         "value" : 9998.41913029012,
         "id" : "05361cc6aa42033878acc1bacb1f39c2",
         "key" : null
      },
      {
         "value" : 9998.94149934853,
         "id" : "1f443f471e5929dd7b252417625ed170",
         "key" : null
      },
      {
         "value" : 9998.01511339154,
         "id" : "1f443f471e5929dd7b252417629c102b",
         "key" : null
      }
   ],
   "offset" : 0
}</pre><p>
      The arguments also available to standard view requests also apply
      to temporary views, but the execution of the view may take some
      time as it relies on being executed at the time of the request. In
      addition to the time taken, they are also computationally very
      expensive to produce. You should use a defined view if you want to
      achieve the best performance.
    </p><p>
      For more information, see
      <a class="xref" href="#">???</a>.
    </p></div><div class="section" title="5.11.&nbsp;POST /db/_purge"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-db_db-purge_post"></a>5.11.&nbsp;<code class="literal">POST /db/_purge</code></h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#couchdb-api-db_db-purge_post-indexrebuild">5.11.1. Updating Indexes</a></span></dt></dl></div><div class="informaltable"><table summary="URL API POST /db/_purge" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">POST /db/_purge</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 JSON of the document IDs/revisions to be purged
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 JSON structure with purged documents and purge sequence
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">no</td></tr></tbody></table></div><p>
      A database purge permanently removes the references to deleted
      documents from the database. Deleting a document within CouchDB
      does not actually remove the documen from the database, instead,
      the document is marked as a deleted (and a new revision is
      created). This is to ensure that deleted documents are replicated
      to other databases as having been deleted. This also means that
      you can check the status of a document and identify that the
      document has been deleted.
    </p><p>
      The purge operation removes the refernces to the deleted documents
      from the database. The purging of old documents is not replicated
      to other databases. If you are replicating between databases and
      have deleted a large number of documents you should run purge on
      each database.
    </p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        Purging documents does not remove the space used by them on
        disk. To reclaim disk space, you should run a database compact
        (see <a class="xref" href="#couchdb-api-db_db-compact_post" title="5.5.&nbsp;POST /db/_compact">Section&nbsp;5.5, &ldquo;<code class="literal">POST /db/_compact</code>&rdquo;</a>, and
        compact views (see
        <a class="xref" href="#couchdb-api-db_db-compact-design-doc_post" title="5.6.&nbsp;POST /db/_compact/design-doc">Section&nbsp;5.6, &ldquo;<code class="literal">POST /db/_compact/design-doc</code>&rdquo;</a>).
      </p></div><p>
      To perform a purge operation you must send a request including the
      JSON of the document IDs that you want to purge. For example:
    </p><pre class="programlisting">POST http://couchdb:5984/recipes/_purge
Content-Type: application/json

{
  "FishStew" : [
    "17-b3eb5ac6fbaef4428d712e66483dcb79"
    ]
}</pre><p>
      The format of the request must include the document ID and one or
      more revisions that must be purged.
    </p><p>
      The response will contain the purge sequence number, and a list of
      the document IDs and revisions successfully purged.
    </p><pre class="programlisting">{
   "purged" : {
      "FishStew" : [
         "17-b3eb5ac6fbaef4428d712e66483dcb79"
      ]
   },
   "purge_seq" : 11
}</pre><div class="section" title="5.11.1.&nbsp;Updating Indexes"><div class="titlepage"><div><div><h3 class="title"><a name="couchdb-api-db_db-purge_post-indexrebuild"></a>5.11.1.&nbsp;Updating Indexes</h3></div></div></div><p>
        The number of purges on a database is tracked using a purge
        sequence. This is used by the view indexer to optimize the
        updating of views that contain the purged documents.
      </p><p>
        When the indexer identifies that the purge sequence on a
        database has changed, it compares the purge sequence of the
        database with that stored in the view index. If the difference
        between the stored sequence and database is sequence is only 1,
        then the indexer uses a cached list of the most recently purged
        documents, and then removes these documents from the index
        individually. This prevents completely rebuilding the index from
        scratch.
      </p><p>
        If the difference between the stored sequence number and current
        database sequence is greater than 1, then the view index is
        entirely rebuilt. This is an expensive operation as every
        document in the database must be examined.
      </p></div></div><div class="section" title="5.12.&nbsp;GET /db/_all_docs"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-db_db-all-docs_get"></a>5.12.&nbsp;<code class="literal">GET /db/_all_docs</code></h2></div></div></div><div class="informaltable"><table summary="URL API GET /db/_all_docs" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">GET /db/_all_docs</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 None
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 JSON object containing document information, ordered by the
 document ID
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">no</td></tr><tr><td><span class="bold"><strong>Query Arguments</strong></span></td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">descending</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Return the documents in descending by key order
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>boolean</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Default</strong></span></td><td>false</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">endkey</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Stop returning records when the specified key is reached
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>string</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">endkey_docid</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Stop returning records when the specified document ID is
 reached
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>string</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">group</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Group the results using the reduce function to a group or
 single row
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>boolean</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Default</strong></span></td><td>false</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">group_level</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Specify the group level to be used
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>numeric</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">include_docs</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Include the full content of the documents in the return
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>boolean</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Default</strong></span></td><td>false</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">inclusive_end</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Specifies whether the specified end key should be included
 in the result
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>boolean</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Default</strong></span></td><td>true</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">key</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Return only documents that match the specified key
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>string</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">limit</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Limit the number of the returned documents to the specified
 number
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>numeric</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">reduce</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Use the reduction function
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>boolean</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Default</strong></span></td><td>true</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">skip</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Skip this number of records before starting to return the
 results
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>numeric</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Default</strong></span></td><td>0</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">stale</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Allow the results from a stale view to be used
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>string</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Default</strong></span></td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Supported Values</strong></span></td><td class="auto-generated">&nbsp;</td></tr><tr><td>&nbsp;</td><td><code class="literal">ok</code></td><td>Allow stale views</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">startkey</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Return records starting with the specified key
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>string</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">startkey_docid</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Return records starting with the specified document ID
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>string</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">update_seq</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Include the update sequence in the generated results
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>boolean</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Default</strong></span></td><td>false</td></tr></tbody></table></div><p>
      Returns a JSON structure of all of the documents in a given
      database. The information is returned as a JSON structure
      containing meta information about the return structure, and the
      list documents and basic contents, consisting the ID, revision and
      key. The key is generated from the document ID.
    </p><div class="table"><a name="table-couchdb-api-db_db-all-docs"></a><p class="title"><b>Table&nbsp;5.7.&nbsp;
 All Database Documents
 </b></p><div class="table-contents"><table summary="
 All Database Documents
 " border="1"><colgroup><col class="item" width="30%"><col class="desc" width="70%"></colgroup><tbody><tr><td><span class="bold"><strong>Field</strong></span></td><td><span class="bold"><strong>Description</strong></span></td></tr><tr><td><code class="literal">offset</code>  </td><td>
 Offset where the document list started
 </td></tr><tr><td><code class="literal">rows</code> <code class="literal">[array]</code> </td><td>
 Array of document object
 </td></tr><tr><td><code class="literal">total_rows</code>  </td><td>
 Number of documents in the database/view
 </td></tr><tr><td><code class="literal">update_seq</code> (optional) </td><td>
 Current update sequence for the database
 </td></tr></tbody></table></div></div><br class="table-break"><p>
      By default the information returned contains only the document ID
      and revision. For example, the request:
    </p><div class="formalcodebox"><div class="formalcodebox-title">HTTP Request</div><pre class="programlisting">GET http://couchdb:5984/recipes/_all_docs
Accept: application/json</pre></div><p>
      Returns the following structure:
    </p><div class="formalcodebox"><div class="formalcodebox-title">HTTP Response</div><pre class="programlisting">{
   "total_rows" : 18386,
   "rows" : [
      {
         "value" : {
            "rev" : "1-bc0d5aed1e339b1cc1f29578f3220a45"
         },
         "id" : "Aberffrawcake",
         "key" : "Aberffrawcake"
      },
      {
         "value" : {
            "rev" : "3-68a20c89a5e70357c20148f8e82ca331"
         },
         "id" : "Adukiandorangecasserole-microwave",
         "key" : "Adukiandorangecasserole-microwave"
      },
      {
         "value" : {
            "rev" : "3-9b2851ed9b6f655cc4eb087808406c60"
         },
         "id" : "Aioli-garlicmayonnaise",
         "key" : "Aioli-garlicmayonnaise"
      },
      ...
         ],
   "offset" : 0
}</pre></div><p>
      The information is returned in the form of a temporary view of all
      the database documents, with the returned key consisting of the ID
      of the document. The remainder of the interface is therefore
      identical to the View query arguments and their behavior.
    </p></div><div class="section" title="5.13.&nbsp;POST /db/_all_docs"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-db_db-all-docs_post"></a>5.13.&nbsp;<code class="literal">POST /db/_all_docs</code></h2></div></div></div><div class="informaltable"><table summary="URL API POST /db/_all_docs" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">POST /db/_all_docs</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 JSON of the document IDs you want included
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 JSON of the returned view
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">no</td></tr></tbody></table></div><p>
      The <code class="literal">POST</code> to <code class="literal">_all_docs</code> allows
      to specify multiple keys to be selected from the database. This
      enables you to request multiple documents in a single request, in
      place of multiple
      <a class="xref" href="#couchdb-api-dbdoc_db-doc_get" title="6.2.&nbsp;GET /db/doc">Section&nbsp;6.2, &ldquo;<code class="literal">GET /db/doc</code>&rdquo;</a> requests.
    </p><p>
      The request body should contain a list of the keys to be returned
      as an array to a <code class="literal">keys</code> object. For example:
    </p><div class="formalcodebox"><div class="formalcodebox-title">HTTP Request</div><pre class="programlisting">POST http://couchdb:5984/recipes/_all_docs
User-Agent: MyApp/0.1 libwww-perl/5.837

{
   "keys" : [
      "Zingylemontart",
      "Yogurtraita"
   ]
}</pre></div><p>
      The return JSON is the all documents structure, but with only the
      selected keys in the output:
    </p><div class="formalcodebox"><div class="formalcodebox-title">HTTP Response</div><pre class="programlisting">{
   "total_rows" : 2666,
   "rows" : [
      {
         "value" : {
            "rev" : "1-a3544d296de19e6f5b932ea77d886942"
         },
         "id" : "Zingylemontart",
         "key" : "Zingylemontart"
      },
      {
         "value" : {
            "rev" : "1-91635098bfe7d40197a1b98d7ee085fc"
         },
         "id" : "Yogurtraita",
         "key" : "Yogurtraita"
      }
   ],
   "offset" : 0
}</pre></div></div><div class="section" title="5.14.&nbsp;POST /db/_missing_revs"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-db_db-missing-revs_post"></a>5.14.&nbsp;<code class="literal">POST /db/_missing_revs</code></h2></div></div></div><div class="informaltable"><table summary="URL API POST /db/_missing_revs" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">POST /db/_missing_revs</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 JSON list of document revisions
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 JSON of missing revisions
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">no</td></tr></tbody></table></div></div><div class="section" title="5.15.&nbsp;POST /db/_revs_diff"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-db_db-revs-diff_post"></a>5.15.&nbsp;<code class="literal">POST /db/_revs_diff</code></h2></div></div></div><div class="informaltable"><table summary="URL API POST /db/_revs_diff" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">POST /db/_revs_diff</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 JSON list of document and revisions
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 JSON list of differences from supplied document/revision list
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">no</td></tr></tbody></table></div></div><div class="section" title="5.16.&nbsp;GET /db/_security"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-db_db-security_get"></a>5.16.&nbsp;<code class="literal">GET /db/_security</code></h2></div></div></div><div class="informaltable"><table summary="URL API GET /db/_security" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">GET /db/_security</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 None
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 JSON of the security object
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">no</td></tr></tbody></table></div><p>
      Gets the current secrity object from the specified database. The
      security object consists of two compulsory elements,
      <code class="literal">admins</code> and <code class="literal">readers</code>, which
      are used to specify the list of users and/or roles that have admin
      and reader rights to the database respectively. Any additional
      fields in the security object are optional. The entire security
      object is made available to validation and other internal
      functions so that the database can control and limit
      functionality.
    </p><p>
      To get the existing security object you would send the following
      request:
    </p><pre class="programlisting">{
   "admins" : {
      "roles" : [],
      "names" : [
         "mc",
         "slp"
      ]
   },
   "readers" : {
      "roles" : [],
      "names" : [
         "tim",
         "brian"
      ]
   }
}</pre><div class="table"><a name="table-couchdb-api-db-json-security"></a><p class="title"><b>Table&nbsp;5.8.&nbsp;
 Security Object
 </b></p><div class="table-contents"><table summary="
 Security Object
 " border="1"><colgroup><col class="item" width="30%"><col class="desc" width="70%"></colgroup><tbody><tr><td><span class="bold"><strong>Field</strong></span></td><td><span class="bold"><strong>Description</strong></span></td></tr><tr><td><code class="literal">admins</code>  </td><td>
 Roles/Users with admin privileges
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">roles</code> <code class="literal">[array]</code> </td><td>
 List of roles with parent privilege
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">users</code> <code class="literal">[array]</code> </td><td>
 List of users with parent privilege
 </td></tr><tr><td><code class="literal">readers</code>  </td><td>
 Roles/Users with reader privileges
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">roles</code> <code class="literal">[array]</code> </td><td>
 List of roles with parent privilege
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">users</code> <code class="literal">[array]</code> </td><td>
 List of users with parent privilege
 </td></tr></tbody></table></div></div><br class="table-break"><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        If the security object for a database has never beent set, then
        the value returned will be empty.
      </p></div></div><div class="section" title="5.17.&nbsp;PUT /db/_security"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-db_db-security_put"></a>5.17.&nbsp;<code class="literal">PUT /db/_security</code></h2></div></div></div><div class="informaltable"><table summary="URL API PUT /db/_security" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">PUT /db/_security</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 JSON specifying the admin and user security for the database
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 JSON status message
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">no</td></tr></tbody></table></div><p>
      Sets the security object for the given database.For example, to
      set the security object for the <code class="literal">recipes</code>
      database:
    </p><pre class="programlisting">PUT http://couchdb:5984/recipes/_security
Content-Type: application/json

{
   "admins" : {
      "roles" : [],
      "names" : [
         "mc",
         "slp"
      ]
   },
   "readers" : {
      "roles" : [],
      "names" : [
         "tim",
         "brian"
      ]
   }
}</pre><p>
      If the setting was successful, a JSON status object will be
      returned:
    </p><pre class="programlisting">{
   "ok" : true
}</pre></div><div class="section" title="5.18.&nbsp;GET /db/_revs_limit"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-db_db-revs-limit_get"></a>5.18.&nbsp;<code class="literal">GET /db/_revs_limit</code></h2></div></div></div><div class="informaltable"><table summary="URL API GET /db/_revs_limit" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">GET /db/_revs_limit</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 None
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 The current revision limit setting
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">no</td></tr></tbody></table></div><p>
      Gets the current <code class="literal">revs_limit</code> (revision limit)
      setting.
    </p><p>
      For example to get the current limit:
    </p><pre class="programlisting">GET http://couchdb:5984/recipes/_revs_limit
Content-Type: application/json</pre><p>
      The returned information is the current setting as a numerical
      scalar:
    </p><pre class="programlisting">1000</pre></div><div class="section" title="5.19.&nbsp;PUT /db/_revs_limit"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-db_db-revs-limit_put"></a>5.19.&nbsp;<code class="literal">PUT /db/_revs_limit</code></h2></div></div></div><div class="informaltable"><table summary="URL API PUT /db/_revs_limit" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">PUT /db/_revs_limit</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 A scalar integer of the revision limit setting
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 Confirmation of setting of the revision limit
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">no</td></tr></tbody></table></div><p>
      Sets the maximum number of document revisions that will be tracked
      by CouchDB, even after compaction has occurred. You can set the
      revision limit on a database by using <code class="literal">PUT</code> with
      a scalar integer of the limit that you want to set as the request
      body.
    </p><p>
      For example to set the revs limit to 100 for the
      <code class="literal">recipes</code> database:
    </p><pre class="programlisting">PUT http://couchdb:5984/recipes/_revs_limit
Content-Type: application/json

100</pre><p>
      If the setting was successful, a JSON status object will be
      returned:
    </p><pre class="programlisting">{
   "ok" : true
}</pre></div></div><div class="chapter" title="Chapter&nbsp;6.&nbsp;CouchDB API Server Document Methods"><div class="titlepage"><div><div><h2 class="title"><a name="couchdb-api-dbdoc"></a>Chapter&nbsp;6.&nbsp;CouchDB API Server Document Methods</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#couchdb-api-dbdoc_db_post">6.1. <code class="literal">POST /db</code></a></span></dt><dd><dl><dt><span class="section"><a href="#couchdb-api-dbdoc_db_post-docid">6.1.1. Specifying the Document ID</a></span></dt><dt><span class="section"><a href="#couchdb-api-dbdoc_db_batchmode">6.1.2. Batch Mode Writes</a></span></dt><dt><span class="section"><a href="#couchdb-api-dbdoc_db-doc-attachments">6.1.3. Including Attachments</a></span></dt></dl></dd><dt><span class="section"><a href="#couchdb-api-dbdoc_db-doc_get">6.2. <code class="literal">GET /db/doc</code></a></span></dt><dd><dl><dt><span class="section"><a href="#couchdb-api-dbdoc_db-doc_get-attachments">6.2.1. Attachments</a></span></dt><dt><span class="section"><a href="#couchdb-api-dbdoc_db-doc_get-revs">6.2.2. Getting a List of Revisions</a></span></dt><dt><span class="section"><a href="#couchdb-api-dbdoc_db-doc_get-revsextended">6.2.3. Obtaining an Extended Revision History</a></span></dt><dt><span class="section"><a href="#couchdb-api-dbdoc_db-doc_get-specrev">6.2.4. Obtaining a Specific Revision</a></span></dt></dl></dd><dt><span class="section"><a href="#couchdb-api-dbdoc_db-doc_head">6.3. <code class="literal">HEAD /db/doc</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-dbdoc_db-doc_put">6.4. <code class="literal">PUT /db/doc</code></a></span></dt><dd><dl><dt><span class="section"><a href="#couchdb-api-dbdoc_db-doc_put-update">6.4.1. Updating an Existing Document</a></span></dt></dl></dd><dt><span class="section"><a href="#couchdb-api-dbdoc_db-doc_delete">6.5. <code class="literal">DELETE /db/doc</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-dbdoc_db-doc_copy">6.6. <code class="literal">COPY /db/doc</code></a></span></dt><dd><dl><dt><span class="section"><a href="#couchdb-api-dbdoc_db-doc_copy-simple">6.6.1. Copying a Document</a></span></dt><dt><span class="section"><a href="#couchdb-api-dbdoc_db-doc_copy-specrev">6.6.2. Copying from a Specific Revision</a></span></dt><dt><span class="section"><a href="#couchdb-api-dbdoc_db-doc_copy-existing">6.6.3. Copying to an Existing Document</a></span></dt></dl></dd><dt><span class="section"><a href="#couchdb-api-dbdoc_db-doc-attachment_get">6.7. <code class="literal">GET /db/doc/attachment</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-dbdoc_db-doc-attachment_put">6.8. <code class="literal">PUT /db/doc/attachment</code></a></span></dt><dd><dl><dt><span class="section"><a href="#couchdb-api-dbdoc_db-doc-attachment_put-existing">6.8.1. Updating an Existing Attachment</a></span></dt></dl></dd><dt><span class="section"><a href="#couchdb-api-dbdoc_db-doc-attachment_delete">6.9. <code class="literal">DELETE /db/doc/attachment</code></a></span></dt></dl></div><p>
    The CouchDB API Server Document methods detail how to create, read,
    update and delete documents within a database.
  </p><p>
    A list of the available methods and URL paths are provided below:
  </p><div class="table"><a name="table-couchdb-api-dbdoc-summary"></a><p class="title"><b>Table&nbsp;6.1.&nbsp;Document API Calls</b></p><div class="table-contents"><table summary="Document API Calls" border="1"><colgroup><col class="method" width="33%"><col class="path" width="33%"><col class="desc" width="34%"></colgroup><thead><tr><th>Method</th><th>Path</th><th>Description</th></tr></thead><tbody><tr><td><code class="literal">POST</code></td><td><code class="literal">/db</code></td><td><a class="link" href="#couchdb-api-dbdoc_db_post" title="6.1.&nbsp;POST /db">
 Create a new document
 </a></td></tr><tr><td><code class="literal">GET</code></td><td><code class="literal">/db/doc</code></td><td><a class="link" href="#couchdb-api-dbdoc_db-doc_get" title="6.2.&nbsp;GET /db/doc">
 Returns the latest revision of the document
 </a></td></tr><tr><td><code class="literal">HEAD</code></td><td><code class="literal">/db/doc</code></td><td><a class="link" href="#couchdb-api-dbdoc_db-doc_head" title="6.3.&nbsp;HEAD /db/doc">
 Returns bare information in the HTTP Headers for the document
 </a></td></tr><tr><td><code class="literal">PUT</code></td><td><code class="literal">/db/doc</code></td><td><a class="link" href="#couchdb-api-dbdoc_db-doc_put" title="6.4.&nbsp;PUT /db/doc">
 Inserts a new document, or new version of an existing document
 </a></td></tr><tr><td><code class="literal">DELETE</code></td><td><code class="literal">/db/doc</code></td><td><a class="link" href="#couchdb-api-dbdoc_db-doc_delete" title="6.5.&nbsp;DELETE /db/doc">
 Deletes the document
 </a></td></tr><tr><td><code class="literal">COPY</code></td><td><code class="literal">/db/doc</code></td><td><a class="link" href="#couchdb-api-dbdoc_db-doc_copy" title="6.6.&nbsp;COPY /db/doc">
 Copies the document
 </a></td></tr><tr><td><code class="literal">GET</code></td><td><code class="literal">/db/doc/attachment</code></td><td><a class="link" href="#couchdb-api-dbdoc_db-doc-attachment_get" title="6.7.&nbsp;GET /db/doc/attachment">
 Gets the attachment of a document
 </a></td></tr><tr><td><code class="literal">PUT</code></td><td><code class="literal">/db/doc/attachment</code></td><td><a class="link" href="#couchdb-api-dbdoc_db-doc-attachment_put" title="6.8.&nbsp;PUT /db/doc/attachment">
 Adds an attachment of a document
 </a></td></tr><tr><td><code class="literal">DELETE</code></td><td><code class="literal">/db/doc/attachment</code></td><td><a class="link" href="#couchdb-api-dbdoc_db-doc-attachment_delete" title="6.9.&nbsp;DELETE /db/doc/attachment">
 Deletes an attachment of a document
 </a></td></tr></tbody></table></div></div><br class="table-break"><div class="section" title="6.1.&nbsp;POST /db"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-dbdoc_db_post"></a>6.1.&nbsp;<code class="literal">POST /db</code></h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#couchdb-api-dbdoc_db_post-docid">6.1.1. Specifying the Document ID</a></span></dt><dt><span class="section"><a href="#couchdb-api-dbdoc_db_batchmode">6.1.2. Batch Mode Writes</a></span></dt><dt><span class="section"><a href="#couchdb-api-dbdoc_db-doc-attachments">6.1.3. Including Attachments</a></span></dt></dl></div><div class="informaltable"><table summary="URL API POST /db" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">POST /db</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 JSON of the new document
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 JSON with the committed document information
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">no</td></tr><tr><td><span class="bold"><strong>Query Arguments</strong></span></td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">batch</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Allow document store request to be batched with others
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>string</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Supported Values</strong></span></td><td class="auto-generated">&nbsp;</td></tr><tr><td>&nbsp;</td><td><code class="literal">ok</code></td><td>Enable</td></tr><tr><td colspan="3"><span class="bold"><strong>Return Codes</strong></span></td></tr><tr><td>201</td><td colspan="2">
 Document has been created successfully
 </td></tr><tr><td>409</td><td colspan="2">
 Conflict - a document with the specified document ID already
 exists
 </td></tr></tbody></table></div><p>
      Create a new document in the specified database, using the
      supplied JSON document structure. If the JSON structure includes
      the <code class="literal">_id</code> field, then the document will be
      created with the specified document ID. If the
      <code class="literal">_id</code> field is not specified, a new unique ID
      will be generated.
    </p><p>
      For example, you can generate a new document with a generated UUID
      using the following request:
    </p><pre class="programlisting">POST http://couchdb:5984/recipes/
Content-Type: application/json

{
   "servings" : 4,
   "subtitle" : "Delicious with fresh bread",
   "title" : "Fish Stew"
}</pre><p>
      The return JSON will specify the automatically enerated ID and
      revision information:
    </p><pre class="programlisting">{
   "id" : "64575eef70ab90a2b8d55fc09e00440d",
   "ok" : true,
   "rev" : "1-9c65296036141e575d32ba9c034dd3ee"
}</pre><div class="section" title="6.1.1.&nbsp;Specifying the Document ID"><div class="titlepage"><div><div><h3 class="title"><a name="couchdb-api-dbdoc_db_post-docid"></a>6.1.1.&nbsp;Specifying the Document ID</h3></div></div></div><p>
        The document ID can be specified by including the
        <code class="literal">_id</code> field in the JSON of the submitted
        record. The following request will create the same document with
        the ID <code class="literal">FishStew</code>:
      </p><pre class="programlisting">POST http://couchdb:5984/recipes/
Content-Type: application/json

{
   "_id" : "FishStew",
   "servings" : 4,
   "subtitle" : "Delicious with fresh bread",
   "title" : "Fish Stew"
}</pre><p>
        The structure of the submitted document is as shown in the table
        below:
      </p><div class="table"><a name="table-couchdb-api-json-document"></a><p class="title"><b>Table&nbsp;6.2.&nbsp;
 CouchDB Document
 </b></p><div class="table-contents"><table summary="
 CouchDB Document
 " border="1"><colgroup><col class="item" width="30%"><col class="desc" width="70%"></colgroup><tbody><tr><td><span class="bold"><strong>Field</strong></span></td><td><span class="bold"><strong>Description</strong></span></td></tr><tr><td><code class="literal">_id</code> (optional) </td><td>
 Document ID
 </td></tr><tr><td><code class="literal">_rev</code> (optional) </td><td>
 Revision ID (when updating an existing document)
 </td></tr></tbody></table></div></div><br class="table-break"><p>
        In either case, the returned JSON will specify the document ID,
        revision ID, and status message:
      </p><pre class="programlisting">{
   "id" : "FishStew",
   "ok" : true,
   "rev" : "1-9c65296036141e575d32ba9c034dd3ee"
}</pre></div><div class="section" title="6.1.2.&nbsp;Batch Mode Writes"><div class="titlepage"><div><div><h3 class="title"><a name="couchdb-api-dbdoc_db_batchmode"></a>6.1.2.&nbsp;Batch Mode Writes</h3></div></div></div><p>
        You can write documents to the database at a higher rate by
        using the batch option. This collects document writes together
        in memory (on a user-by-user basis) before they are committed to
        disk. This increases the risk of the documents not being stored
        in the event of a failure, since the documents are not written
        to disk immediately.
      </p><p>
        To use the batched mode, append the <code class="literal">batch=ok</code>
        query argument to the URL of the <code class="literal">PUT</code> or
        <code class="literal">POST</code> request. The CouchDB server will respond
        with a 202 HTTP response code immediately.
      </p></div><div class="section" title="6.1.3.&nbsp;Including Attachments"><div class="titlepage"><div><div><h3 class="title"><a name="couchdb-api-dbdoc_db-doc-attachments"></a>6.1.3.&nbsp;Including Attachments</h3></div></div></div><p>
        You can include one or more attachments with a given document by
        incorporating the attachment information within the JSON of the
        document. This provides a simpler alternative to loading
        documents with attachments than making a separate call (see
        <a class="xref" href="#couchdb-api-dbdoc_db-doc-attachment_put" title="6.8.&nbsp;PUT /db/doc/attachment">Section&nbsp;6.8, &ldquo;<code class="literal">PUT /db/doc/attachment</code>&rdquo;</a>).
      </p><div class="table"><a name="table-couchdb-api-dbdoc-documentattachments"></a><p class="title"><b>Table&nbsp;6.3.&nbsp;
 Document with Attachments
 </b></p><div class="table-contents"><table summary="
 Document with Attachments
 " border="1"><colgroup><col class="item" width="30%"><col class="desc" width="70%"></colgroup><tbody><tr><td><span class="bold"><strong>Field</strong></span></td><td><span class="bold"><strong>Description</strong></span></td></tr><tr><td><code class="literal">_id</code> (optional) </td><td>
 Document ID
 </td></tr><tr><td><code class="literal">_rev</code> (optional) </td><td>
 Revision ID (when updating an existing document)
 </td></tr><tr><td><code class="literal">_attachments</code> (optional) </td><td>
 Document Attachment
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">filename</code>  </td><td>
 Attachment information
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">content_type</code>  </td><td>
 MIME Content type string
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">data</code>  </td><td>
 File attachment content, Base64 encoded
 </td></tr></tbody></table></div></div><br class="table-break"><p>
        The <code class="literal">filename</code> will be the attachment name. For
        example, when sending the JSON structure below:
      </p><pre class="programlisting">{
   "_id" : "FishStew",
   "servings" : 4,
   "subtitle" : "Delicious with fresh bread",
   "title" : "Fish Stew"
   "_attachments" : {
      "styling.css" : {
         "content-type" : "text/css",
         "data" : "cCB7IGZvbnQtc2l6ZTogMTJwdDsgfQo=",
         },
   },
}</pre><p>
        The attachment <code class="literal">styling.css</code> can be accessed
        using <code class="literal">/recipes/FishStew/styling.css</code>. For more
        information on attachments, see
        <a class="xref" href="#couchdb-api-dbdoc_db-doc-attachment_get" title="6.7.&nbsp;GET /db/doc/attachment">Section&nbsp;6.7, &ldquo;<code class="literal">GET /db/doc/attachment</code>&rdquo;</a>.
      </p><p>
        The document data embedded in to the structure must be encoded
        using base64.
      </p></div></div><div class="section" title="6.2.&nbsp;GET /db/doc"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-dbdoc_db-doc_get"></a>6.2.&nbsp;<code class="literal">GET /db/doc</code></h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#couchdb-api-dbdoc_db-doc_get-attachments">6.2.1. Attachments</a></span></dt><dt><span class="section"><a href="#couchdb-api-dbdoc_db-doc_get-revs">6.2.2. Getting a List of Revisions</a></span></dt><dt><span class="section"><a href="#couchdb-api-dbdoc_db-doc_get-revsextended">6.2.3. Obtaining an Extended Revision History</a></span></dt><dt><span class="section"><a href="#couchdb-api-dbdoc_db-doc_get-specrev">6.2.4. Obtaining a Specific Revision</a></span></dt></dl></div><div class="informaltable"><table summary="URL API GET /db/doc" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">GET /db/doc</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 None
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 Returns the JSON for the document
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">no</td></tr><tr><td><span class="bold"><strong>Query Arguments</strong></span></td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">conflicts</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Returns the conflict tree for the document.
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>boolean</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Default</strong></span></td><td>false</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Supported Values</strong></span></td><td class="auto-generated">&nbsp;</td></tr><tr><td>&nbsp;</td><td><code class="literal">true</code></td><td>Includes the revisions</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">rev</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Specify the revision to return
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>string</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Supported Values</strong></span></td><td class="auto-generated">&nbsp;</td></tr><tr><td>&nbsp;</td><td><code class="literal">true</code></td><td>Includes the revisions</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">revs</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Return a list of the revisions for the document
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>boolean</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">revs_info</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Return a list of detailed revision information for the
 document
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>boolean</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Supported Values</strong></span></td><td class="auto-generated">&nbsp;</td></tr><tr><td>&nbsp;</td><td><code class="literal">true</code></td><td>Includes the revisions</td></tr><tr><td colspan="3"><span class="bold"><strong>Return Codes</strong></span></td></tr><tr><td>201</td><td colspan="2">
 Document created
 </td></tr><tr><td>400</td><td colspan="2">
 The format of the request or revision was invalid
 </td></tr><tr><td>404</td><td colspan="2">
 The specified document or revision cannot be found, or has been
 deleted
 </td></tr><tr><td>409</td><td colspan="2">
 Conflict - a document with the specified document ID already
 exists
 </td></tr></tbody></table></div><p>
      Returns the specified <code class="literal">doc</code> from the specified
      <code class="literal">db</code>. For example, to retrieve the document with
      the id <code class="literal">FishStew</code> you would send the following
      request:
    </p><pre class="programlisting">GET http://couchdb:5984/recipes/FishStew
Content-Type: application/json
Accept: application/json</pre><p>
      The returned JSON is the JSON of the document, including the
      document ID and revision number:
    </p><pre class="programlisting">{
   "_id" : "FishStew",
   "_rev" : "3-a1a9b39ee3cc39181b796a69cb48521c",
   "servings" : 4,
   "subtitle" : "Delicious with a green salad",
   "title" : "Irish Fish Stew"
}</pre><p>
      Unless you request a specific revision, the latest revision of the
      document will always be returned.
    </p><div class="section" title="6.2.1.&nbsp;Attachments"><div class="titlepage"><div><div><h3 class="title"><a name="couchdb-api-dbdoc_db-doc_get-attachments"></a>6.2.1.&nbsp;Attachments</h3></div></div></div><p>
        If the document includes attachments, then the returned
        structure will contain a summary of the attachments associatd
        with the document, but not the attachment data itself.
      </p><p>
        The JSON for the returned document will include the
        <code class="literal">_attachments</code> field, with one or more
        attachment definitions. For example:
      </p><pre class="programlisting">{
   "_id" : "FishStew",
   "servings" : 4,
   "subtitle" : "Delicious with fresh bread",
   "title" : "Fish Stew"
   "_attachments" : {
      "styling.css" : {
         "stub" : true,
         "content-type" : "text/css",
         "length" : 783426,
         },
   },
}</pre><p>
        The format of the returned JSON is shown in the table below:
      </p><div class="table"><a name="table-couchdb-api-dbdoc-returneddocumentattachments"></a><p class="title"><b>Table&nbsp;6.4.&nbsp;
 Returned Document with Attachments
 </b></p><div class="table-contents"><table summary="
 Returned Document with Attachments
 " border="1"><colgroup><col class="item" width="30%"><col class="desc" width="70%"></colgroup><tbody><tr><td><span class="bold"><strong>Field</strong></span></td><td><span class="bold"><strong>Description</strong></span></td></tr><tr><td><code class="literal">_id</code> (optional) </td><td>
 Document ID
 </td></tr><tr><td><code class="literal">_rev</code> (optional) </td><td>
 Revision ID (when updating an existing document)
 </td></tr><tr><td><code class="literal">_attachments</code> (optional) </td><td>
 Document Attachment
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">filename</code>  </td><td>
 Attachment
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">content_type</code>  </td><td>
 MIME Content type string
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">length</code>  </td><td>
 Length (bytes) of the attachment data
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">revpos</code>  </td><td>
 Revision where this attachment exists
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">stub</code>  </td><td>
 Indicates whether the attachment is a stub
 </td></tr></tbody></table></div></div><br class="table-break"></div><div class="section" title="6.2.2.&nbsp;Getting a List of Revisions"><div class="titlepage"><div><div><h3 class="title"><a name="couchdb-api-dbdoc_db-doc_get-revs"></a>6.2.2.&nbsp;Getting a List of Revisions</h3></div></div></div><p>
        You can obtain a list of the revisions for a given document by
        adding the <code class="literal">revs=true</code> parameter to the request
        URL. For example:
      </p><pre class="programlisting">GET http://couchdb:5984/recipes/FishStew?revs=true
Accept: application/json</pre><p>
        The returned JSON structure includes the original document,
        including a <code class="literal">_revisions</code> structure that
        includes the revision information:
      </p><pre class="programlisting">{
   "servings" : 4,
   "subtitle" : "Delicious with a green salad",
   "_id" : "FishStew",
   "title" : "Irish Fish Stew",
   "_revisions" : {
      "ids" : [
         "a1a9b39ee3cc39181b796a69cb48521c",
         "7c4740b4dcf26683e941d6641c00c39d",
         "9c65296036141e575d32ba9c034dd3ee"
      ],
      "start" : 3
   },
   "_rev" : "3-a1a9b39ee3cc39181b796a69cb48521c"
}</pre><div class="table"><a name="table-couchdb-api-dbdoc-document_with_revs"></a><p class="title"><b>Table&nbsp;6.5.&nbsp;
 Returned CouchDB Document with Revision Info
 </b></p><div class="table-contents"><table summary="
 Returned CouchDB Document with Revision Info
 " border="1"><colgroup><col class="item" width="30%"><col class="desc" width="70%"></colgroup><tbody><tr><td><span class="bold"><strong>Field</strong></span></td><td><span class="bold"><strong>Description</strong></span></td></tr><tr><td><code class="literal">_id</code> (optional) </td><td>
 Document ID
 </td></tr><tr><td><code class="literal">_rev</code> (optional) </td><td>
 Revision ID (when updating an existing document)
 </td></tr><tr><td><code class="literal">_revisions</code>  </td><td>
 CouchDB Document Revisions
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">ids</code> <code class="literal">[array]</code> </td><td>
 Array of valid revision IDs, in reverse order (latest first)
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">start</code>  </td><td>
 Prefix number for the latest revision
 </td></tr></tbody></table></div></div><br class="table-break"></div><div class="section" title="6.2.3.&nbsp;Obtaining an Extended Revision History"><div class="titlepage"><div><div><h3 class="title"><a name="couchdb-api-dbdoc_db-doc_get-revsextended"></a>6.2.3.&nbsp;Obtaining an Extended Revision History</h3></div></div></div><p>
        You can get additional information about the revisions for a
        given document by supplying the <code class="literal">revs_info</code>
        argument to the query:
      </p><pre class="programlisting">GET http://couchdb:5984/recipes/FishStew?revs_info=true
Accept: application/json</pre><p>
        This returns extended revision information, including the
        availability and status of each revision:
      </p><pre class="programlisting">{
   "servings" : 4,
   "subtitle" : "Delicious with a green salad",
   "_id" : "FishStew",
   "_revs_info" : [
      {
         "status" : "available",
         "rev" : "3-a1a9b39ee3cc39181b796a69cb48521c"
      },
      {
         "status" : "available",
         "rev" : "2-7c4740b4dcf26683e941d6641c00c39d"
      },
      {
         "status" : "available",
         "rev" : "1-9c65296036141e575d32ba9c034dd3ee"
      }
   ],
   "title" : "Irish Fish Stew",
   "_rev" : "3-a1a9b39ee3cc39181b796a69cb48521c"
}</pre><div class="table"><a name="table-couchdb-api-dbdoc-document_with_revs_info"></a><p class="title"><b>Table&nbsp;6.6.&nbsp;
 Returned CouchDB Document with Detailed Revision Info
 </b></p><div class="table-contents"><table summary="
 Returned CouchDB Document with Detailed Revision Info
 " border="1"><colgroup><col class="item" width="30%"><col class="desc" width="70%"></colgroup><tbody><tr><td><span class="bold"><strong>Field</strong></span></td><td><span class="bold"><strong>Description</strong></span></td></tr><tr><td><code class="literal">_id</code> (optional) </td><td>
 Document ID
 </td></tr><tr><td><code class="literal">_rev</code> (optional) </td><td>
 Revision ID (when updating an existing document)
 </td></tr><tr><td><code class="literal">_revs_info</code> <code class="literal">[array]</code> </td><td>
 CouchDB Document Extended Revision Info
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">rev</code>  </td><td>
 Full revision string
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">status</code>  </td><td>
 Status of the revision
 </td></tr></tbody></table></div></div><br class="table-break"></div><div class="section" title="6.2.4.&nbsp;Obtaining a Specific Revision"><div class="titlepage"><div><div><h3 class="title"><a name="couchdb-api-dbdoc_db-doc_get-specrev"></a>6.2.4.&nbsp;Obtaining a Specific Revision</h3></div></div></div><p>
        To get a specific revision, use the <code class="literal">rev</code>
        argument to the request, and specify the full revision number:
      </p><pre class="programlisting">GET http://couchdb:5984/recipes/FishStew?rev=2-7c4740b4dcf26683e941d6641c00c39d
Accept: application/json</pre><p>
        The specified revision of the document will be returned,
        including a <code class="literal">_rev</code> field specifying the
        revision that was requested:
      </p><pre class="programlisting">{
   "_id" : "FishStew",
   "_rev" : "2-7c4740b4dcf26683e941d6641c00c39d",
   "servings" : 4,
   "subtitle" : "Delicious with a green salad",
   "title" : "Fish Stew"
}</pre></div></div><div class="section" title="6.3.&nbsp;HEAD /db/doc"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-dbdoc_db-doc_head"></a>6.3.&nbsp;<code class="literal">HEAD /db/doc</code></h2></div></div></div><div class="informaltable"><table summary="URL API HEAD /db/doc" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">HEAD /db/doc</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 None
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 None
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">no</td></tr><tr><td><span class="bold"><strong>Query Arguments</strong></span></td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">rev</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Specify the revision to return
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>string</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">revs</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Return a list of the revisions for the document
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>boolean</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">revs_info</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Return a list of detailed revision information for the
 document
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>boolean</td></tr><tr><td colspan="3"><span class="bold"><strong>Return Codes</strong></span></td></tr><tr><td>404</td><td colspan="2">
 The specified document or revision cannot be found, or has been
 deleted
 </td></tr></tbody></table></div><p>
      Returns the HTTP Headers containing a minimal amount of
      information about the specified document. The method supports the
      same query arguments as the <code class="literal">GET</code> method, but
      only the header information (including document size, and the
      revision as an ETag), is returned. For example, a simple
      <code class="literal">HEAD</code> request:
    </p><pre class="programlisting">HEAD http://couchdb:5984/recipes/FishStew
Content-Type: application/json</pre><p>
      Returns the following HTTP Headers:
    </p><pre class="programlisting">HTTP/1.1 200 OK
Server: CouchDB/1.0.1 (Erlang OTP/R13B)
Etag: "7-a19a1a5ecd946dad70e85233ba039ab2"
Date: Fri, 05 Nov 2010 14:54:43 GMT
Content-Type: text/plain;charset=utf-8
Content-Length: 136
Cache-Control: must-revalidate</pre><p>
      The <code class="literal">Etag</code> header shows the current revision for
      the requested document, and the <code class="literal">Content-Length</code>
      specifies the length of the data, if the document were requested
      in full.
    </p><p>
      Adding any of the query arguments (as supported by
      <a class="link" href="#couchdb-api-dbdoc_db-doc_get" title="6.2.&nbsp;GET /db/doc"><code class="literal">GET</code></a>
      method), then the resulting HTTP Headers will correspond to what
      would be returned. Note that the current revision is not returned
      when the <code class="literal">refs_info</code> argument is used. For
      example:
    </p><pre class="programlisting">HTTP/1.1 200 OK
Server: CouchDB/1.0.1 (Erlang OTP/R13B)
Date: Fri, 05 Nov 2010 14:57:16 GMT
Content-Type: text/plain;charset=utf-8
Content-Length: 609
Cache-Control: must-revalidate</pre></div><div class="section" title="6.4.&nbsp;PUT /db/doc"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-dbdoc_db-doc_put"></a>6.4.&nbsp;<code class="literal">PUT /db/doc</code></h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#couchdb-api-dbdoc_db-doc_put-update">6.4.1. Updating an Existing Document</a></span></dt></dl></div><div class="informaltable"><table summary="URL API PUT /db/doc" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">PUT /db/doc</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 JSON of the new document, or updated version of the existed
 document
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 JSON of the document ID and revision
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">no</td></tr><tr><td><span class="bold"><strong>Query Arguments</strong></span></td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">batch</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Allow document store request to be batched with others
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>string</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Supported Values</strong></span></td><td class="auto-generated">&nbsp;</td></tr><tr><td>&nbsp;</td><td><code class="literal">ok</code></td><td>Enable</td></tr><tr><td><span class="bold"><strong>HTTP Headers</strong></span></td><td><span class="bold"><strong>Header</strong></span></td><td><code class="literal">If-Match</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>Current revision of the document for validation</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td colspan="3"><span class="bold"><strong>Return Codes</strong></span></td></tr><tr><td>201</td><td colspan="2">
 Document has been created successfully
 </td></tr><tr><td>202</td><td colspan="2">
 Document accepted for writing (batch mode)
 </td></tr></tbody></table></div><p>
      The <code class="literal">PUT</code> method creates a new named document, or
      creates a new revision of the existing document. Unlike the
      <a class="link" href="#couchdb-api-dbdoc_db_post" title="6.1.&nbsp;POST /db"><code class="literal">POST</code></a>
      method, you must specify the document ID in the request URL.
    </p><p>
      For example, to create the docment <code class="literal">FishStew</code>,
      you would send the following request:
    </p><pre class="programlisting">PUT http://couchdb:5984/recipes/FishStew
Content-Type: application/json

{
  "servings" : 4,
  "subtitle" : "Delicious with fresh bread",
  "title" : "Fish Stew"
}</pre><p>
      The return type is JSON of the status, document ID,and revision
      number:
    </p><pre class="programlisting">{
   "id" : "FishStew",
   "ok" : true,
   "rev" : "1-9c65296036141e575d32ba9c034dd3ee"
}</pre><div class="section" title="6.4.1.&nbsp;Updating an Existing Document"><div class="titlepage"><div><div><h3 class="title"><a name="couchdb-api-dbdoc_db-doc_put-update"></a>6.4.1.&nbsp;Updating an Existing Document</h3></div></div></div><p>
        To update an existing document you must specify the current
        revision number within the <code class="literal">_rev</code> parameter.
        For example:
      </p><pre class="programlisting">PUT http://couchdb:5984/recipes/FishStew
Content-Type: application/json

{
  "_rev" : "1-9c65296036141e575d32ba9c034dd3ee",
  "servings" : 4,
  "subtitle" : "Delicious with fresh salad",
  "title" : "Fish Stew"
}</pre><p>
        Alternatively, you can supply the current revision number in the
        <code class="literal">If-Match</code> HTTP header of the request. For
        example:
      </p><pre class="programlisting">PUT http://couchdb:5984/recipes/FishStew
If-Match: 2-d953b18035b76f2a5b1d1d93f25d3aea
Content-Type: application/json

{
   "servings" : 4,
   "subtitle" : "Delicious with fresh salad",
   "title" : "Fish Stew"
}</pre><p>
        The JSON returned will include the updated revision number:
      </p><pre class="programlisting">{
   "id" : "FishStew99",
   "ok" : true,
   "rev" : "2-d953b18035b76f2a5b1d1d93f25d3aea"
}</pre><p>
        For information on batched writes, which can provide improved
        performance, see
        <a class="xref" href="#couchdb-api-dbdoc_db_batchmode" title="6.1.2.&nbsp;Batch Mode Writes">Section&nbsp;6.1.2, &ldquo;Batch Mode Writes&rdquo;</a>.
      </p></div></div><div class="section" title="6.5.&nbsp;DELETE /db/doc"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-dbdoc_db-doc_delete"></a>6.5.&nbsp;<code class="literal">DELETE /db/doc</code></h2></div></div></div><div class="informaltable"><table summary="URL API DELETE /db/doc" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">DELETE /db/doc</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 None
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 JSON of the deleted revision
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">no</td></tr><tr><td><span class="bold"><strong>Query Arguments</strong></span></td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">rev</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Current revision of the document for validation
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>string</td></tr><tr><td><span class="bold"><strong>HTTP Headers</strong></span></td><td><span class="bold"><strong>Header</strong></span></td><td><code class="literal">If-Match</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>Current revision of the document for validation</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td colspan="3"><span class="bold"><strong>Return Codes</strong></span></td></tr><tr><td>409</td><td colspan="2">
 Revision is missing, invalid or not the latest
 </td></tr></tbody></table></div><p>
      Deletes the specified document from the database. You must supply
      the current (latest) revision, either by using the
      <code class="literal">rev</code> parameter to specify the revision:
    </p><pre class="programlisting">DELETE http://couchdb:5984/recipes/FishStew?rev=3-a1a9b39ee3cc39181b796a69cb48521c
Content-Type: application/json</pre><p>
      Alternatively, you can use ETags with the
      <code class="literal">If-Match</code> field:
    </p><pre class="programlisting">DELETE http://couchdb:5984/recipes/FishStew
If-Match: 3-a1a9b39ee3cc39181b796a69cb48521c
Content-Type: application/json</pre><p>
      The returned JSON contains the document ID, revision and status:
    </p><pre class="programlisting">{
   "id" : "FishStew",
   "ok" : true,
   "rev" : "4-2719fd41187c60762ff584761b714cfb"
}</pre><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        Note that deletion of a record increments the revision number.
        The use of a revision for deletion of the record allows
        replication of the database to correctly track the deletion in
        synchronized copies.
      </p></div></div><div class="section" title="6.6.&nbsp;COPY /db/doc"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-dbdoc_db-doc_copy"></a>6.6.&nbsp;<code class="literal">COPY /db/doc</code></h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#couchdb-api-dbdoc_db-doc_copy-simple">6.6.1. Copying a Document</a></span></dt><dt><span class="section"><a href="#couchdb-api-dbdoc_db-doc_copy-specrev">6.6.2. Copying from a Specific Revision</a></span></dt><dt><span class="section"><a href="#couchdb-api-dbdoc_db-doc_copy-existing">6.6.3. Copying to an Existing Document</a></span></dt></dl></div><div class="informaltable"><table summary="URL API COPY /db/doc" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">COPY /db/doc</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 None
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 JSON of the new document and revision
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">no</td></tr><tr><td><span class="bold"><strong>Query Arguments</strong></span></td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">rev</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Revision to copy from
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>string</td></tr><tr><td><span class="bold"><strong>HTTP Headers</strong></span></td><td><span class="bold"><strong>Header</strong></span></td><td><code class="literal">Destination</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>Destination document (and optional revision)</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>no</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td colspan="3"><span class="bold"><strong>Return Codes</strong></span></td></tr><tr><td>201</td><td colspan="2">
 Document has been copied and created successfully
 </td></tr><tr><td>409</td><td colspan="2">
 Conflict (target document already exists)
 </td></tr></tbody></table></div><p>
      The <code class="literal">COPY</code> command (which is non-standard HTTP)
      copies an existing document to a new or existing document.
    </p><p>
      The source document is specified on the request line, with the
      <code class="literal">Destination</code> HTTP Header of the request
      specifying the target document.
    </p><div class="section" title="6.6.1.&nbsp;Copying a Document"><div class="titlepage"><div><div><h3 class="title"><a name="couchdb-api-dbdoc_db-doc_copy-simple"></a>6.6.1.&nbsp;Copying a Document</h3></div></div></div><p>
        You can copy the latest version of a document to a new document
        by specifying the current document and target document:
      </p><pre class="programlisting">COPY http://couchdb:5984/recipes/FishStew
Content-Type: application/json
Destination: IrishFishStew</pre><p>
        The above request copies the document
        <code class="literal">FishStew</code> to the new document
        <code class="literal">IrishFishStew</code>. The response is the ID and
        revision of the new document.
      </p><pre class="programlisting">{
   "id" : "IrishFishStew",
   "rev" : "1-9c65296036141e575d32ba9c034dd3ee"
}</pre></div><div class="section" title="6.6.2.&nbsp;Copying from a Specific Revision"><div class="titlepage"><div><div><h3 class="title"><a name="couchdb-api-dbdoc_db-doc_copy-specrev"></a>6.6.2.&nbsp;Copying from a Specific Revision</h3></div></div></div><p>
        To copy <span class="emphasis"><em>from</em></span> a specific version, use the
        <code class="literal">rev</code> argument to the query string:
      </p><pre class="programlisting">COPY http://couchdb:5984/recipes/FishStew?rev=5-acfd32d233f07cea4b4f37daaacc0082
Content-Type: application/json
Destination: IrishFishStew</pre><p>
        The new document will be created using the information in the
        specified revision of the source document.
      </p></div><div class="section" title="6.6.3.&nbsp;Copying to an Existing Document"><div class="titlepage"><div><div><h3 class="title"><a name="couchdb-api-dbdoc_db-doc_copy-existing"></a>6.6.3.&nbsp;Copying to an Existing Document</h3></div></div></div><p>
        To copy to an existing document, you must specify the current
        revision string for the target document, using the
        <code class="literal">rev</code> parameter to the
        <code class="literal">Destination</code> HTTP Header string. For example:
      </p><pre class="programlisting">COPY http://couchdb:5984/recipes/FishStew
Content-Type: application/json
Destination: IrishFishStew?rev=1-9c65296036141e575d32ba9c034dd3ee</pre><p>
        The return value will be the new revision of the copied
        document:
      </p><pre class="programlisting">{
   "id" : "IrishFishStew",
   "rev" : "2-55b6a1b251902a2c249b667dab1c6692"
}</pre></div></div><div class="section" title="6.7.&nbsp;GET /db/doc/attachment"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-dbdoc_db-doc-attachment_get"></a>6.7.&nbsp;<code class="literal">GET /db/doc/attachment</code></h2></div></div></div><div class="informaltable"><table summary="URL API GET /db/doc/attachment" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">GET /db/doc/attachment</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 None
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 Returns the document data
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">no</td></tr></tbody></table></div><p>
      Returns the file attachment <code class="literal">attachment</code>
      associated with the document <code class="literal">doc</code>. The raw data
      of the associated attachment is returned (just as if you were
      accessing a static file. The returned HTTP
      <code class="literal">Content-type</code> will be the same as the content
      type set when the document attachment was submitted into the
      database.
    </p></div><div class="section" title="6.8.&nbsp;PUT /db/doc/attachment"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-dbdoc_db-doc-attachment_put"></a>6.8.&nbsp;<code class="literal">PUT /db/doc/attachment</code></h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#couchdb-api-dbdoc_db-doc-attachment_put-existing">6.8.1. Updating an Existing Attachment</a></span></dt></dl></div><div class="informaltable"><table summary="URL API PUT /db/doc/attachment" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">PUT /db/doc/attachment</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 Raw document data
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 JSON document status
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">no</td></tr><tr><td><span class="bold"><strong>Query Arguments</strong></span></td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">rev</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Current document revision
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>no</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>string</td></tr><tr><td><span class="bold"><strong>HTTP Headers</strong></span></td><td><span class="bold"><strong>Header</strong></span></td><td><code class="literal">Content-Length</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>Length (bytes) of the attachment being uploaded</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>no</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Header</strong></span></td><td><code class="literal">Content-Type</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>MIME type for the uploaded attachment</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>no</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Header</strong></span></td><td><code class="literal">If-Match</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>Current revision of the document for validation</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td colspan="3"><span class="bold"><strong>Return Codes</strong></span></td></tr><tr><td>201</td><td colspan="2">
 Attachment has been accepted
 </td></tr></tbody></table></div><p>
      Upload the supplied content as an attachment to the specified
      document (<code class="literal">doc</code>). The
      <code class="literal">attachment</code> name provided must be a URL encoded
      string. You must also supply either the <code class="literal">rev</code>
      query argument or the <code class="literal">If-Match</code> HTTP header for
      validation, and the HTTP headers (to set the attacment content
      type). The content type is used when the attachment is requested
      as the corresponding content-type in the returned document header.
    </p><p>
      For example, you could upload a simple text document using the
      following request:
    </p><pre class="programlisting">PUT http://couchdb:5984/recipes/FishStew/basic?rev=8-a94cb7e50ded1e06f943be5bfbddf8ca
Content-Length: 10
Content-Type: text/plain

Roast it</pre><p>
      Or by using the <code class="literal">If-Match</code> HTTP header:
    </p><pre class="programlisting">PUT http://couchdb:5984/recipes/FishStew/basic
If-Match: 8-a94cb7e50ded1e06f943be5bfbddf8ca
Content-Length: 10
Content-Type: text/plain

Roast it</pre><p>
      The returned JSON contains the new document information:
    </p><pre class="programlisting">{
   "id" : "FishStew",
   "ok" : true,
   "rev" : "9-247bb19a41bfd9bfdaf5ee6e2e05be74"
}</pre><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        Uploading an attachment updates the corresponding document
        revision. Revisions are tracked for the parent document, not
        individual attachments.
      </p></div><div class="section" title="6.8.1.&nbsp;Updating an Existing Attachment"><div class="titlepage"><div><div><h3 class="title"><a name="couchdb-api-dbdoc_db-doc-attachment_put-existing"></a>6.8.1.&nbsp;Updating an Existing Attachment</h3></div></div></div><p>
        Uploading an attachment using an existing attachment name will
        update the corresponding stored content of the database. Since
        you must supply the revision information to add an attachment to
        a document, this serves as validation to update the existing
        attachment.
      </p></div></div><div class="section" title="6.9.&nbsp;DELETE /db/doc/attachment"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-dbdoc_db-doc-attachment_delete"></a>6.9.&nbsp;<code class="literal">DELETE /db/doc/attachment</code></h2></div></div></div><div class="informaltable"><table summary="URL API DELETE /db/doc/attachment" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">DELETE /db/doc/attachment</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 None
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 JSON status
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">no</td></tr><tr><td><span class="bold"><strong>Query Arguments</strong></span></td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">rev</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Revision of the document to be deleted
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>no</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>string</td></tr><tr><td><span class="bold"><strong>HTTP Headers</strong></span></td><td><span class="bold"><strong>Header</strong></span></td><td><code class="literal">If-Match</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>Current revision of the document for validation</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td colspan="3"><span class="bold"><strong>Return Codes</strong></span></td></tr><tr><td>200</td><td colspan="2">
 Attachment deleted successfully
 </td></tr><tr><td>409</td><td colspan="2">
 Supplied revision is incorrect or missing
 </td></tr></tbody></table></div><p>
      Deletes the attachment <code class="literal">attachment</code> to the
      specified <code class="literal">doc</code>. You must supply the
      <code class="literal">rev</code> argument with the current revision to
      delete the attachment.
    </p><p>
      For example to delete the attachment <code class="literal">basic</code> from
      the recipe <code class="literal">FishStew</code>:
    </p><pre class="programlisting">DELETE http://couchdb:5984/recipes/FishStew/basic?rev=9-247bb19a41bfd9bfdaf5ee6e2e05be74
Content-Type: application/json</pre><p>
      The returned JSON contains the updated revision information:
    </p><pre class="programlisting">{
   "id" : "FishStew",
   "ok" : true,
   "rev" : "10-561bf6b1e27615cee83d1f48fa65dd3e"
}</pre></div></div><div class="chapter" title="Chapter&nbsp;7.&nbsp;CouchDB API Server Local (non-replicating) Document Methods"><div class="titlepage"><div><div><h2 class="title"><a name="couchdb-api-localdb"></a>Chapter&nbsp;7.&nbsp;CouchDB API Server Local (non-replicating) Document Methods</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#couchdb-api-localdb_db-local-localdoc_get">7.1. <code class="literal">GET /db/_local/local-doc</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-localdb_db-local-localdoc_put">7.2. <code class="literal">PUT /db/_local/local-doc</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-localdb_db-local-localdoc_delete">7.3. <code class="literal">DELETE /db/_local/local-doc</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-localdb_db-local-localdoc_copy">7.4. <code class="literal">COPY /db/_local/local-doc</code></a></span></dt></dl></div><p>
    The Local (non-replicating) document interface allows you to create
    local documents that are not replicated to other databases. These
    documents can be used to hold configuration or other information
    that is required specifically on the local CouchDB instance.
  </p><p>
    Local documents have the following limitations:
  </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
        Local documents are not replicated to other databases.
      </p></li><li class="listitem"><p>
        The ID of the local document must be known for the document to
        accessed. You cannot obtain a list of local documents from the
        database.
      </p></li><li class="listitem"><p>
        Local documents are not output by views, or the
        <code class="literal">_all_docs</code> view.
      </p></li></ul></div><p>
    Local documents can be used when you want to store configuration or
    other information for the curent (local) instance of a given
    database.
  </p><p>
    A list of the available methods and URL paths are provided below:
  </p><div class="table"><a name="table-couchdb-api-localdb-summary"></a><p class="title"><b>Table&nbsp;7.1.&nbsp;Local (non-replicating) Document API
    Calls</b></p><div class="table-contents"><table summary="Local (non-replicating) Document API
    Calls" border="1"><colgroup><col class="method" width="33%"><col class="path" width="33%"><col class="desc" width="34%"></colgroup><thead><tr><th>Method</th><th>Path</th><th>Description</th></tr></thead><tbody><tr><td><code class="literal">GET</code></td><td><code class="literal">/db/_local/local-doc</code></td><td><a class="link" href="#couchdb-api-localdb_db-local-localdoc_get" title="7.1.&nbsp;GET /db/_local/local-doc">
 Returns the latest revision of the non-replicated document
 </a></td></tr><tr><td><code class="literal">PUT</code></td><td><code class="literal">/db/_local/local-doc</code></td><td><a class="link" href="#couchdb-api-localdb_db-local-localdoc_put" title="7.2.&nbsp;PUT /db/_local/local-doc">
 Inserts a new version of the non-replicated document
 </a></td></tr><tr><td><code class="literal">DELETE</code></td><td><code class="literal">/db/_local/local-doc</code></td><td><a class="link" href="#couchdb-api-localdb_db-local-localdoc_delete" title="7.3.&nbsp;DELETE /db/_local/local-doc">
 Deletes the non-replicated document
 </a></td></tr><tr><td><code class="literal">COPY</code></td><td><code class="literal">/db/_local/local-doc</code></td><td><a class="link" href="#couchdb-api-localdb_db-local-localdoc_copy" title="7.4.&nbsp;COPY /db/_local/local-doc">
 Copies the non-replicated document
 </a></td></tr></tbody></table></div></div><br class="table-break"><div class="section" title="7.1.&nbsp;GET /db/_local/local-doc"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-localdb_db-local-localdoc_get"></a>7.1.&nbsp;<code class="literal">GET /db/_local/local-doc</code></h2></div></div></div><div class="informaltable"><table summary="URL API GET /db/_local/local-doc" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">GET /db/_local/local-doc</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 None
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 JSON of the returned document
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">no</td></tr><tr><td><span class="bold"><strong>Query Arguments</strong></span></td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">rev</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Specify the revision to return
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>string</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Supported Values</strong></span></td><td class="auto-generated">&nbsp;</td></tr><tr><td>&nbsp;</td><td><code class="literal">true</code></td><td>Includes the revisions</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">revs</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Return a list of the revisions for the document
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>boolean</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">revs_info</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Return a list of detailed revision information for the
 document
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>boolean</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Supported Values</strong></span></td><td class="auto-generated">&nbsp;</td></tr><tr><td>&nbsp;</td><td><code class="literal">true</code></td><td>Includes the revisions</td></tr><tr><td colspan="3"><span class="bold"><strong>Return Codes</strong></span></td></tr><tr><td>400</td><td colspan="2">
 The format of the request or revision was invalid
 </td></tr><tr><td>404</td><td colspan="2">
 The specified document or revision cannot be found, or has been
 deleted
 </td></tr></tbody></table></div><p>
      Gets the specified local document. The semantics are identical to
      accessing a standard document in the specified database, except
      that the document is not replicated. See
      <a class="xref" href="#couchdb-api-dbdoc_db-doc_get" title="6.2.&nbsp;GET /db/doc">Section&nbsp;6.2, &ldquo;<code class="literal">GET /db/doc</code>&rdquo;</a>.
    </p></div><div class="section" title="7.2.&nbsp;PUT /db/_local/local-doc"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-localdb_db-local-localdoc_put"></a>7.2.&nbsp;<code class="literal">PUT /db/_local/local-doc</code></h2></div></div></div><div class="informaltable"><table summary="URL API PUT /db/_local/local-doc" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">PUT /db/_local/local-doc</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 JSON of the document
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 JSON with the committed document information
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">no</td></tr><tr><td colspan="3"><span class="bold"><strong>Return Codes</strong></span></td></tr><tr><td>201</td><td colspan="2">
 Document has been created successfully
 </td></tr></tbody></table></div><p>
      Stores the specified local document. The semantics are identical
      to storing a standard document in the specified database, except
      that the document is not replicated. See
      <a class="xref" href="#couchdb-api-dbdoc_db-doc_put" title="6.4.&nbsp;PUT /db/doc">Section&nbsp;6.4, &ldquo;<code class="literal">PUT /db/doc</code>&rdquo;</a>.
    </p></div><div class="section" title="7.3.&nbsp;DELETE /db/_local/local-doc"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-localdb_db-local-localdoc_delete"></a>7.3.&nbsp;<code class="literal">DELETE /db/_local/local-doc</code></h2></div></div></div><div class="informaltable"><table summary="URL API DELETE /db/_local/local-doc" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">DELETE /db/_local/local-doc</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 None
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 JSON with the deleted document information
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">no</td></tr><tr><td><span class="bold"><strong>Query Arguments</strong></span></td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">rev</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Current revision of the document for validation
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>string</td></tr><tr><td><span class="bold"><strong>HTTP Headers</strong></span></td><td><span class="bold"><strong>Header</strong></span></td><td><code class="literal">If-Match</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>Current revision of the document for validation</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td colspan="3"><span class="bold"><strong>Return Codes</strong></span></td></tr><tr><td>409</td><td colspan="2">
 Supplied revision is incorrect or missing
 </td></tr></tbody></table></div><p>
      Deletes the specified local document. The semantics are identical
      to deleting a standard document in the specified database, except
      that the document is not replicated. See
      <a class="xref" href="#couchdb-api-dbdoc_db-doc_delete" title="6.5.&nbsp;DELETE /db/doc">Section&nbsp;6.5, &ldquo;<code class="literal">DELETE /db/doc</code>&rdquo;</a>.
    </p></div><div class="section" title="7.4.&nbsp;COPY /db/_local/local-doc"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-localdb_db-local-localdoc_copy"></a>7.4.&nbsp;<code class="literal">COPY /db/_local/local-doc</code></h2></div></div></div><div class="informaltable"><table summary="URL API COPY /db/_local/local-doc" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">COPY /db/_local/local-doc</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 None
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 JSON of the copied document
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">no</td></tr><tr><td><span class="bold"><strong>Query Arguments</strong></span></td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">rev</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Revision to copy from
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>string</td></tr><tr><td><span class="bold"><strong>HTTP Headers</strong></span></td><td><span class="bold"><strong>Header</strong></span></td><td><code class="literal">Destination</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>Destination document (and optional revision)</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>no</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr></tbody></table></div><p>
      Copies the specified local document. The semantics are identical
      to copying a standard document in the specified database, except
      that the document is not replicated. See
      <a class="xref" href="#couchdb-api-dbdoc_db-doc_copy" title="6.6.&nbsp;COPY /db/doc">Section&nbsp;6.6, &ldquo;<code class="literal">COPY /db/doc</code>&rdquo;</a>.
    </p></div></div><div class="chapter" title="Chapter&nbsp;8.&nbsp;CouchDB API Server Design Document Methods"><div class="titlepage"><div><div><h2 class="title"><a name="couchdb-api-design"></a>Chapter&nbsp;8.&nbsp;CouchDB API Server Design Document Methods</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#couchdb-api-design_db-design-designdoc_get">8.1. <code class="literal">GET /db/_design/design-doc</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-design_db-design-designdoc_put">8.2. <code class="literal">PUT /db/_design/design-doc</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-design_db-design-designdoc_delete">8.3. <code class="literal">DELETE /db/_design/design-doc</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-design_db-design-designdoc_copy">8.4. <code class="literal">COPY /db/_design/design-doc</code></a></span></dt><dd><dl><dt><span class="section"><a href="#couchdb-api-design_db-design-designdoc_copy-simple">8.4.1. Copying a Design Document</a></span></dt><dt><span class="section"><a href="#couchdb-api-design_db-design-designdoc_copy-specrev">8.4.2. Copying from a Specific Revision</a></span></dt><dt><span class="section"><a href="#couchdb-api-design_db-design-designdoc_copy-existing">8.4.3. Copying to an Existing Design Document</a></span></dt></dl></dd><dt><span class="section"><a href="#couchdb-api-design_db-design-designdoc-attachment_get">8.5. <code class="literal">GET /db/_design/design-doc/attachment</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-design_db-design-designdoc-attachment_put">8.6. <code class="literal">PUT /db/_design/design-doc/attachment</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-design_db-design-designdoc-attachment_delete">8.7. <code class="literal">DELETE /db/_design/design-doc/attachment</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-design_db-design-designdoc-info_get">8.8. <code class="literal">GET /db/_design/design-doc/_info</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-design_db-design-designdoc-view-viewname_get">8.9. <code class="literal">GET /db/_design/design-doc/_view/view-name</code></a></span></dt><dd><dl><dt><span class="section"><a href="#couchdb-api-design_db-design-designdoc-view-viewname_get-indexes">8.9.1. Querying Views and Indexes</a></span></dt><dt><span class="section"><a href="#couchdb-api-design_db-design-designdoc-view-viewname_get-sorting">8.9.2. Sorting Returned Rows</a></span></dt><dt><span class="section"><a href="#couchdb-api-design_db-design-designdoc-view-viewname_get-ranges">8.9.3. Specifying Start and End Values</a></span></dt><dt><span class="section"><a href="#couchdb-api-design_db-design-designdoc-view-viewname_get-limit">8.9.4. Using Limits and Skipping Rows</a></span></dt><dt><span class="section"><a href="#couchdb-api-design_db-design-designdoc-view-viewname_get-reduction">8.9.5. View Reduction and Grouping</a></span></dt></dl></dd><dt><span class="section"><a href="#couchdb-api-design_db-design-designdoc-view-viewname_post">8.10. <code class="literal">POST /db/_design/design-doc/_view/view-name</code></a></span></dt><dd><dl><dt><span class="section"><a href="#couchdb-api-design_db-design-designdoc-view-viewname_post-multidoc">8.10.1. Multi-document Fetching</a></span></dt></dl></dd><dt><span class="section"><a href="#couchdb-api-design_db-design-designdoc-show-showname_get">8.11. <code class="literal">POST /db/_design/design-doc/_show/show-name</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-design_db-design-designdoc-show-showname-doc_get">8.12. <code class="literal">POST /db/_design/design-doc/_show/show-name/doc</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-design_db-design-designdoc-list-listname-otherdesigndoc-viewname_get">8.13. <code class="literal">GET
      /db/_design/design-doc/_list/list-name/other-design-doc/view-name</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-design_db-design-designdoc-list-listname-otherdesigndoc-viewname_post">8.14. <code class="literal">POST
      /db/_design/design-doc/_list/list-name/other-design-doc/view-name</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-design_db-design-designdoc-list-listname-viewname_get">8.15. <code class="literal">GET /db/_design/design-doc/_list/list-name/view-name</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-design_db-design-designdoc-list-listname-viewname_post">8.16. <code class="literal">POST /db/_design/design-doc/_list/list-name/view-name</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-design_db-design-designdoc-update-updatename-doc_put">8.17. <code class="literal">PUT /db/_design/design-doc/_update/updatename/doc</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-design_db-design-designdoc-update-updatename_post">8.18. <code class="literal">POST /db/_design/design-doc/_update/updatename</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-design_db-design-designdoc-rewrite-rewritename-anything">8.19. <code class="literal">ALL
      /db/_design/design-doc/_rewrite/rewrite-name/anything</code></a></span></dt></dl></div><p>
    In CouchDB, design documents provide the main interface for building
    a CouchDB application. The design document defines the views used to
    extract information from CouchDB through one or more views. Design
    documents are created within your CouchDB instance in the same way
    as you create database documents, but the content and definition of
    the documents is different. Design Documents are named using an ID
    defined with the design document URL path, and this URL can then be
    used to access the database contents.
  </p><p>
    Views and lists operate together to provide automated (and
    formatted) output from your database.
  </p><p>
    A list of the available methods and URL paths are provided below:
  </p><div class="table"><a name="table-couchdb-api-design-summary"></a><p class="title"><b>Table&nbsp;8.1.&nbsp;Design Document API Calls</b></p><div class="table-contents"><table summary="Design Document API Calls" border="1"><colgroup><col class="method" width="33%"><col class="path" width="33%"><col class="desc" width="34%"></colgroup><thead><tr><th>Method</th><th>Path</th><th>Description</th></tr></thead><tbody><tr><td><code class="literal">GET</code></td><td><code class="literal">/db/_design/design-doc</code></td><td><a class="link" href="#couchdb-api-design_db-design-designdoc_get" title="8.1.&nbsp;GET /db/_design/design-doc">
 Returns the latest revision of the design document
 </a></td></tr><tr><td><code class="literal">PUT</code></td><td><code class="literal">/db/_design/design-doc</code></td><td><a class="link" href="#couchdb-api-design_db-design-designdoc_put" title="8.2.&nbsp;PUT /db/_design/design-doc">
 Creates or updates a design document
 </a></td></tr><tr><td><code class="literal">DELETE</code></td><td><code class="literal">/db/_design/design-doc</code></td><td><a class="link" href="#couchdb-api-design_db-design-designdoc_delete" title="8.3.&nbsp;DELETE /db/_design/design-doc">
 Deletes the design document
 </a></td></tr><tr><td><code class="literal">COPY</code></td><td><code class="literal">/db/_design/design-doc</code></td><td><a class="link" href="#couchdb-api-design_db-design-designdoc_copy" title="8.4.&nbsp;COPY /db/_design/design-doc">
 Copies the design document
 </a></td></tr><tr><td><code class="literal">GET</code></td><td><code class="literal">/db/_design/design-doc/_info</code></td><td><a class="link" href="#couchdb-api-design_db-design-designdoc-info_get" title="8.8.&nbsp;GET /db/_design/design-doc/_info">
 Returns information about the design document
 </a></td></tr><tr><td><code class="literal">GET</code></td><td><code class="literal">/db/_design/design-doc/_list/list-name/other-design-doc/view-name</code></td><td><a class="link" href="#couchdb-api-design_db-design-designdoc-list-listname-otherdesigndoc-viewname_get" title="8.13.&nbsp;GET /db/_design/design-doc/_list/list-name/other-design-doc/view-name">
 Invokes the list handler to translate the given view results
 </a></td></tr><tr><td><code class="literal">POST</code></td><td><code class="literal">/db/_design/design-doc/_list/list-name/other-design-doc/view-name</code></td><td><a class="link" href="#couchdb-api-design_db-design-designdoc-list-listname-otherdesigndoc-viewname_post" title="8.14.&nbsp;POST /db/_design/design-doc/_list/list-name/other-design-doc/view-name">
 Invokes the list handler to translate the given view results for
 certain documents
 </a></td></tr><tr><td><code class="literal">GET</code></td><td><code class="literal">/db/_design/design-doc/_list/list-name/view-name</code></td><td><a class="link" href="#couchdb-api-design_db-design-designdoc-list-listname-viewname_get" title="8.15.&nbsp;GET /db/_design/design-doc/_list/list-name/view-name">
 Invokes the list handler to translate the given view results
 </a></td></tr><tr><td><code class="literal">POST</code></td><td><code class="literal">/db/_design/design-doc/_list/list-name/view-name</code></td><td><a class="link" href="#couchdb-api-design_db-design-designdoc-list-listname-viewname_post" title="8.16.&nbsp;POST /db/_design/design-doc/_list/list-name/view-name">
 Invokes the list handler to translate the given view results for
 certain documents
 </a></td></tr><tr><td><code class="literal">ALL</code></td><td><code class="literal">/db/_design/design-doc/_rewrite/rewrite-name/anything</code></td><td><a class="link" href="#">
 Invokes the URL rewrite handler and processes the request after
 rewriting
 </a></td></tr><tr><td><code class="literal">GET</code></td><td><code class="literal">/db/_design/design-doc/_show/show-name</code></td><td><a class="link" href="#couchdb-api-design_db-design-designdoc-show-showname_get" title="8.11.&nbsp;POST /db/_design/design-doc/_show/show-name">
 Invokes the show handler without a document
 </a></td></tr><tr><td><code class="literal">GET</code></td><td><code class="literal">/db/_design/design-doc/_show/show-name/doc</code></td><td><a class="link" href="#couchdb-api-design_db-design-designdoc-show-showname-doc_get" title="8.12.&nbsp;POST /db/_design/design-doc/_show/show-name/doc">
 Invokes the show handler for the given document
 </a></td></tr><tr><td><code class="literal">POST</code></td><td><code class="literal">/db/_design/design-doc/_update/update-name</code></td><td><a class="link" href="#couchdb-api-design_db-design-designdoc-update-updatename_post" title="8.18.&nbsp;POST /db/_design/design-doc/_update/updatename">
 Invokes the update handler without a document ID
 </a></td></tr><tr><td><code class="literal">PUT</code></td><td><code class="literal">/db/_design/design-doc/_update/update-name/doc</code></td><td><a class="link" href="#couchdb-api-design_db-design-designdoc-update-updatename-doc_put" title="8.17.&nbsp;PUT /db/_design/design-doc/_update/updatename/doc">
 Invokes the update handler with a specific document ID
 </a></td></tr><tr><td><code class="literal">GET</code></td><td><code class="literal">/db/_design/design-doc/_view/view-name</code></td><td><a class="link" href="#couchdb-api-design_db-design-designdoc-view-viewname_get" title="8.9.&nbsp;GET /db/_design/design-doc/_view/view-name">
 Returns results of the view
 </a></td></tr><tr><td><code class="literal">POST</code></td><td><code class="literal">/db/_design/design-doc/_view/view-name</code></td><td><a class="link" href="#couchdb-api-design_db-design-designdoc-view-viewname_post" title="8.10.&nbsp;POST /db/_design/design-doc/_view/view-name">
 Returns certain rows from the view
 </a></td></tr><tr><td><code class="literal">GET</code></td><td><code class="literal">/db/_design/design-doc/attachment</code></td><td><a class="link" href="#couchdb-api-design_db-design-designdoc-attachment_get" title="8.5.&nbsp;GET /db/_design/design-doc/attachment">
 Gets an attachment of the design document
 </a></td></tr><tr><td><code class="literal">PUT</code></td><td><code class="literal">/db/_design/design-doc/attachment</code></td><td><a class="link" href="#couchdb-api-design_db-design-designdoc-attachment_put" title="8.6.&nbsp;PUT /db/_design/design-doc/attachment">
 Inserts an attachment to the design document
 </a></td></tr><tr><td><code class="literal">DELETE</code></td><td><code class="literal">/db/_design/design-doc/attachment</code></td><td><a class="link" href="#couchdb-api-design_db-design-designdoc-attachment_delete" title="8.7.&nbsp;DELETE /db/_design/design-doc/attachment">
 Deletes an attachment from the design document
 </a></td></tr></tbody></table></div></div><br class="table-break"><div class="section" title="8.1.&nbsp;GET /db/_design/design-doc"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-design_db-design-designdoc_get"></a>8.1.&nbsp;<code class="literal">GET /db/_design/design-doc</code></h2></div></div></div><div class="informaltable"><table summary="URL API GET /db/_design/design-doc" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">GET /db/_design/design-doc</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 None
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 JSON of the existing design document
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">no</td></tr><tr><td><span class="bold"><strong>Query Arguments</strong></span></td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">rev</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Specify the revision to return
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>string</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">revs</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Return a list of the revisions for the document
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>boolean</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Supported Values</strong></span></td><td class="auto-generated">&nbsp;</td></tr><tr><td>&nbsp;</td><td><code class="literal">true</code></td><td>Includes the revisions</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">revs_info</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Return a list of detailed revision information for the
 document
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>boolean</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Supported Values</strong></span></td><td class="auto-generated">&nbsp;</td></tr><tr><td>&nbsp;</td><td><code class="literal">true</code></td><td>Includes the revisions</td></tr></tbody></table></div><p>
      Returns the specified design document,
      <code class="literal">design-doc</code> from the specified
      <code class="literal">db</code>. For example, to retrieve the design
      document <code class="literal">recipes</code> you would send the following
      request:
    </p><pre class="programlisting">GET http://couchdb:5984/recipes/_design/recipes
Content-Type: application/json</pre><p>
      The returned string will be the JSON of the design document:
    </p><pre class="programlisting">{
   "_id" : "_design/recipes",
   "_rev" : "5-39f56a392b86bbee57e2138921346406"
   "language" : "javascript",
   "views" : {
      "by_recipe" : {
         "map" : "function(doc) { if (doc.title != null) emit(doc.title, doc) }"
      },
   },
}</pre><p>
      A list of the revisions can be obtained by using the
      <code class="literal">revs</code> query argument, or an extended list of
      revisions using the <code class="literal">revs_info</code> query argument.
      This operates in the same way as for other documents. Fur further
      examples, see
      <a class="xref" href="#couchdb-api-dbdoc_db-doc_get" title="6.2.&nbsp;GET /db/doc">Section&nbsp;6.2, &ldquo;<code class="literal">GET /db/doc</code>&rdquo;</a>.
    </p></div><div class="section" title="8.2.&nbsp;PUT /db/_design/design-doc"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-design_db-design-designdoc_put"></a>8.2.&nbsp;<code class="literal">PUT /db/_design/design-doc</code></h2></div></div></div><div class="informaltable"><table summary="URL API PUT /db/_design/design-doc" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">PUT /db/_design/design-doc</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 JSON of the design document
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 JSON status
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">no</td></tr></tbody></table></div><p>
      Upload the specified design document,
      <code class="literal">design-doc</code>, to the specified database. The
      design document should follow the definition of a design document,
      as summarised in the following table.
    </p><div class="table"><a name="table-couchdb-api-json-designdoc"></a><p class="title"><b>Table&nbsp;8.2.&nbsp;
 Design Document
 </b></p><div class="table-contents"><table summary="
 Design Document
 " border="1"><colgroup><col class="item" width="30%"><col class="desc" width="70%"></colgroup><tbody><tr><td><span class="bold"><strong>Field</strong></span></td><td><span class="bold"><strong>Description</strong></span></td></tr><tr><td><code class="literal">_id</code>  </td><td>
 Design Document ID
 </td></tr><tr><td><code class="literal">_rev</code>  </td><td>
 Design Document Revision
 </td></tr><tr><td><code class="literal">views</code>  </td><td>
 View
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">viewname</code>  </td><td>
 View Definition
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">map</code>  </td><td>
 Map Function for View
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">reduce</code> (optional) </td><td>
 Reduce Function for View
 </td></tr></tbody></table></div></div><br class="table-break"><p>
      For more information on writing views, see
      <a class="xref" href="#">???</a>.
    </p></div><div class="section" title="8.3.&nbsp;DELETE /db/_design/design-doc"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-design_db-design-designdoc_delete"></a>8.3.&nbsp;<code class="literal">DELETE /db/_design/design-doc</code></h2></div></div></div><div class="informaltable"><table summary="URL API DELETE /db/_design/design-doc" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">DELETE /db/_design/design-doc</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 None
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 JSON of deleted design document
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">no</td></tr><tr><td><span class="bold"><strong>Query Arguments</strong></span></td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">rev</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Current revision of the document for validation
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>string</td></tr><tr><td><span class="bold"><strong>HTTP Headers</strong></span></td><td><span class="bold"><strong>Header</strong></span></td><td><code class="literal">If-Match</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>Current revision of the document for validation</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td colspan="3"><span class="bold"><strong>Return Codes</strong></span></td></tr><tr><td>409</td><td colspan="2">
 Supplied revision is incorrect or missing
 </td></tr></tbody></table></div><p>
      Delete an existing design document. Deleting a design document
      also deletes all of the associated view indexes, and recovers the
      corresponding space on disk for the indexes in question.
    </p><p>
      To delete, you must specify the current revision of the design
      document using the <code class="literal">rev</code> query argument.
    </p><p>
      For example:
    </p><pre class="programlisting">DELETE http://couchdb:5984/recipes/_design/recipes?rev=2-ac58d589b37d01c00f45a4418c5a15a8
Content-Type: application/json</pre><p>
      The response contains the delete document ID and revision:
    </p><pre class="programlisting">{
   "id" : "recipe/_design/recipes"
   "ok" : true,
   "rev" : "3-7a05370bff53186cb5d403f861aca154",
}</pre></div><div class="section" title="8.4.&nbsp;COPY /db/_design/design-doc"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-design_db-design-designdoc_copy"></a>8.4.&nbsp;<code class="literal">COPY /db/_design/design-doc</code></h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#couchdb-api-design_db-design-designdoc_copy-simple">8.4.1. Copying a Design Document</a></span></dt><dt><span class="section"><a href="#couchdb-api-design_db-design-designdoc_copy-specrev">8.4.2. Copying from a Specific Revision</a></span></dt><dt><span class="section"><a href="#couchdb-api-design_db-design-designdoc_copy-existing">8.4.3. Copying to an Existing Design Document</a></span></dt></dl></div><div class="informaltable"><table summary="URL API COPY /db/_design/design-doc" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">COPY /db/_design/design-doc</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 None
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 JSON of the copied document and revision
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">no</td></tr><tr><td><span class="bold"><strong>Query Arguments</strong></span></td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">rev</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Revision to copy from
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>string</td></tr><tr><td><span class="bold"><strong>HTTP Headers</strong></span></td><td><span class="bold"><strong>Header</strong></span></td><td><code class="literal">Destination</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>Destination document (and optional revision)</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>no</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr></tbody></table></div><p>
      The <code class="literal">COPY</code> command (non-standard HTTP) copies an
      existing design document to a new or existing document.
    </p><p>
      The source design document is specified on the request line, with
      the <code class="literal">Destination</code> HTTP Header of the request
      specifying the target document.
    </p><div class="section" title="8.4.1.&nbsp;Copying a Design Document"><div class="titlepage"><div><div><h3 class="title"><a name="couchdb-api-design_db-design-designdoc_copy-simple"></a>8.4.1.&nbsp;Copying a Design Document</h3></div></div></div><p>
        To copy the latest version of a design document to a new
        document you specify the base document and target document:
      </p><pre class="programlisting">COPY http://couchdb:5984/recipes/_design/recipes
Content-Type: application/json
Destination: /recipes/_design/recipelist</pre><p>
        The above request copies the design document
        <code class="literal">recipes</code> to the new design document
        <code class="literal">recipelist</code>. The response is the ID and
        revision of the new document.
      </p><pre class="programlisting">{
   "id" : "recipes/_design/recipelist"
   "rev" : "1-9c65296036141e575d32ba9c034dd3ee",
}</pre><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          Copying a design document does automatically reconstruct the
          view indexes. These will be recreated, as with other views,
          the first time the new view is accessed.
        </p></div></div><div class="section" title="8.4.2.&nbsp;Copying from a Specific Revision"><div class="titlepage"><div><div><h3 class="title"><a name="couchdb-api-design_db-design-designdoc_copy-specrev"></a>8.4.2.&nbsp;Copying from a Specific Revision</h3></div></div></div><p>
        To copy <span class="emphasis"><em>from</em></span> a specific version, use the
        <code class="literal">rev</code> argument to the query string:
      </p><pre class="programlisting">COPY http://couchdb:5984/recipes/_design/recipes?rev=1-e23b9e942c19e9fb10ff1fde2e50e0f5
Content-Type: application/json
Destination: recipes/_design/recipelist</pre><p>
        The new design document will be created using the specified
        revision of the source document.
      </p></div><div class="section" title="8.4.3.&nbsp;Copying to an Existing Design Document"><div class="titlepage"><div><div><h3 class="title"><a name="couchdb-api-design_db-design-designdoc_copy-existing"></a>8.4.3.&nbsp;Copying to an Existing Design Document</h3></div></div></div><p>
        To copy to an existing document, you must specify the current
        revision string for the target document, using the
        <code class="literal">rev</code> parameter to the
        <code class="literal">Destination</code> HTTP Header string. For example:
      </p><pre class="programlisting">COPY http://couchdb:5984/recipes/_design/recipes
Content-Type: application/json
Destination: recipes/_design/recipelist?rev=1-9c65296036141e575d32ba9c034dd3ee</pre><p>
        The return value will be the new revision of the copied
        document:
      </p><pre class="programlisting">{
   "id" : "recipes/_design/recipes"
   "rev" : "2-55b6a1b251902a2c249b667dab1c6692",
}</pre></div></div><div class="section" title="8.5.&nbsp;GET /db/_design/design-doc/attachment"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-design_db-design-designdoc-attachment_get"></a>8.5.&nbsp;<code class="literal">GET /db/_design/design-doc/attachment</code></h2></div></div></div><div class="informaltable"><table summary="URL API GET /db/_design/design-doc/attachment" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">GET /db/_design/design-doc/attachment</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 None
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 Document content
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">no</td></tr></tbody></table></div><p>
      Returns the file attachment <code class="literal">attachment</code>
      associated with the design document
      <code class="literal">/_design_/design-doc</code>. The raw data of the
      associated attachment is returned (just as if you were accessing a
      static file. The returned HTTP <code class="literal">Content-type</code>
      will be the same as the content type set when the document
      attachment was submitted into the database.
    </p></div><div class="section" title="8.6.&nbsp;PUT /db/_design/design-doc/attachment"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-design_db-design-designdoc-attachment_put"></a>8.6.&nbsp;<code class="literal">PUT /db/_design/design-doc/attachment</code></h2></div></div></div><div class="informaltable"><table summary="URL API PUT /db/_design/design-doc/attachment" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">PUT /db/_design/design-doc/attachment</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 JSON of the design document
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 JSON status statement
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">no</td></tr><tr><td><span class="bold"><strong>Query Arguments</strong></span></td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">rev</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Current revision of the document for validation
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>string</td></tr><tr><td><span class="bold"><strong>HTTP Headers</strong></span></td><td><span class="bold"><strong>Header</strong></span></td><td><code class="literal">If-Match</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>Current revision of the document for validation</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr></tbody></table></div><p>
      Upload the supplied content as an attachment to the specified
      design document (<code class="literal">/_design/design-doc</code>). The
      <code class="literal">attachment</code> name provided must be a URL encoded
      string. You must also supply either the <code class="literal">rev</code>
      query argument or the <code class="literal">If-Match</code> HTTP header for
      validation, and the HTTP headers (to set the attacment content
      type). The content type is used when the attachment is requested
      as the corresponding content-type in the returned document header.
    </p><p>
      For example, you could upload a simple text document using the
      following request:
    </p><pre class="programlisting">PUT http://couchdb:5984/recipes/_design/recipes/view.css?rev=7-f7114d4d81124b223283f3e89eee043e
Content-Length: 39
Content-Type: text/plain

div.recipetitle {
font-weight: bold;
}</pre><p>
      Or by using the <code class="literal">If-Match</code> HTTP header:
    </p><pre class="programlisting">PUT http://couchdb:5984/recipes/FishStew/basic
If-Match: 7-f7114d4d81124b223283f3e89eee043e
Content-Length: 39
Content-Type: text/plain

div.recipetitle {
font-weight: bold;
}</pre><p>
      The returned JSON contains the new document information:
    </p><pre class="programlisting">{
   "id" : "_design/recipes"
   "ok" : true,
   "rev" : "8-cb2b7d94eeac76782a02396ba70dfbf5",
}</pre><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        Uploading an attachment updates the corresponding document
        revision. Revisions are tracked for the parent document, not
        individual attachments.
      </p></div></div><div class="section" title="8.7.&nbsp;DELETE /db/_design/design-doc/attachment"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-design_db-design-designdoc-attachment_delete"></a>8.7.&nbsp;<code class="literal">DELETE /db/_design/design-doc/attachment</code></h2></div></div></div><div class="informaltable"><table summary="URL API DELETE /db/_design/design-doc/attachment" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">DELETE /db/_design/design-doc/attachment</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 None
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 JSON of the deleted revision
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">no</td></tr><tr><td><span class="bold"><strong>Query Arguments</strong></span></td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">rev</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Current revision of the document for validation
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>string</td></tr><tr><td><span class="bold"><strong>HTTP Headers</strong></span></td><td><span class="bold"><strong>Header</strong></span></td><td><code class="literal">If-Match</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>Current revision of the document for validation</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td colspan="3"><span class="bold"><strong>Return Codes</strong></span></td></tr><tr><td>409</td><td colspan="2">
 Supplied revision is incorrect or missing
 </td></tr></tbody></table></div><p>
      Deletes the attachment <code class="literal">attachment</code> to the
      specified <code class="literal">_design/design-doc</code>. You must supply
      the <code class="literal">rev</code> argument with the current revision to
      delete the attachment.
    </p><p>
      For example to delete the attachment <code class="literal">view.css</code>
      from the design document <code class="literal">recipes</code>:
    </p><pre class="programlisting">DELETE http://couchdb:5984/recipes/_design/recipes/view.css?rev=9-3db559f13a845c7751d407404cdeaa4a</pre><p>
      The returned JSON contains the updated revision information for
      the parent document:
    </p><pre class="programlisting">{
   "id" : "_design/recipes"
   "ok" : true,
   "rev" : "10-f3b15bb408961f8dcc3d86c7d3b54c4c",
}</pre></div><div class="section" title="8.8.&nbsp;GET /db/_design/design-doc/_info"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-design_db-design-designdoc-info_get"></a>8.8.&nbsp;<code class="literal">GET /db/_design/design-doc/_info</code></h2></div></div></div><div class="informaltable"><table summary="URL API GET /db/_design/design-doc/_info" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">GET /db/_design/design-doc/_info</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 None
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 JSON of the design document information
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">no</td></tr></tbody></table></div><p>
      Obtains information about a given design document, including the
      index, index size and current status of the design document and
      associated index information.
    </p><p>
      For example, to get the information for the
      <code class="literal">recipes</code> design document:
    </p><pre class="programlisting">GET http://couchdb:5984/recipes/_design/recipes/_info
Content-Type: application/json</pre><p>
      This returns the following JSON structure:
    </p><pre class="programlisting">{
   "name" : "recipes"
   "view_index" : {
      "compact_running" : false,
      "updater_running" : false,
      "language" : "javascript",
      "purge_seq" : 10,
      "waiting_commit" : false,
      "waiting_clients" : 0,
      "signature" : "fc65594ee76087a3b8c726caf5b40687",
      "update_seq" : 375031,
      "disk_size" : 16491
   },
}</pre><p>
      The individual fields in the returned JSON structure are detailed
      in
      <a class="xref" href="#table-couchdb-api-design_db-designdoc-info-json" title="Table&nbsp;8.3.&nbsp;Design Document Info JSON Contents">Table&nbsp;8.3, &ldquo;Design Document Info JSON Contents&rdquo;</a>.
    </p><div class="table"><a name="table-couchdb-api-design_db-designdoc-info-json"></a><p class="title"><b>Table&nbsp;8.3.&nbsp;Design Document Info JSON Contents</b></p><div class="table-contents"><table summary="Design Document Info JSON Contents" border="1"><colgroup><col class="item" width="30%"><col class="desc" width="70%"></colgroup><tbody><tr><td><span class="bold"><strong>Field</strong></span></td><td><span class="bold"><strong>Description</strong></span></td></tr><tr><td><code class="literal">name</code>  </td><td>
 Name/ID of Design Document
 </td></tr><tr><td><code class="literal">view_index</code>  </td><td>
 View Index
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">compact_running</code>  </td><td>
 Indicates whether a compaction routine is currently running on
 the view
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">disk_size</code>  </td><td>
 Size in bytes of the view as stored on disk
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">language</code>  </td><td>
 Language for the defined views
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">purge_seq</code>  </td><td>
 The purge sequence that has been processed
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">signature</code>  </td><td>
 MD5 signature of the views for the design document
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">update_seq</code>  </td><td>
 The update sequence of the corresponding database that has been
 indexed
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">updater_running</code>  </td><td>
 Indicates if the view is currently being updated
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">waiting_clients</code>  </td><td>
 Number of clients waiting on views from this design document
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">waiting_commit</code>  </td><td>
 Indicates if there are outstanding commits to the underlying
 database that need to processed
 </td></tr></tbody></table></div></div><br class="table-break"></div><div class="section" title="8.9.&nbsp;GET /db/_design/design-doc/_view/view-name"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-design_db-design-designdoc-view-viewname_get"></a>8.9.&nbsp;<code class="literal">GET /db/_design/design-doc/_view/view-name</code></h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#couchdb-api-design_db-design-designdoc-view-viewname_get-indexes">8.9.1. Querying Views and Indexes</a></span></dt><dt><span class="section"><a href="#couchdb-api-design_db-design-designdoc-view-viewname_get-sorting">8.9.2. Sorting Returned Rows</a></span></dt><dt><span class="section"><a href="#couchdb-api-design_db-design-designdoc-view-viewname_get-ranges">8.9.3. Specifying Start and End Values</a></span></dt><dt><span class="section"><a href="#couchdb-api-design_db-design-designdoc-view-viewname_get-limit">8.9.4. Using Limits and Skipping Rows</a></span></dt><dt><span class="section"><a href="#couchdb-api-design_db-design-designdoc-view-viewname_get-reduction">8.9.5. View Reduction and Grouping</a></span></dt></dl></div><div class="informaltable"><table summary="URL API GET /db/_design/design-doc/_view/view-name" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">GET /db/_design/design-doc/_view/view-name</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 None
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 JSON of the documents returned by the view
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">no</td></tr><tr><td><span class="bold"><strong>Query Arguments</strong></span></td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">descending</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Return the documents in descending by key order
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>boolean</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Default</strong></span></td><td>false</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">endkey</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Stop returning records when the specified key is reached
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>string</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">endkey_docid</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Stop returning records when the specified document ID is
 reached
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>string</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">group</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Group the results using the reduce function to a group or
 single row
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>boolean</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Default</strong></span></td><td>false</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">group_level</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Specify the group level to be used
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>numeric</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">include_docs</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Include the full content of the documents in the return
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>boolean</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Default</strong></span></td><td>false</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">inclusive_end</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Specifies whether the specified end key should be included
 in the result
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>boolean</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Default</strong></span></td><td>true</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">key</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Return only documents that match the specified key
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>string</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">limit</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Limit the number of the returned documents to the specified
 number
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>numeric</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">reduce</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Use the reduction function
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>boolean</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Default</strong></span></td><td>true</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">skip</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Skip this number of records before starting to return the
 results
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>numeric</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Default</strong></span></td><td>0</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">stale</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Allow the results from a stale view to be used
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>string</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Default</strong></span></td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Supported Values</strong></span></td><td class="auto-generated">&nbsp;</td></tr><tr><td>&nbsp;</td><td><code class="literal">ok</code></td><td>Allow stale views</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">startkey</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Return records starting with the specified key
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>string</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">startkey_docid</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Return records starting with the specified document ID
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>string</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">update_seq</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Include the update sequence in the generated results
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>boolean</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Default</strong></span></td><td>false</td></tr></tbody></table></div><p>
      Executes the specified <code class="literal">view-name</code> from the
      specified <code class="literal">design-doc</code> design document.
    </p><div class="section" title="8.9.1.&nbsp;Querying Views and Indexes"><div class="titlepage"><div><div><h3 class="title"><a name="couchdb-api-design_db-design-designdoc-view-viewname_get-indexes"></a>8.9.1.&nbsp;Querying Views and Indexes</h3></div></div></div><p>
        The definition of a view within a design document also creates
        an index based on the key information defined within each view.
        The production and use of the index significantly increases the
        speed of access and searching or selecting documents from the
        view.
      </p><p>
        However, the index is not updated when new documents are added
        or modified in the database. Instead, the index is generated or
        updated, either when the view is first accessed, or when the
        view is accessed after a document has been updated. In each
        case, the index is updated before the view query is executed
        against the database.
      </p><p>
        View indexes are updated incrementally in the following
        situations:
      </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
            A new document has been added to the database.
          </p></li><li class="listitem"><p>
            A document has been deleted from the database.
          </p></li><li class="listitem"><p>
            A document in the database has been updated.
          </p></li></ul></div><p>
        View indexes are rebuilt entirely when the view definition
        changes. To achieve this, a 'fingerprint' of the view definition
        is created when the design document is updated. If the
        fingerprint changes, then the view indexes are entirely rebuilt.
        This ensures that changes to the view definitions are reflected
        in the view indexes.
      </p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          View index rebuilds occur when one view from the same the view
          group (i.e. all the views defined within a single a design
          document) has been determined as needing a rebuild. For
          example, if if you have a design document with different
          views, and you update the database, all three view indexes
          within the design document will be updated.
        </p></div><p>
        Because the view is updated when it has been queried, it can
        result in a delay in returned information when the view is
        accessed, especially if there are a large number of documents in
        the database and the view index does not exist. There are a
        number of ways to mitigate, but not completely eliminate, these
        issues. These include:
      </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
            Create the view definition (and associated design documents)
            on your database before allowing insertion or updates to the
            documents. If this is allowed while the view is being
            accessed, the index can be updated incrementally.
          </p></li><li class="listitem"><p>
            Manually force a view request from the database. You can do
            this either before users are allowed to use the view, or you
            can access the view manually after documents are added or
            updated.
          </p></li><li class="listitem"><p>
            Use the <code class="literal">/db/_changes</code> method to monitor
            for changes to the database and then access the view to
            force the corresponding view index to be updated. See
            <a class="xref" href="#couchdb-api-db_db-changes_get" title="5.4.&nbsp;GET /db/_changes">Section&nbsp;5.4, &ldquo;<code class="literal">GET /db/_changes</code>&rdquo;</a>
            for more information.
          </p></li><li class="listitem"><p>
            Use a monitor with the
            <code class="literal">update_notification</code> section of the
            CouchDB configuration file to monitor for changes to your
            database, and trigger a view query to force the view to be
            updated. For more information, see
            <a class="xref" href="#couchdb-single-configuration-update_notification" title="12.5.&nbsp;Update Notifications">Section&nbsp;12.5, &ldquo;Update Notifications&rdquo;</a>.
          </p></li></ul></div><p>
        None of these can completely eliminate the need for the indexes
        to be rebuilt or updated when the view is accessed, but they may
        lessen the effects on end-users of the index update affecting
        the user experience.
      </p><p>
        Another alternative is to allow users to access a 'stale'
        version of the view index, rather than forcing the index to be
        updated and displaying the updated results. Using a stale view
        may not return the latest information, but will return the
        results of the view query using an existing version of the
        index.
      </p><p>
        For example, to access the existing stale view
        <code class="literal">by_recipe</code> in the <code class="literal">recipes</code>
        design document:
      </p><pre class="programlisting">http://couchdb:5984/recipes/_design/recipes/_view/by_recipe?stale=ok</pre><p>
        Accessing a stale view:
      </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
            Does not trigger a rebuild of the view indexes, even if
            there have been changes since the last access.
          </p></li><li class="listitem"><p>
            Returns the current version of the view index, if a current
            version exists.
          </p></li><li class="listitem"><p>
            Returns an empty result set if the given view index does
            exist.
          </p></li></ul></div><p>
        As an alternative, you use the <code class="literal">update_after</code>
        value to the <code class="option">stale</code> paramater. This causes the
        view to be returned as a stale view, but for the update process
        to be triggered after the view information has been returned to
        the client.
      </p><p>
        In addition to using stale views, you can also make use of the
        <code class="literal">update_seq</code> query argument. Using this query
        argument generates the view information including the update
        sequence of the database from which the view was generated. The
        returned value can be compared this to the current update
        sequence exposed in the database information (returned by
        <a class="xref" href="#couchdb-api-db_db_get" title="5.1.&nbsp;GET /db">Section&nbsp;5.1, &ldquo;<code class="literal">GET /db</code>&rdquo;</a>).
      </p></div><div class="section" title="8.9.2.&nbsp;Sorting Returned Rows"><div class="titlepage"><div><div><h3 class="title"><a name="couchdb-api-design_db-design-designdoc-view-viewname_get-sorting"></a>8.9.2.&nbsp;Sorting Returned Rows</h3></div></div></div><p>
        Each element within the returned array is sorted using native
        UTF-8 sorting according to the contents of the key portion of
        the emitted content. The basic order of output is as follows:
      </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
            <code class="literal">null</code>
          </p></li><li class="listitem"><p>
            <code class="literal">false</code>
          </p></li><li class="listitem"><p>
            <code class="literal">true</code>
          </p></li><li class="listitem"><p>
            Numbers
          </p></li><li class="listitem"><p>
            Text (case sensitive, lowercase first)
          </p></li><li class="listitem"><p>
            Arrays (according to the values of each element, in order)
          </p></li><li class="listitem"><p>
            Objects (according to the values of keys, in key order)
          </p></li></ul></div><p>
        You can reverse the order of the returned view information by
        using the <code class="literal">descending</code> query value set to true.
        For example, Retrieving the list of recipes using the
        <code class="literal">by_title</code> (limited to 5 records) view:
      </p><pre class="programlisting">{
   "offset" : 0,
   "rows" : [
      {
         "id" : "3-tiersalmonspinachandavocadoterrine",
         "key" : "3-tier salmon, spinach and avocado terrine",
         "value" : [
            null,
            "3-tier salmon, spinach and avocado terrine"
         ]
      },
      {
         "id" : "Aberffrawcake",
         "key" : "Aberffraw cake",
         "value" : [
            null,
            "Aberffraw cake"
         ]
      },
      {
         "id" : "Adukiandorangecasserole-microwave",
         "key" : "Aduki and orange casserole - microwave",
         "value" : [
            null,
            "Aduki and orange casserole - microwave"
         ]
      },
      {
         "id" : "Aioli-garlicmayonnaise",
         "key" : "Aioli - garlic mayonnaise",
         "value" : [
            null,
            "Aioli - garlic mayonnaise"
         ]
      },
      {
         "id" : "Alabamapeanutchicken",
         "key" : "Alabama peanut chicken",
         "value" : [
            null,
            "Alabama peanut chicken"
         ]
      }
   ],
   "total_rows" : 2667
}</pre><p>
        Requesting the same in descending order will reverse the entire
        view content. For example the request
      </p><pre class="programlisting">GET http://couchdb:5984/recipes/_design/recipes/_view/by_title?limit=5&amp;descending=true
Accept: application/json
Content-Type: application/json</pre><p>
        Returns the last 5 records from the view:
      </p><pre class="programlisting">{
   "offset" : 0,
   "rows" : [
      {
         "id" : "Zucchiniinagrodolcesweet-sourcourgettes",
         "key" : "Zucchini in agrodolce (sweet-sour courgettes)",
         "value" : [
            null,
            "Zucchini in agrodolce (sweet-sour courgettes)"
         ]
      },
      {
         "id" : "Zingylemontart",
         "key" : "Zingy lemon tart",
         "value" : [
            null,
            "Zingy lemon tart"
         ]
      },
      {
         "id" : "Zestyseafoodavocado",
         "key" : "Zesty seafood avocado",
         "value" : [
            null,
            "Zesty seafood avocado"
         ]
      },
      {
         "id" : "Zabaglione",
         "key" : "Zabaglione",
         "value" : [
            null,
            "Zabaglione"
         ]
      },
      {
         "id" : "Yogurtraita",
         "key" : "Yogurt raita",
         "value" : [
            null,
            "Yogurt raita"
         ]
      }
   ],
   "total_rows" : 2667
}</pre><p>
        The sorting direction is applied before the filtering applied
        using the <code class="literal">startkey</code> and
        <code class="literal">endkey</code> query arguments. For example the
        following query:
      </p><pre class="programlisting">GET http://couchdb:5984/recipes/_design/recipes/_view/by_ingredient?startkey=%22carrots%22&amp;endkey=%22egg%22
Accept: application/json
Content-Type: application/json</pre><p>
        Will operate correctly when listing all the matching entries
        between <span class="quote">&ldquo;<span class="quote">carrots</span>&rdquo;</span> and <code class="literal">egg</code>. If
        the order of output is reversed with the
        <code class="literal">descending</code> query argument, the view request
        will return no entries:
      </p><pre class="programlisting">GET http://couchdb:5984/recipes/_design/recipes/_view/by_ingredient?descending=true&amp;startkey=%22carrots%22&amp;endkey=%22egg%22
Accept: application/json
Content-Type: application/json</pre><p>
        The returned result is empty:
      </p><pre class="programlisting">{
   "total_rows" : 26453,
   "rows" : [],
   "offset" : 21882
}</pre><p>
        The results will be empty because the entries in the view are
        reversed before the key filter is applied, and therefore the
        <code class="literal">endkey</code> of <span class="quote">&ldquo;<span class="quote">egg</span>&rdquo;</span> will be seen
        before the <code class="literal">startkey</code> of
        <span class="quote">&ldquo;<span class="quote">carrots</span>&rdquo;</span>, resulting in an empty list.
      </p><p>
        Instead, you should reverse the values supplied to the
        <code class="literal">startkey</code> and <code class="literal">endkey</code>
        parameters to match the descending sorting applied to the keys.
        Changing the previous example to:
      </p><pre class="programlisting">GET http://couchdb:5984/recipes/_design/recipes/_view/by_ingredient?descending=true&amp;startkey=%22egg%22&amp;endkey=%22carrots%22
Accept: application/json
Content-Type: application/json</pre></div><div class="section" title="8.9.3.&nbsp;Specifying Start and End Values"><div class="titlepage"><div><div><h3 class="title"><a name="couchdb-api-design_db-design-designdoc-view-viewname_get-ranges"></a>8.9.3.&nbsp;Specifying Start and End Values</h3></div></div></div><p>
        The <code class="literal">startkey</code> and <code class="literal">endkey</code>
        query arguments can be used to specify the range of values to be
        displayed when querying the view.
      </p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          The values
        </p></div></div><div class="section" title="8.9.4.&nbsp;Using Limits and Skipping Rows"><div class="titlepage"><div><div><h3 class="title"><a name="couchdb-api-design_db-design-designdoc-view-viewname_get-limit"></a>8.9.4.&nbsp;Using Limits and Skipping Rows</h3></div></div></div><p>
        TBC
      </p></div><div class="section" title="8.9.5.&nbsp;View Reduction and Grouping"><div class="titlepage"><div><div><h3 class="title"><a name="couchdb-api-design_db-design-designdoc-view-viewname_get-reduction"></a>8.9.5.&nbsp;View Reduction and Grouping</h3></div></div></div><p>
        TBC
      </p></div></div><div class="section" title="8.10.&nbsp;POST /db/_design/design-doc/_view/view-name"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-design_db-design-designdoc-view-viewname_post"></a>8.10.&nbsp;<code class="literal">POST /db/_design/design-doc/_view/view-name</code></h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#couchdb-api-design_db-design-designdoc-view-viewname_post-multidoc">8.10.1. Multi-document Fetching</a></span></dt></dl></div><div class="informaltable"><table summary="URL API POST /db/_design/design-doc/_view/view-name" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">POST /db/_design/design-doc/_view/view-name</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 List of keys to be returned from specified view
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 JSON of the documents returned by the view
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">no</td></tr><tr><td><span class="bold"><strong>Query Arguments</strong></span></td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">descending</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Return the documents in descending by key order
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>boolean</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Default</strong></span></td><td>false</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">endkey</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Stop returning records when the specified key is reached
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>string</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">endkey_docid</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Stop returning records when the specified document ID is
 reached
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>string</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">group</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Group the results using the reduce function to a group or
 single row
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>boolean</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Default</strong></span></td><td>false</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">group_level</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Specify the group level to be used
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>numeric</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">include_docs</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Include the full content of the documents in the return
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>boolean</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Default</strong></span></td><td>false</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">inclusive_end</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Specifies whether the specified end key should be included
 in the result
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>boolean</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Default</strong></span></td><td>true</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">key</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Return only documents that match the specified key
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>string</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">limit</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Limit the number of the returned documents to the specified
 number
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>numeric</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">reduce</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Use the reduction function
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>boolean</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Default</strong></span></td><td>true</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">skip</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Skip this number of records before starting to return the
 results
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>numeric</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Default</strong></span></td><td>0</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">stale</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Allow the results from a stale view to be used
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>string</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Default</strong></span></td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Supported Values</strong></span></td><td class="auto-generated">&nbsp;</td></tr><tr><td>&nbsp;</td><td><code class="literal">ok</code></td><td>Allow stale views</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">startkey</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Return records starting with the specified key
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>string</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">startkey_docid</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Return records starting with the specified document ID
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>string</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">update_seq</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Include the update sequence in the generated results
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>boolean</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Default</strong></span></td><td>false</td></tr></tbody></table></div><p>
      Executes the specified <code class="literal">view-name</code> from the
      specified <code class="literal">design-doc</code> design document. Unlike
      the <code class="literal">GET</code> method for accessing views, the
      <code class="literal">POST</code> method supports the specification of
      explicit keys to be retrieved from the view results. The remainder
      of the <code class="literal">POST</code> view functionality is identical to
      the
      <a class="xref" href="#couchdb-api-design_db-design-designdoc-view-viewname_get" title="8.9.&nbsp;GET /db/_design/design-doc/_view/view-name">Section&nbsp;8.9, &ldquo;<code class="literal">GET /db/_design/design-doc/_view/view-name</code>&rdquo;</a>
      fun
    </p><p>
      For example, the request below will return all the recipes where
      the key for the view matches either <span class="quote">&ldquo;<span class="quote">claret</span>&rdquo;</span> or
      <span class="quote">&ldquo;<span class="quote">clear apple cider</span>&rdquo;</span> :
    </p><pre class="programlisting">POST http://couchdb:5984/recipes/_design/recipes/_view/by_ingredient
Content-Type: application/json

{
   "keys" : [
      "claret",
      "clear apple juice"
   ]
}</pre><p>
      The returned view data contains the standard view information, but
      only where the keys match.
    </p><pre class="programlisting">{
   "total_rows" : 26484,
   "rows" : [
      {
         "value" : [
            "Scotch collops"
         ],
         "id" : "Scotchcollops",
         "key" : "claret"
      },
      {
         "value" : [
            "Stand pie"
         ],
         "id" : "Standpie",
         "key" : "clear apple juice"
      }
   ],
   "offset" : 6324
}</pre><div class="section" title="8.10.1.&nbsp;Multi-document Fetching"><div class="titlepage"><div><div><h3 class="title"><a name="couchdb-api-design_db-design-designdoc-view-viewname_post-multidoc"></a>8.10.1.&nbsp;Multi-document Fetching</h3></div></div></div><p>
        By combining the <code class="literal">POST</code> method to a given view
        with the <code class="literal">include_docs=true</code> query argument you
        can obtain multiple documents from a database. The result is
        more efficient than using multiple
        <a class="xref" href="#couchdb-api-dbdoc_db-doc_get" title="6.2.&nbsp;GET /db/doc">Section&nbsp;6.2, &ldquo;<code class="literal">GET /db/doc</code>&rdquo;</a>
        requests.
      </p><p>
        For example, sending the following request for ingredients
        matching <span class="quote">&ldquo;<span class="quote">claret</span>&rdquo;</span> and <span class="quote">&ldquo;<span class="quote">clear apple
        juice</span>&rdquo;</span>:
      </p><pre class="programlisting">POST http://couchdb:5984/recipes/_design/recipes/_view/by_ingredient?include_docs=true
Content-Type: application/json

{
   "keys" : [
      "claret",
      "clear apple juice"
   ]
}</pre><p>
        Returns the full document for each recipe:
      </p><pre class="programlisting">{
   "offset" : 6324,
   "rows" : [
      {
         "doc" : {
            "_id" : "Scotchcollops",
            "_rev" : "1-bcbdf724f8544c89697a1cbc4b9f0178",
            "cooktime" : "8",
            "ingredients" : [
               {
                  "ingredient" : "onion",
                  "ingredtext" : "onion, peeled and chopped",
                  "meastext" : "1"
               },
            ...
            ],
            "keywords" : [
               "cook method.hob, oven, grill@hob",
               "diet@wheat-free",
               "diet@peanut-free",
               "special collections@classic recipe",
               "cuisine@british traditional",
               "diet@corn-free",
               "diet@citrus-free",
               "special collections@very easy",
               "diet@shellfish-free",
               "main ingredient@meat",
               "occasion@christmas",
               "meal type@main",
               "diet@egg-free",
               "diet@gluten-free"
            ],
            "preptime" : "10",
            "servings" : "4",
            "subtitle" : "This recipe comes from an old recipe book of 1683 called 'The Gentlewoman's Kitchen'. This is an excellent way of making a rich and full-flavoured meat dish in a very short time.",
            "title" : "Scotch collops",
            "totaltime" : "18"
         },
         "id" : "Scotchcollops",
         "key" : "claret",
         "value" : [
            "Scotch collops"
         ]
      },
      {
         "doc" : {
            "_id" : "Standpie",
            "_rev" : "1-bff6edf3ca2474a243023f2dad432a5a",
            "cooktime" : "92",
            "ingredients" : [
...            ],
            "keywords" : [
               "diet@dairy-free",
               "diet@peanut-free",
               "special collections@classic recipe",
               "cuisine@british traditional",
               "diet@corn-free",
               "diet@citrus-free",
               "occasion@buffet party",
               "diet@shellfish-free",
               "occasion@picnic",
               "special collections@lunchbox",
               "main ingredient@meat",
               "convenience@serve with salad for complete meal",
               "meal type@main",
               "cook method.hob, oven, grill@hob / oven",
               "diet@cow dairy-free"
            ],
            "preptime" : "30",
            "servings" : "6",
            "subtitle" : "Serve this pie with pickled vegetables and potato salad.",
            "title" : "Stand pie",
            "totaltime" : "437"
         },
         "id" : "Standpie",
         "key" : "clear apple juice",
         "value" : [
            "Stand pie"
         ]
      }
   ],
   "total_rows" : 26484
}</pre></div></div><div class="section" title="8.11.&nbsp;POST /db/_design/design-doc/_show/show-name"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-design_db-design-designdoc-show-showname_get"></a>8.11.&nbsp;<code class="literal">POST /db/_design/design-doc/_show/show-name</code></h2></div></div></div><div class="informaltable"><table summary="URL API GET /db/_design/design-doc/_show/show-name" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">GET /db/_design/design-doc/_show/show-name</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 None
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 Returns the result of the show
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">no</td></tr><tr><td><span class="bold"><strong>Query Arguments</strong></span></td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">details</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Indicates whether details should be included
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>string</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">format</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Format of the returned information
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>string</td></tr></tbody></table></div><p></p></div><div class="section" title="8.12.&nbsp;POST /db/_design/design-doc/_show/show-name/doc"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-design_db-design-designdoc-show-showname-doc_get"></a>8.12.&nbsp;<code class="literal">POST /db/_design/design-doc/_show/show-name/doc</code></h2></div></div></div><div class="informaltable"><table summary="URL API GET /db/_design/design-doc/_show/show-name/doc" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">GET /db/_design/design-doc/_show/show-name/doc</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 None
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 Returns the show for the given document
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">no</td></tr></tbody></table></div><p></p></div><div class="section" title="8.13.&nbsp;GET /db/_design/design-doc/_list/list-name/other-design-doc/view-name"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-design_db-design-designdoc-list-listname-otherdesigndoc-viewname_get"></a>8.13.&nbsp;<code class="literal">GET
      /db/_design/design-doc/_list/list-name/other-design-doc/view-name</code></h2></div></div></div><div class="informaltable"><table summary="URL API GET /db/_design/design-doc/_list/list-name/other-design-doc/view-name" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">GET /db/_design/design-doc/_list/list-name/other-design-doc/view-name</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 TBC
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 TBC
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">no</td></tr></tbody></table></div></div><div class="section" title="8.14.&nbsp;POST /db/_design/design-doc/_list/list-name/other-design-doc/view-name"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-design_db-design-designdoc-list-listname-otherdesigndoc-viewname_post"></a>8.14.&nbsp;<code class="literal">POST
      /db/_design/design-doc/_list/list-name/other-design-doc/view-name</code></h2></div></div></div><div class="informaltable"><table summary="URL API POST /db/_design/design-doc/_list/list-name/other-design-doc/view-name" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">POST /db/_design/design-doc/_list/list-name/other-design-doc/view-name</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 TBC
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 TBC
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">no</td></tr></tbody></table></div></div><div class="section" title="8.15.&nbsp;GET /db/_design/design-doc/_list/list-name/view-name"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-design_db-design-designdoc-list-listname-viewname_get"></a>8.15.&nbsp;<code class="literal">GET /db/_design/design-doc/_list/list-name/view-name</code></h2></div></div></div><div class="informaltable"><table summary="URL API GET /db/_design/design-doc/_list/list-name/view-name" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">GET /db/_design/design-doc/_list/list-name/view-name</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 TBC
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 TBC
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">no</td></tr></tbody></table></div></div><div class="section" title="8.16.&nbsp;POST /db/_design/design-doc/_list/list-name/view-name"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-design_db-design-designdoc-list-listname-viewname_post"></a>8.16.&nbsp;<code class="literal">POST /db/_design/design-doc/_list/list-name/view-name</code></h2></div></div></div><div class="informaltable"><table summary="URL API POST /db/_design/design-doc/_list/list-name/view-name" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">POST /db/_design/design-doc/_list/list-name/view-name</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 TBC
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 TBC
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">no</td></tr></tbody></table></div></div><div class="section" title="8.17.&nbsp;PUT /db/_design/design-doc/_update/updatename/doc"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-design_db-design-designdoc-update-updatename-doc_put"></a>8.17.&nbsp;<code class="literal">PUT /db/_design/design-doc/_update/updatename/doc</code></h2></div></div></div><div class="informaltable"><table summary="URL API PUT /db/_design/design-doc/_update/update-name/doc" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">PUT /db/_design/design-doc/_update/update-name/doc</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 Document update information
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 Updated document
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">no</td></tr></tbody></table></div></div><div class="section" title="8.18.&nbsp;POST /db/_design/design-doc/_update/updatename"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-design_db-design-designdoc-update-updatename_post"></a>8.18.&nbsp;<code class="literal">POST /db/_design/design-doc/_update/updatename</code></h2></div></div></div><div class="informaltable"><table summary="URL API POST /db/_design/design-doc/_update/update-name" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">POST /db/_design/design-doc/_update/update-name</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 Document update information
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 Updated document
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">no</td></tr></tbody></table></div></div><div class="section" title="8.19.&nbsp;ALL /db/_design/design-doc/_rewrite/rewrite-name/anything"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-design_db-design-designdoc-rewrite-rewritename-anything"></a>8.19.&nbsp;<code class="literal">ALL
      /db/_design/design-doc/_rewrite/rewrite-name/anything</code></h2></div></div></div><div class="informaltable"><table summary="URL API ALL /db/_design/design-doc/_rewrite/rewrite-name/anything" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">ALL /db/_design/design-doc/_rewrite/rewrite-name/anything</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 TBC
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 TBC
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">no</td></tr></tbody></table></div></div></div><div class="chapter" title="Chapter&nbsp;9.&nbsp;CouchDB API Server Miscellaneous Methods"><div class="titlepage"><div><div><h2 class="title"><a name="couchdb-api-misc"></a>Chapter&nbsp;9.&nbsp;CouchDB API Server Miscellaneous Methods</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#couchdb-api-misc_root_get">9.1. <code class="literal">GET /</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-misc_active-tasks_get">9.2. <code class="literal">GET /_active_tasks</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-misc_all-dbs_get">9.3. <code class="literal">GET /_all_dbs</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-misc_log_get">9.4. <code class="literal">GET /_log</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-misc_replicate_post">9.5. <code class="literal">POST /_replicate</code></a></span></dt><dd><dl><dt><span class="section"><a href="#couchdb-api-misc_replicate_post-operation">9.5.1. Replication Operation</a></span></dt><dt><span class="section"><a href="#couchdb-api-misc_replicate_post-sourcetarget">9.5.2. Specifying the Source and Target Database</a></span></dt><dt><span class="section"><a href="#couchdb-api-misc_replicate_post-single">9.5.3. Single Replication</a></span></dt><dt><span class="section"><a href="#couchdb-api-misc_replicate_post-continuous">9.5.4. Continuous Replication</a></span></dt><dt><span class="section"><a href="#couchdb-api-misc_replicate_post-cancel">9.5.5. Canceling Continuous Replication</a></span></dt></dl></dd><dt><span class="section"><a href="#couchdb-api-misc_restart_post">9.6. <code class="literal">POST /_restart</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-misc_stats_get">9.7. <code class="literal">GET /_stats</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-misc_utils_get">9.8. <code class="literal">GET /_utils</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-misc_uuids_get">9.9. <code class="literal">GET /_uuids</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-misc_favicon_get">9.10. <code class="literal">GET /favicon.ico</code></a></span></dt></dl></div><p>
    The CouchDB Miscellaneous interface provides the basic interface to
    a CouchDB server for obtaining CouchDB information and getting and
    setting configuration information.
  </p><p>
    A list of the available methods and URL paths are provided below:
  </p><div class="table"><a name="table-couchdb-api-misc-summary"></a><p class="title"><b>Table&nbsp;9.1.&nbsp;Miscellaneous API Calls</b></p><div class="table-contents"><table summary="Miscellaneous API Calls" border="1"><colgroup><col class="method" width="33%"><col class="path" width="33%"><col class="desc" width="34%"></colgroup><thead><tr><th>Method</th><th>Path</th><th>Description</th></tr></thead><tbody><tr><td><code class="literal">GET</code></td><td><code class="literal">/</code></td><td><a class="link" href="#couchdb-api-misc_root_get" title="9.1.&nbsp;GET /">
 Get the welcome message and version information
 </a></td></tr><tr><td><code class="literal">GET</code></td><td><code class="literal">/_active_tasks</code></td><td><a class="link" href="#couchdb-api-misc_active-tasks_get" title="9.2.&nbsp;GET /_active_tasks">
 Obtain a list of the tasks running in the server
 </a></td></tr><tr><td><code class="literal">GET</code></td><td><code class="literal">/_all_dbs</code></td><td><a class="link" href="#couchdb-api-misc_all-dbs_get" title="9.3.&nbsp;GET /_all_dbs">
 Get a list of all the DBs
 </a></td></tr><tr><td><code class="literal">GET</code></td><td><code class="literal">/_log</code></td><td><a class="link" href="#couchdb-api-misc_log_get" title="9.4.&nbsp;GET /_log">
 Return the server log file
 </a></td></tr><tr><td><code class="literal">POST</code></td><td><code class="literal">/_replicate</code></td><td><a class="link" href="#couchdb-api-misc_replicate_post" title="9.5.&nbsp;POST /_replicate">
 Set or cancel replication
 </a></td></tr><tr><td><code class="literal">POST</code></td><td><code class="literal">/_restart</code></td><td><a class="link" href="#couchdb-api-misc_restart_post" title="9.6.&nbsp;POST /_restart">
 Restart the server
 </a></td></tr><tr><td><code class="literal">GET</code></td><td><code class="literal">/_stats</code></td><td><a class="link" href="#couchdb-api-misc_stats_get" title="9.7.&nbsp;GET /_stats">
 Return server statistics
 </a></td></tr><tr><td><code class="literal">GET</code></td><td><code class="literal">/_utils</code></td><td><a class="link" href="#couchdb-api-misc_utils_get" title="9.8.&nbsp;GET /_utils">
 CouchDB administration interface (Futon)
 </a></td></tr><tr><td><code class="literal">GET</code></td><td><code class="literal">/_uuids</code></td><td><a class="link" href="#couchdb-api-misc_uuids_get" title="9.9.&nbsp;GET /_uuids">
 Get generated UUIDs from the server
 </a></td></tr><tr><td><code class="literal">GET</code></td><td><code class="literal">/favicon.ico</code></td><td><a class="link" href="#couchdb-api-misc_favicon_get" title="9.10.&nbsp;GET /favicon.ico">
 Get the site icon
 </a></td></tr></tbody></table></div></div><br class="table-break"><div class="section" title="9.1.&nbsp;GET /"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-misc_root_get"></a>9.1.&nbsp;<code class="literal">GET /</code></h2></div></div></div><div class="informaltable"><table summary="URL API GET /" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">GET /</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 None
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 Welcome message and version
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">no</td></tr><tr><td colspan="3"><span class="bold"><strong>Return Codes</strong></span></td></tr><tr><td>200</td><td colspan="2">
 Request completed successfully.
 </td></tr></tbody></table></div><p>
      Accessing the root of a CouchDB instance returns meta information
      about the instance. The response is a JSON structure containing
      information about the server, including a welcome message and the
      version of the server.
    </p><pre class="programlisting">{
   "couchdb" : "Welcome",
   "version" : "1.0.1"
}</pre></div><div class="section" title="9.2.&nbsp;GET /_active_tasks"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-misc_active-tasks_get"></a>9.2.&nbsp;<code class="literal">GET /_active_tasks</code></h2></div></div></div><div class="informaltable"><table summary="URL API GET /_active_tasks" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">GET /_active_tasks</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 None
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 List of running tasks, including the task type, name, status and
 process ID
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">no</td></tr><tr><td colspan="3"><span class="bold"><strong>Return Codes</strong></span></td></tr><tr><td>200</td><td colspan="2">
 Request completed successfully.
 </td></tr></tbody></table></div><p>
      You can obtain a list of active tasks by using the
      <code class="literal">/_active_tasks</code> URL. The result is a JSON array
      of the currently running tasks, with each task being described
      with a single object. For example:
    </p><pre class="programlisting">[
   {
    "pid" : "&lt;0.11599.0&gt;",
    "status" : "Copied 0 of 18369 changes (0%)",
    "task" : "recipes",
    "type" : "Database Compaction"
    }
]</pre><p>
      The returned structure includes the following fields for each
      task:
    </p><div class="table"><a name="table-couchdb-api-misc-active-tasks-json"></a><p class="title"><b>Table&nbsp;9.2.&nbsp;
 List of Active Tasks
 </b></p><div class="table-contents"><table summary="
 List of Active Tasks
 " border="1"><colgroup><col class="item" width="30%"><col class="desc" width="70%"></colgroup><tbody><tr><td><span class="bold"><strong>Field</strong></span></td><td><span class="bold"><strong>Description</strong></span></td></tr><tr><td><code class="literal">tasks</code> <code class="literal">[array]</code> </td><td>
 Active Task
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">pid</code>  </td><td>
 Process ID
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">status</code>  </td><td>
 Task status message
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">task</code>  </td><td>
 Task name
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">type</code>  </td><td>
 Operation Type
 </td></tr></tbody></table></div></div><br class="table-break"><p>
      For operation type, valid values include:
    </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
          <code class="literal">Database Compaction</code>
        </p></li><li class="listitem"><p>
          <code class="literal">Replication</code>
        </p></li><li class="listitem"><p>
          <code class="literal">View Group Compaction</code>
        </p></li><li class="listitem"><p>
          <code class="literal">View Group Indexer</code>
        </p></li></ul></div></div><div class="section" title="9.3.&nbsp;GET /_all_dbs"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-misc_all-dbs_get"></a>9.3.&nbsp;<code class="literal">GET /_all_dbs</code></h2></div></div></div><div class="informaltable"><table summary="URL API GET /_all_dbs" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">GET /_all_dbs</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 None
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 JSON list of DBs
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">no</td></tr><tr><td colspan="3"><span class="bold"><strong>Return Codes</strong></span></td></tr><tr><td>200</td><td colspan="2">
 Request completed successfully.
 </td></tr></tbody></table></div><p>
      Returns a list of all the databases in the CouchDB instance. For
      example:
    </p><pre class="programlisting">GET http://couchdb:5984/_all_dbs
Accept: application/json</pre><p>
      The return is a JSON array:
    </p><pre class="programlisting">[
   "_users",
   "contacts",
   "docs",
   "invoices",
   "locations"
]</pre></div><div class="section" title="9.4.&nbsp;GET /_log"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-misc_log_get"></a>9.4.&nbsp;<code class="literal">GET /_log</code></h2></div></div></div><div class="informaltable"><table summary="URL API GET /_log" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">GET /_log</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 None
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 Log content
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">no</td></tr><tr><td><span class="bold"><strong>Query Arguments</strong></span></td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">bytes</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Bytes to be returned
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>numeric</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Default</strong></span></td><td>1000</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">offset</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Offset in bytes where the log tail should be started
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>numeric</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Default</strong></span></td><td>0</td></tr><tr><td colspan="3"><span class="bold"><strong>Return Codes</strong></span></td></tr><tr><td>200</td><td colspan="2">
 Request completed successfully.
 </td></tr></tbody></table></div><p>
      Gets the CouchDB log, equivalent to accessing the local log file
      of the corresponding CouchDB instance.
    </p><p>
      When you request the log, the response is returned as plain
      (UTF-8) text, with an HTTP <code class="literal">Content-type</code> header
      as <code class="literal">text/plain</code>.
    </p><p>
      For example, the request:
    </p><pre class="programlisting">GET http://couchdb:5984/_log
Accept: */*</pre><p>
      The raw text is returned:
    </p><pre class="programlisting">[Wed, 27 Oct 2010 10:49:42 GMT] [info] [&lt;0.23338.2&gt;] 192.168.0.2 - - 'PUT' /authdb 401

[Wed, 27 Oct 2010 11:02:19 GMT] [info] [&lt;0.23428.2&gt;] 192.168.0.116 - - 'GET' /recipes/FishStew 200

[Wed, 27 Oct 2010 11:02:19 GMT] [info] [&lt;0.23428.2&gt;] 192.168.0.116 - - 'GET' /_session 200

[Wed, 27 Oct 2010 11:02:19 GMT] [info] [&lt;0.24199.2&gt;] 192.168.0.116 - - 'GET' / 200

[Wed, 27 Oct 2010 13:03:38 GMT] [info] [&lt;0.24207.2&gt;] 192.168.0.116 - - 'GET' /_log?offset=5 200</pre><p>
      If you want to pick out specific parts of the log information you
      can use the <code class="literal">bytes</code> argument, which specifies the
      number of bytes to be returned, and <code class="literal">offset</code>,
      which specifies where the reading of the log should start, counted
      back from the end. For example, if you use the following request:
    </p><pre class="programlisting">GET /_log?bytes=500&amp;offset=2000</pre><p>
      Reading of the log will start at 2000 bytes from the end of the
      log, and 500 bytes will be shown.
    </p></div><div class="section" title="9.5.&nbsp;POST /_replicate"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-misc_replicate_post"></a>9.5.&nbsp;<code class="literal">POST /_replicate</code></h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#couchdb-api-misc_replicate_post-operation">9.5.1. Replication Operation</a></span></dt><dt><span class="section"><a href="#couchdb-api-misc_replicate_post-sourcetarget">9.5.2. Specifying the Source and Target Database</a></span></dt><dt><span class="section"><a href="#couchdb-api-misc_replicate_post-single">9.5.3. Single Replication</a></span></dt><dt><span class="section"><a href="#couchdb-api-misc_replicate_post-continuous">9.5.4. Continuous Replication</a></span></dt><dt><span class="section"><a href="#couchdb-api-misc_replicate_post-cancel">9.5.5. Canceling Continuous Replication</a></span></dt></dl></div><div class="informaltable"><table summary="URL API POST /_replicate" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">POST /_replicate</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 Replication specification
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 Welcome message and version
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">no</td></tr><tr><td colspan="3"><span class="bold"><strong>Return Codes</strong></span></td></tr><tr><td>200</td><td colspan="2">
 Replication request successfully completed
 </td></tr><tr><td>202</td><td colspan="2">
 Continuous replication request has been accepted
 </td></tr><tr><td>404</td><td colspan="2">
 Either the source or target DB is not found
 </td></tr><tr><td>500</td><td colspan="2">
 JSON specification was invalid
 </td></tr></tbody></table></div><p>
      Request, configure, or stop, a replication operation.
    </p><p>
      The specification of the replication request is controlled through
      the JSON content of the request. The JSON should be an object with
      the fields defining the source, target and other options. The
      fields of the JSON request are shown in the table below:
    </p><div class="table"><a name="table-couchdb-api-misc-json-replication"></a><p class="title"><b>Table&nbsp;9.3.&nbsp;
 Replication Settings
 </b></p><div class="table-contents"><table summary="
 Replication Settings
 " border="1"><colgroup><col class="item" width="30%"><col class="desc" width="70%"></colgroup><tbody><tr><td><span class="bold"><strong>Field</strong></span></td><td><span class="bold"><strong>Description</strong></span></td></tr><tr><td><code class="literal">cancel</code> (optional) </td><td>
 Cancels the replication
 </td></tr><tr><td><code class="literal">continuous</code> (optional) </td><td>
 Configure the replication to be continuous
 </td></tr><tr><td><code class="literal">create_target</code> (optional) </td><td>
 Creates the target database
 </td></tr><tr><td><code class="literal">doc_ids</code> (optional) </td><td>
 Array of document IDs to be synchronized
 </td></tr><tr><td><code class="literal">proxy</code> (optional) </td><td>
 Address of a proxy server through which replication should occur
 </td></tr><tr><td><code class="literal">source</code>  </td><td>
 Source database name or URL
 </td></tr><tr><td><code class="literal">target</code>  </td><td>
 Target database name or URL
 </td></tr></tbody></table></div></div><br class="table-break"><div class="section" title="9.5.1.&nbsp;Replication Operation"><div class="titlepage"><div><div><h3 class="title"><a name="couchdb-api-misc_replicate_post-operation"></a>9.5.1.&nbsp;Replication Operation</h3></div></div></div><p>
        The aim of the replication is that at the end of the process,
        all active documents on the source database are also in the
        destination database and all documents that were deleted in the
        source databases are also deleted (if they exist) on the
        destination database.
      </p><p>
        Replication can be described as either push or pull replication:
      </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
            <span class="emphasis"><em>Pull replication</em></span> is where the
            <code class="literal">source</code> is the remote CouchDB instance,
            and the <code class="literal">destination</code> is the local
            database.
          </p><p>
            Pull replication is the most useful solution to use if your
            source database has a permanent IP address, and your
            destination (local) database may have a dynamically assigned
            IP address (for example, through DHCP). This is particularly
            important if you are replicating to a mobile or other device
            from a central server.
          </p></li><li class="listitem"><p>
            <span class="emphasis"><em>Push replication</em></span> is where the
            <code class="literal">source</code> is a local database, and
            <code class="literal">destination</code> is a remote database.
          </p></li></ul></div></div><div class="section" title="9.5.2.&nbsp;Specifying the Source and Target Database"><div class="titlepage"><div><div><h3 class="title"><a name="couchdb-api-misc_replicate_post-sourcetarget"></a>9.5.2.&nbsp;Specifying the Source and Target Database</h3></div></div></div><p>
        You must use the URL specification of the CouchDB database if
        you want to perform replication in either of the following two
        situations:
      </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
            Replication with a remote database (i.e. another instance of
            CouchDB on the same host, or a different host)
          </p></li><li class="listitem"><p>
            Replication with a database that requires authentication
          </p></li></ul></div><p>
        For example, to request replication between a database local to
        the CouchDB instance to which you send the request, and a remote
        database you might use the following request:
      </p><pre class="programlisting">POST http://couchdb:5984/_replicate
Content-Type: application/json
Accept: application/json

{
   "source" : "recipes",
   "target" : "http://coucdb-remote:5984/recipes",
}</pre><p>
        In all cases, the requested databases in the
        <code class="literal">source</code> and <code class="literal">target</code>
        specification must exist. If they do not, an error will be
        returned within the JSON object:
      </p><pre class="programlisting">{
   "error" : "db_not_found"
   "reason" : "could not open http://couchdb-remote:5984/ol1ka/",
}</pre><p>
        You can create the target database (providing your user
        credentials allow it) by adding the
        <code class="literal">create_target</code> field to the request object:
      </p><pre class="programlisting">POST http://couchdb:5984/_replicate
Content-Type: application/json
Accept: application/json

{
   "create_target" : true
   "source" : "recipes",
   "target" : "http://couchdb-remote:5984/recipes",
}</pre><p>
        The <code class="literal">create_target</code> field is not destructive.
        If the database already exists, the replication proceeds as
        normal.
      </p></div><div class="section" title="9.5.3.&nbsp;Single Replication"><div class="titlepage"><div><div><h3 class="title"><a name="couchdb-api-misc_replicate_post-single"></a>9.5.3.&nbsp;Single Replication</h3></div></div></div><p>
        You can request replication of a database so that the two
        databases can be synchronized. By default, the replication
        process occurs one time and synchronizes the two databases
        together. For example, you can request a single synchronization
        between two databases by supplying the <code class="literal">source</code>
        and <code class="literal">target</code> fields within the request JSON
        content.
      </p><pre class="programlisting">POST http://couchdb:5984/_replicate
Content-Type: application/json
Accept: application/json

{
   "source" : "recipes",
   "target" : "recipes-snapshot",
}</pre><p>
        In the above example, the databases <code class="literal">recipes</code>
        and <code class="literal">recipes-snapshot</code> will be synchronized.
        These databases are local to the CouchDB instance where the
        request was made. The response will be a JSON structure
        containing the success (or failure) of the synchronization
        process, and statistics about the process:
      </p><pre class="programlisting">{
   "ok" : true,
   "history" : [
      {
         "docs_read" : 1000,
         "session_id" : "52c2370f5027043d286daca4de247db0",
         "recorded_seq" : 1000,
         "end_last_seq" : 1000,
         "doc_write_failures" : 0,
         "start_time" : "Thu, 28 Oct 2010 10:24:13 GMT",
         "start_last_seq" : 0,
         "end_time" : "Thu, 28 Oct 2010 10:24:14 GMT",
         "missing_checked" : 0,
         "docs_written" : 1000,
         "missing_found" : 1000
      }
   ],
   "session_id" : "52c2370f5027043d286daca4de247db0",
   "source_last_seq" : 1000
}</pre><p>
        The structure defines the replication status, as described in
        the table below:
      </p><div class="table"><a name="table-couchdb-api-misc-json-replication-status"></a><p class="title"><b>Table&nbsp;9.4.&nbsp;
 Replication Status
 </b></p><div class="table-contents"><table summary="
 Replication Status
 " border="1"><colgroup><col class="item" width="30%"><col class="desc" width="70%"></colgroup><tbody><tr><td><span class="bold"><strong>Field</strong></span></td><td><span class="bold"><strong>Description</strong></span></td></tr><tr><td><code class="literal">history</code> <code class="literal">[array]</code> </td><td>
 Replication History
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">doc_write_failures</code>  </td><td>
 Number of document write failures
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">docs_read</code>  </td><td>
 Number of documents read
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">docs_written</code>  </td><td>
 Number of documents written to target
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">end_last_seq</code>  </td><td>
 Last sequence number in changes stream
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">end_time</code>  </td><td>
 Date/Time replication operation completed
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">missing_checked</code>  </td><td>
 Number of missing documents checked
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">missing_found</code>  </td><td>
 Number of missing documents found
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">recorded_seq</code>  </td><td>
 Last recorded sequence number
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">session_id</code>  </td><td>
 Session ID for this replication operation
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">start_last_seq</code>  </td><td>
 First sequence number in changes stream
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">start_time</code>  </td><td>
 Date/Time replication operation started
 </td></tr><tr><td><code class="literal">ok</code>  </td><td>
 Replication status
 </td></tr><tr><td><code class="literal">session_id</code>  </td><td>
 Unique session ID
 </td></tr><tr><td><code class="literal">source_last_seq</code>  </td><td>
 Last sequence number read from source database
 </td></tr></tbody></table></div></div><br class="table-break"></div><div class="section" title="9.5.4.&nbsp;Continuous Replication"><div class="titlepage"><div><div><h3 class="title"><a name="couchdb-api-misc_replicate_post-continuous"></a>9.5.4.&nbsp;Continuous Replication</h3></div></div></div><p>
        Synchronization of a database with the previously noted methods
        happens only once, at the time the replicate request is made. To
        have the target database permanently replicated from the source,
        you must set the <code class="literal">continuous</code> field of the JSON
        object within the request to true.
      </p><p>
        With continuous replication changes in the source database are
        replicated to the target database in perpetuity until you
        specifically request that replication ceases.
      </p><pre class="programlisting">POST http://couchdb:5984/_replicate
Content-Type: application/json
Accept: application/json

{
   "continuous" : true
   "source" : "recipes",
   "target" : "http://couchdb-remote:5984/recipes",
}</pre><p>
        Changes will be replicated between the two databases as long as
        a network connection is available between the two instances.
      </p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          Two keep two databases synchronized with each other, you need
          to set replication in both directions; that is, you must
          replicate from <code class="literal">databasea</code> to
          <code class="literal">databaseb</code>, and separately from
          <code class="literal">databaseb</code> to <code class="literal">databasea</code>.
        </p></div></div><div class="section" title="9.5.5.&nbsp;Canceling Continuous Replication"><div class="titlepage"><div><div><h3 class="title"><a name="couchdb-api-misc_replicate_post-cancel"></a>9.5.5.&nbsp;Canceling Continuous Replication</h3></div></div></div><p>
        You can cancel continuous replication by adding the
        <code class="literal">cancel</code> field to the JSON request object and
        setting the value to true. Note that the structure of the
        request must be identical to the original for the cancelation
        request to be honoured. For example, if you requested continuous
        replication, the cancellation request must also contain the
        <code class="literal">continuous</code> field.
      </p><p>
        For example, the replication request:
      </p><pre class="programlisting">POST http://couchdb:5984/_replicate
Content-Type: application/json
Accept: application/json

{
   "source" : "recipes",
   "target" : "http://couchdb-remote:5984/recipes",
   "create_target" : true,
   "continuous" : true
}</pre><p>
        Must be canceled using the request:
      </p><pre class="programlisting">POST http://couchdb:5984/_replicate
Content-Type: application/json
Accept: application/json

{
    "cancel" : true,
    "continuous" : true
    "create_target" : true,
    "source" : "recipes",
    "target" : "http://couchdb-remote:5984/recipes",
}</pre><p>
        Requesting cancellation of a replication that does not exist
        results in a 404 error.
      </p></div></div><div class="section" title="9.6.&nbsp;POST /_restart"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-misc_restart_post"></a>9.6.&nbsp;<code class="literal">POST /_restart</code></h2></div></div></div><div class="informaltable"><table summary="URL API POST /_restart" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">POST /_restart</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 None
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 JSON status message
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">yes</td></tr><tr><td colspan="3"><span class="bold"><strong>Return Codes</strong></span></td></tr><tr><td>201</td><td colspan="2">
 Document created successfully.
 </td></tr></tbody></table></div><p>
      Restarts the CouchDB instance. You must be authenticated as a user
      with administration privileges for this to work.
    </p><p>
      For example:
    </p><pre class="programlisting">POST http://admin:password@couchdb:5984/_restart</pre><p>
      The return value (if the server has not already restarted) is a
      JSON status object indicating that the request has been received:
    </p><pre class="programlisting">{
   "ok" : true,
}</pre><p>
      If the server has already restarted, the header may be returned,
      but no actual data is contained in the response.
    </p></div><div class="section" title="9.7.&nbsp;GET /_stats"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-misc_stats_get"></a>9.7.&nbsp;<code class="literal">GET /_stats</code></h2></div></div></div><div class="informaltable"><table summary="URL API GET /_stats" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">GET /_stats</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 None
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 Server statistics
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">no</td></tr><tr><td colspan="3"><span class="bold"><strong>Return Codes</strong></span></td></tr><tr><td>200</td><td colspan="2">
 Request completed successfully.
 </td></tr></tbody></table></div><p>
      The <code class="literal">_stats</code> method returns a JSON object
      containting the statistics for the running server. The object is
      structured with top-level sections collating the statistics for a
      range of entries, with each individual statistic being easily
      identified, and the content of each statistic is self-describing.
      For example, the request time statistics, within the
      <code class="literal">couchdb</code> section are structured as follows:
    </p><pre class="programlisting">{
   "couchdb" : {
...
      "request_time" : {
         "stddev" : "27.509",
         "min" : "0.333333333333333",
         "max" : "152",
         "current" : "400.976",
         "mean" : "10.837",
         "sum" : "400.976",
         "description" : "length of a request inside CouchDB without MochiWeb"
      },
...
    }
}</pre><p>
      The fields provide the current, minimum and maximum, and a
      collection of statistical means and quantities. The quantity in
      each case is not defined, but the descriptions below provide
    </p><p>
      The statistics are divided into the following top-level sections:
    </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
          <code class="literal">couchdb</code>
        </p><p>
          Describes statistics specific to the internals of CouchDB.
        </p><div class="table"><a name="N13B75"></a><p class="title"><b>Table&nbsp;9.5.&nbsp;<code class="literal">couchdb</code> statistics</b></p><div class="table-contents"><table summary="couchdb statistics" border="1"><colgroup><col class="stat" width="33%"><col class="desc" width="33%"><col class="unit" width="34%"></colgroup><thead><tr><th>
                  Statistic ID
                </th><th>
                  Description
                </th><th>
                  Unit
                </th></tr></thead><tbody><tr><td><code class="literal">auth_cache_hits</code>
                </td><td>
                  Number of authentication cache hits
                </td><td>
                  number
                </td></tr><tr><td><code class="literal">auth_cache_misses</code>
                </td><td>
                  Number of authentication cache misses
                </td><td>
                  number
                </td></tr><tr><td><code class="literal">database_reads</code>
                </td><td>
                  Number of times a document was read from a database
                </td><td>
                  number
                </td></tr><tr><td><code class="literal">database_writes</code>
                </td><td>
                  Number of times a database was changed
                </td><td>
                  number
                </td></tr><tr><td><code class="literal">open_databases</code>
                </td><td>
                  Number of open databases
                </td><td>
                  number
                </td></tr><tr><td><code class="literal">open_os_files</code>
                </td><td>
                  Number of file descriptors CouchDB has open
                </td><td>
                  number
                </td></tr><tr><td><code class="literal">request_time</code>
                </td><td>
                  Length of a request inside CouchDB without MochiWeb
                </td><td>
                  milliseconds
                </td></tr></tbody></table></div></div><br class="table-break"></li><li class="listitem"><p>
          <code class="literal">httpd_request_methods</code>
        </p><div class="table"><a name="N13BD9"></a><p class="title"><b>Table&nbsp;9.6.&nbsp;<code class="literal">httpd_request_methods</code> statistics</b></p><div class="table-contents"><table summary="httpd_request_methods statistics" border="1"><colgroup><col class="stat" width="33%"><col class="desc" width="33%"><col class="unit" width="34%"></colgroup><thead><tr><th>
                  Statistic ID
                </th><th>
                  Description
                </th><th>
                  Unit
                </th></tr></thead><tbody><tr><td><code class="literal">COPY</code>
                </td><td>
                  Number of HTTP COPY requests
                </td><td>
                  number
                </td></tr><tr><td><code class="literal">DELETE</code>
                </td><td>
                  Number of HTTP DELETE requests
                </td><td>
                  number
                </td></tr><tr><td><code class="literal">GET</code>
                </td><td>
                  Number of HTTP GET requests
                </td><td>
                  number
                </td></tr><tr><td><code class="literal">HEAD</code>
                </td><td>
                  Number of HTTP HEAD requests
                </td><td>
                  number
                </td></tr><tr><td><code class="literal">POST</code>
                </td><td>
                  Number of HTTP POST requests
                </td><td>
                  number
                </td></tr><tr><td><code class="literal">PUT</code>
                </td><td>
                  Number of HTTP PUT requests
                </td><td>
                  number
                </td></tr></tbody></table></div></div><br class="table-break"></li><li class="listitem"><p>
          <code class="literal">httpd_status_codes</code>
        </p><div class="table"><a name="N13C33"></a><p class="title"><b>Table&nbsp;9.7.&nbsp;<code class="literal">httpd_status_codes</code> statistics</b></p><div class="table-contents"><table summary="httpd_status_codes statistics" border="1"><colgroup><col class="stat" width="33%"><col class="desc" width="33%"><col class="unit" width="34%"></colgroup><thead><tr><th>
                  Statistic ID
                </th><th>
                  Description
                </th><th>
                  Unit
                </th></tr></thead><tbody><tr><td><code class="literal">200</code>
                </td><td>
                  Number of HTTP 200 OK responses
                </td><td>
                  number
                </td></tr><tr><td><code class="literal">201</code>
                </td><td>
                  Number of HTTP 201 Created responses
                </td><td>
                  number
                </td></tr><tr><td><code class="literal">202</code>
                </td><td>
                  Number of HTTP 202 Accepted responses
                </td><td>
                  number
                </td></tr><tr><td><code class="literal">301</code>
                </td><td>
                  Number of HTTP 301 Moved Permanently responses
                </td><td>
                  number
                </td></tr><tr><td><code class="literal">304</code>
                </td><td>
                  Number of HTTP 304 Not Modified responses
                </td><td>
                  number
                </td></tr><tr><td><code class="literal">400</code>
                </td><td>
                  Number of HTTP 400 Bad Request responses
                </td><td>
                  number
                </td></tr><tr><td><code class="literal">401</code>
                </td><td>
                  Number of HTTP 401 Unauthorized responses
                </td><td>
                  number
                </td></tr><tr><td><code class="literal">403</code>
                </td><td>
                  Number of HTTP 403 Forbidden responses
                </td><td>
                  number
                </td></tr><tr><td><code class="literal">404</code>
                </td><td>
                  Number of HTTP 404 Not Found responses
                </td><td>
                  number
                </td></tr><tr><td><code class="literal">405</code>
                </td><td>
                  Number of HTTP 405 Method Not Allowed responses
                </td><td>
                  number
                </td></tr><tr><td><code class="literal">409</code>
                </td><td>
                  Number of HTTP 409 Conflict responses
                </td><td>
                  number
                </td></tr><tr><td><code class="literal">412</code>
                </td><td>
                  Number of HTTP 412 Precondition Failed responses
                </td><td>
                  number
                </td></tr><tr><td><code class="literal">500</code>
                </td><td>
                  Number of HTTP 500 Internal Server Error responses
                </td><td>
                  number
                </td></tr></tbody></table></div></div><br class="table-break"></li><li class="listitem"><p>
          <code class="literal">httpd</code>
        </p><div class="table"><a name="N13CD3"></a><p class="title"><b>Table&nbsp;9.8.&nbsp;<code class="literal">httpd</code> statistics</b></p><div class="table-contents"><table summary="httpd statistics" border="1"><colgroup><col class="stat" width="33%"><col class="desc" width="33%"><col class="unit" width="34%"></colgroup><thead><tr><th>
                  Statistic ID
                </th><th>
                  Description
                </th><th>
                  Unit
                </th></tr></thead><tbody><tr><td><code class="literal">bulk_requests</code>
                </td><td>
                  Number of bulk requests
                </td><td>
                  number
                </td></tr><tr><td><code class="literal">clients_requesting_changes</code>
                </td><td>
                  Number of clients for continuous _changes
                </td><td>
                  number
                </td></tr><tr><td><code class="literal">requests</code>
                </td><td>
                  Number of HTTP requests
                </td><td>
                  number
                </td></tr><tr><td><code class="literal">temporary_view_reads</code>
                </td><td>
                  Number of temporary view reads
                </td><td>
                  number
                </td></tr><tr><td><code class="literal">view_reads</code>
                </td><td>
                  Number of view reads
                </td><td>
                  number
                </td></tr></tbody></table></div></div><br class="table-break"></li></ul></div><p>
      You can also access individual statistics by quoting the
      statistics sections and statistic ID as part of the URL path. For
      example, to get the <code class="literal">request_time</code> statistics,
      you can use:
    </p><pre class="programlisting">GET /_stats/couchdb/request_time</pre><p>
      This returns an entire statistics object, as with the full
      request, but containining only the request individual statistic.
      Hence, the returned structure is as follows:
    </p><pre class="programlisting">{
   "couchdb" : {
      "request_time" : {
         "stddev" : 7454.305,
         "min" : 1,
         "max" : 34185,
         "current" : 34697.803,
         "mean" : 1652.276,
         "sum" : 34697.803,
         "description" : "length of a request inside CouchDB without MochiWeb"
      }
   }
}</pre></div><div class="section" title="9.8.&nbsp;GET /_utils"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-misc_utils_get"></a>9.8.&nbsp;<code class="literal">GET /_utils</code></h2></div></div></div><div class="informaltable"><table summary="URL API GET /_utils" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">GET /_utils</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 None
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 Administration interface
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">no</td></tr></tbody></table></div><p>
      Accesses the built-in Futon administration interface for CouchDB.
    </p></div><div class="section" title="9.9.&nbsp;GET /_uuids"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-misc_uuids_get"></a>9.9.&nbsp;<code class="literal">GET /_uuids</code></h2></div></div></div><div class="informaltable"><table summary="URL API GET /_uuids" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">GET /_uuids</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 None
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 List of UUIDs
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">no</td></tr><tr><td><span class="bold"><strong>Query Arguments</strong></span></td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">count</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Number of UUIDs to return
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>numeric</td></tr><tr><td colspan="3"><span class="bold"><strong>Return Codes</strong></span></td></tr><tr><td>200</td><td colspan="2">
 Request completed successfully.
 </td></tr></tbody></table></div><p>
      Requests one or more Universally Unique Identifiers (UUIDs) from
      the CouchDB instance. The response is a JSON object providing a
      list of UUIDs. For example:
    </p><pre class="programlisting">{
   "uuids" : [
      "7e4b5a14b22ec1cf8e58b9cdd0000da3"
   ]
}</pre><p>
      You can use the <code class="literal">count</code> argument to specify the
      number of UUIDs to be returned. For example:
    </p><pre class="programlisting">GET http://couchdb:5984/_uuids?count=5</pre><p>
      Returns:
    </p><pre class="programlisting">{
   "uuids" : [
      "c9df0cdf4442f993fc5570225b405a80",
      "c9df0cdf4442f993fc5570225b405bd2",
      "c9df0cdf4442f993fc5570225b405e42",
      "c9df0cdf4442f993fc5570225b4061a0",
      "c9df0cdf4442f993fc5570225b406a20"
   ]
}</pre><p>
      The UUID type is determined by the UUID type setting in the
      CouchDB configuration. See
      <a class="xref" href="#couchdb-api-config_config-section-key_put" title="10.4.&nbsp;PUT /_config/section/key">Section&nbsp;10.4, &ldquo;<code class="literal">PUT /_config/section/key</code>&rdquo;</a>.
    </p><p>
      For example, changing the UUID type to <code class="literal">random</code>:
    </p><pre class="programlisting">PUT http://couchdb:5984/_config/uuids/algorithm
Content-Type: application/json
Accept: */*

"random"</pre><p>
      When obtaining a list of UUIDs:
    </p><pre class="programlisting">{
   "uuids" : [
      "031aad7b469956cf2826fcb2a9260492",
      "6ec875e15e6b385120938df18ee8e496",
      "cff9e881516483911aa2f0e98949092d",
      "b89d37509d39dd712546f9510d4a9271",
      "2e0dbf7f6c4ad716f21938a016e4e59f"
   ]
}</pre></div><div class="section" title="9.10.&nbsp;GET /favicon.ico"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-misc_favicon_get"></a>9.10.&nbsp;<code class="literal">GET /favicon.ico</code></h2></div></div></div><div class="informaltable"><table summary="URL API GET /favicon.ico" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">GET /favicon.ico</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 None
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 Binary content for the favicon.ico site icon
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">no</td></tr><tr><td colspan="3"><span class="bold"><strong>Return Codes</strong></span></td></tr><tr><td>200</td><td colspan="2">
 Request completed successfully.
 </td></tr><tr><td>404</td><td colspan="2">
 The requested content could not be found. The returned content
 will include further information, as a JSON object, if available.
 </td></tr></tbody></table></div><p>
      Returns the site icon. The return <code class="literal">Content-type</code>
      header is <code class="literal">image/x-icon</code>, and the content stream
      is the image data.
    </p></div></div><div class="chapter" title="Chapter&nbsp;10.&nbsp;CouchDB API Server Configuration Methods"><div class="titlepage"><div><div><h2 class="title"><a name="couchdb-api-config"></a>Chapter&nbsp;10.&nbsp;CouchDB API Server Configuration Methods</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#couchdb-api-config_config_get">10.1. <code class="literal">GET /_config</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-config_config-section_get">10.2. <code class="literal">GET /_config/section</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-config_config-section-key_get">10.3. <code class="literal">GET /_config/section/key</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-config_config-section-key_put">10.4. <code class="literal">PUT /_config/section/key</code></a></span></dt><dt><span class="section"><a href="#couchdb-api-config_config-section-key_delete">10.5. <code class="literal">DELETE /_config/section/key</code></a></span></dt></dl></div><p>
    The CouchDB API Server Configuration Methods provide an interface to
    query and update the various configuration values within a running
    CouchDB instance.
  </p><p>
    A list of the available methods and URL paths are provided below:
  </p><div class="table"><a name="table-couchdb-api-config-summary"></a><p class="title"><b>Table&nbsp;10.1.&nbsp;Configuration API Calls</b></p><div class="table-contents"><table summary="Configuration API Calls" border="1"><colgroup><col class="method" width="33%"><col class="path" width="33%"><col class="desc" width="34%"></colgroup><thead><tr><th>Method</th><th>Path</th><th>Description</th></tr></thead><tbody><tr><td><code class="literal">GET</code></td><td><code class="literal">/_config</code></td><td><a class="link" href="#couchdb-api-config_config_get" title="10.1.&nbsp;GET /_config">
 Obtain a list of the entire server configuration
 </a></td></tr><tr><td><code class="literal">GET</code></td><td><code class="literal">/_config/section</code></td><td><a class="link" href="#couchdb-api-config_config-section_get" title="10.2.&nbsp;GET /_config/section">
 Get all the configuration values for the specified section
 </a></td></tr><tr><td><code class="literal">GET</code></td><td><code class="literal">/_config/section/key</code></td><td><a class="link" href="#couchdb-api-config_config-section-key_get" title="10.3.&nbsp;GET /_config/section/key">
 Get a specific section/configuration value
 </a></td></tr><tr><td><code class="literal">PUT</code></td><td><code class="literal">/_config/section/key</code></td><td><a class="link" href="#couchdb-api-config_config-section-key_put" title="10.4.&nbsp;PUT /_config/section/key">
 Set the specified configuration value
 </a></td></tr><tr><td><code class="literal">DELETE</code></td><td><code class="literal">/_config/section/key</code></td><td><a class="link" href="#couchdb-api-config_config-section-key_delete" title="10.5.&nbsp;DELETE /_config/section/key">
 Delete the current setting
 </a></td></tr></tbody></table></div></div><br class="table-break"><div class="section" title="10.1.&nbsp;GET /_config"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-config_config_get"></a>10.1.&nbsp;<code class="literal">GET /_config</code></h2></div></div></div><div class="informaltable"><table summary="URL API GET /_config" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">GET /_config</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 None
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 Returns a structure configuration name and value pairs,
 organized by section
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">no</td></tr></tbody></table></div><p>
      Returns the entire CouchDB server configuration as a JSON
      structure. The structure is organized by different configuration
      sections, with individual values.
    </p><p>
      For example, to get the configuration for a server:
    </p><pre class="programlisting">GET http://couchdb:5984/_config
Accept: application/json</pre><p>
      The response is the JSON structure:
    </p><pre class="programlisting">{
   "query_server_config" : {
      "reduce_limit" : "true"
   },
   "couchdb" : {
      "os_process_timeout" : "5000",
      "max_attachment_chunk_size" : "4294967296",
      "max_document_size" : "4294967296",
      "uri_file" : "/var/lib/couchdb/couch.uri",
      "max_dbs_open" : "100",
      "view_index_dir" : "/var/lib/couchdb",
      "util_driver_dir" : "/usr/lib64/couchdb/erlang/lib/couch-1.0.1/priv/lib",
      "database_dir" : "/var/lib/couchdb",
      "delayed_commits" : "true"
   },
   "attachments" : {
      "compressible_types" : "text/*, application/javascript, application/json,  application/xml",
      "compression_level" : "8"
   },
   "uuids" : {
      "algorithm" : "utc_random"
   },
   "daemons" : {
      "view_manager" : "{couch_view, start_link, []}",
      "auth_cache" : "{couch_auth_cache, start_link, []}",
      "uuids" : "{couch_uuids, start, []}",
      "stats_aggregator" : "{couch_stats_aggregator, start, []}",
      "query_servers" : "{couch_query_servers, start_link, []}",
      "httpd" : "{couch_httpd, start_link, []}",
      "stats_collector" : "{couch_stats_collector, start, []}",
      "db_update_notifier" : "{couch_db_update_notifier_sup, start_link, []}",
      "external_manager" : "{couch_external_manager, start_link, []}"
   },
   "stats" : {
      "samples" : "[0, 60, 300, 900]",
      "rate" : "1000"
   },
   "httpd" : {
      "vhost_global_handlers" : "_utils, _uuids, _session, _oauth, _users",
      "secure_rewrites" : "true",
      "authentication_handlers" : "{couch_httpd_oauth, oauth_authentication_handler},
                                   {couch_httpd_auth, cookie_authentication_handler},
                                   {couch_httpd_auth, default_authentication_handler}",
      "port" : "5984",
      "default_handler" : "{couch_httpd_db, handle_request}",
      "allow_jsonp" : "false",
      "bind_address" : "192.168.0.2",
      "max_connections" : "2048"
   },
   "query_servers" : {
      "javascript" : "/usr/bin/couchjs /usr/share/couchdb/server/main.js"
   },
   "couch_httpd_auth" : {
      "authentication_db" : "_users",
      "require_valid_user" : "false",
      "authentication_redirect" : "/_utils/session.html",
      "timeout" : "600",
      "auth_cache_size" : "50"
   },
   "httpd_db_handlers" : {
      "_design" : "{couch_httpd_db, handle_design_req}",
      "_compact" : "{couch_httpd_db, handle_compact_req}",
      "_view_cleanup" : "{couch_httpd_db, handle_view_cleanup_req}",
      "_temp_view" : "{couch_httpd_view, handle_temp_view_req}",
      "_changes" : "{couch_httpd_db, handle_changes_req}"
   },
   "replicator" : {
      "max_http_sessions" : "10",
      "max_http_pipeline_size" : "10"
   },
   "log" : {
      "include_sasl" : "true",
      "level" : "info",
      "file" : "/var/log/couchdb/couch.log"
   },
   "httpd_design_handlers" : {
      "_update" : "{couch_httpd_show, handle_doc_update_req}",
      "_show" : "{couch_httpd_show, handle_doc_show_req}",
      "_info" : "{couch_httpd_db,   handle_design_info_req}",
      "_list" : "{couch_httpd_show, handle_view_list_req}",
      "_view" : "{couch_httpd_view, handle_view_req}",
      "_rewrite" : "{couch_httpd_rewrite, handle_rewrite_req}"
   },
   "httpd_global_handlers" : {
      "_replicate" : "{couch_httpd_misc_handlers, handle_replicate_req}",
      "/" : "{couch_httpd_misc_handlers, handle_welcome_req, &lt;&lt;\"Welcome\"&gt;&gt;}",
      "_config" : "{couch_httpd_misc_handlers, handle_config_req}",
      "_utils" : "{couch_httpd_misc_handlers, handle_utils_dir_req, \"/usr/share/couchdb/www\"}",
      "_active_tasks" : "{couch_httpd_misc_handlers, handle_task_status_req}",
      "_session" : "{couch_httpd_auth, handle_session_req}",
      "_log" : "{couch_httpd_misc_handlers, handle_log_req}",
      "favicon.ico" : "{couch_httpd_misc_handlers, handle_favicon_req, \"/usr/share/couchdb/www\"}",
      "_all_dbs" : "{couch_httpd_misc_handlers, handle_all_dbs_req}",
      "_oauth" : "{couch_httpd_oauth, handle_oauth_req}",
      "_restart" : "{couch_httpd_misc_handlers, handle_restart_req}",
      "_uuids" : "{couch_httpd_misc_handlers, handle_uuids_req}",
      "_stats" : "{couch_httpd_stats_handlers, handle_stats_req}"
   }
}</pre></div><div class="section" title="10.2.&nbsp;GET /_config/section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-config_config-section_get"></a>10.2.&nbsp;<code class="literal">GET /_config/section</code></h2></div></div></div><div class="informaltable"><table summary="URL API GET /_config/section" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">GET /_config/section</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 None
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 All the configuration values within a specified section
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">no</td></tr></tbody></table></div><p>
      Gets the configuration structure for a single section. For
      example, to retrieve the CouchDB configuration section values:
    </p><pre class="programlisting">GET http://couchdb:5984/_config/couchdb
Accept: application/json</pre><p>
      The returned JSON contains just the configuration values for this
      section:
    </p><pre class="programlisting">{
   "os_process_timeout" : "5000",
   "max_attachment_chunk_size" : "4294967296",
   "max_document_size" : "4294967296",
   "uri_file" : "/var/lib/couchdb/couch.uri",
   "max_dbs_open" : "100",
   "view_index_dir" : "/var/lib/couchdb",
   "util_driver_dir" : "/usr/lib64/couchdb/erlang/lib/couch-1.0.1/priv/lib",
   "database_dir" : "/var/lib/couchdb",
   "delayed_commits" : "true"
}</pre></div><div class="section" title="10.3.&nbsp;GET /_config/section/key"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-config_config-section-key_get"></a>10.3.&nbsp;<code class="literal">GET /_config/section/key</code></h2></div></div></div><div class="informaltable"><table summary="URL API GET /_config/section/key" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">GET /_config/section/key</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 None
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 Value of the specified key/section
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">no</td></tr></tbody></table></div><p>
      Gets a single configuration value from within a specific
      configuration section. For example, to obtain the current log
      level:
    </p><pre class="programlisting">GET http://couchdb:5984/_config/log/level
Accept: application/json</pre><p>
      Returns the string of the log level:
    </p><pre class="programlisting">"info"</pre><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        The returned value will be the JSON of the value, which may be a
        string or numeric value, or an array or object. Some client
        environments may not parse simple strings or numeric values as
        valid JSON.
      </p></div></div><div class="section" title="10.4.&nbsp;PUT /_config/section/key"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-config_config-section-key_put"></a>10.4.&nbsp;<code class="literal">PUT /_config/section/key</code></h2></div></div></div><div class="informaltable"><table summary="URL API PUT /_config/section/key" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">PUT /_config/section/key</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 Value structure
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 Previous value
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">no</td></tr><tr><td colspan="3"><span class="bold"><strong>Return Codes</strong></span></td></tr><tr><td>200</td><td colspan="2">
 Configuration option updated successfully
 </td></tr><tr><td>500</td><td colspan="2">
 Error setting configuration
 </td></tr></tbody></table></div><p>
      Updates a configuration value. The new value should be supplied in
      the request body in the corresponding JSON format. For example, if
      you are setting a string value, you must supply a valid JSON
      string.
    </p><p>
      For example, to set the function used to generate UUIDs by the
      <code class="literal">GET /_uuids</code> API call to use the
      <code class="literal">utc_random</code> generator:
    </p><pre class="programlisting">PUT http://couchdb:5984/_config/uuids/algorithm
Content-Type: application/json

"utc_random"</pre><p>
      The return value will be empty, with the response code indicating
      the success or failure of the configuration setting.
    </p></div><div class="section" title="10.5.&nbsp;DELETE /_config/section/key"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-config_config-section-key_delete"></a>10.5.&nbsp;<code class="literal">DELETE /_config/section/key</code></h2></div></div></div><div class="informaltable"><table summary="URL API DELETE /_config/section/key" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">DELETE /_config/section/key</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 None
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 Previous value
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">no</td></tr><tr><td><span class="bold"><strong>Query Arguments</strong></span></td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">rev</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Current revision of the document for validation
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>string</td></tr><tr><td><span class="bold"><strong>HTTP Headers</strong></span></td><td><span class="bold"><strong>Header</strong></span></td><td><code class="literal">If-Match</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>Current revision of the document for validation</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td colspan="3"><span class="bold"><strong>Return Codes</strong></span></td></tr><tr><td>409</td><td colspan="2">
 Supplied revision is incorrect or missing
 </td></tr></tbody></table></div><p>
      Deletes a configuration value. The returned JSON will be the value
      of the configuration parameter before it was deleted. For example,
      to delete the UUID parameter:
    </p><pre class="programlisting">DELETE http://couchdb:5984/_config/uuids/algorithm
Content-Type: application/json</pre><p>
      The returned value is the last configured UUID function:
    </p><pre class="programlisting">"random"</pre></div></div><div class="chapter" title="Chapter&nbsp;11.&nbsp;CouchDB API Server Authentication Methods"><div class="titlepage"><div><div><h2 class="title"><a name="couchdb-api-auth"></a>Chapter&nbsp;11.&nbsp;CouchDB API Server Authentication Methods</h2></div></div></div><p>
    The CouchDB Authentication methods provide an interface for
    obtaining session and authorization data.
  </p><p>
    A list of the available methods and URL paths are provided below:
  </p><div class="table"><a name="table-couchdb-api-auth-summary"></a><p class="title"><b>Table&nbsp;11.1.&nbsp;Authentication API Calls</b></p><div class="table-contents"><table summary="Authentication API Calls" border="1"><colgroup><col class="method" width="33%"><col class="path" width="33%"><col class="desc" width="34%"></colgroup><thead><tr><th>Method</th><th>Path</th><th>Description</th></tr></thead><tbody><tr><td><code class="literal">GET</code></td><td><code class="literal">/_oauth/access_token</code></td><td><a class="link" href="#">
 TBC
 </a></td></tr><tr><td><code class="literal">GET</code></td><td><code class="literal">/_oauth/authorize</code></td><td><a class="link" href="#">
 TBC
 </a></td></tr><tr><td><code class="literal">POST</code></td><td><code class="literal">/_oauth/authorize</code></td><td><a class="link" href="#">
 TBC
 </a></td></tr><tr><td><code class="literal">GET</code></td><td><code class="literal">/_oauth/request_token</code></td><td><a class="link" href="#">
 TBC
 </a></td></tr><tr><td><code class="literal">GET</code></td><td><code class="literal">/_session</code></td><td><a class="link" href="#">
 Returns cookie based login user information
 </a></td></tr><tr><td><code class="literal">POST</code></td><td><code class="literal">/_session</code></td><td><a class="link" href="#">
 Do cookie based user login
 </a></td></tr><tr><td><code class="literal">DELETE</code></td><td><code class="literal">/_session</code></td><td><a class="link" href="#">
 Logout cookie based user
 </a></td></tr></tbody></table></div></div><br class="table-break"></div><div class="chapter" title="Chapter&nbsp;12.&nbsp;Configuring CouchDB"><div class="titlepage"><div><div><h2 class="title"><a name="couchdb-single-configuration"></a>Chapter&nbsp;12.&nbsp;Configuring CouchDB</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#couchdb-single-configuration-files">12.1. CouchDB Configuration Files</a></span></dt><dt><span class="section"><a href="#couchdb-single-configuration-files-locations">12.2. Configuration File Locations</a></span></dt><dt><span class="section"><a href="#couchdb-single-configuration-mochiweb">12.3. MochiWeb Server Options</a></span></dt><dt><span class="section"><a href="#couchdb-single-configuration-osprocess">12.4. OS Daemons</a></span></dt><dt><span class="section"><a href="#couchdb-single-configuration-update_notification">12.5. Update Notifications</a></span></dt><dt><span class="section"><a href="#couchdb-single-configuration-socketoptions">12.6. Socket Options Configuration Setting</a></span></dt><dt><span class="section"><a href="#couchdb-single-configuration-vhost">12.7. <code class="literal">vhosts</code> definitions</a></span></dt><dt><span class="section"><a href="#couchdb-single-configuration-ssl">12.8. Configuring SSL Network Sockets</a></span></dt><dt><span class="section"><a href="#couchdb-single-config-options">12.9. CouchDB Configuration Options</a></span></dt><dd><dl><dt><span class="section"><a href="#couchdb-single-config-options_attachments">12.9.1. <code class="literal">attachments</code> Configuration Options</a></span></dt><dt><span class="section"><a href="#couchdb-single-config-options_couchdb">12.9.2. <code class="literal">couchdb</code> Configuration Options</a></span></dt><dt><span class="section"><a href="#couchdb-single-config-options_daemons">12.9.3. <code class="literal">daemons</code> Configuration Options</a></span></dt><dt><span class="section"><a href="#couchdb-single-config-options_httpd_db_handlers">12.9.4. <code class="literal">httpd_db_handlers</code> Configuration Options</a></span></dt><dt><span class="section"><a href="#couchdb-single-config-options_couch_httpd_auth">12.9.5. <code class="literal">couch_httpd_auth</code> Configuration Options</a></span></dt><dt><span class="section"><a href="#couchdb-single-config-options_httpd">12.9.6. <code class="literal">httpd</code> Configuration Options</a></span></dt><dt><span class="section"><a href="#couchdb-single-config-options_httpd_design_handlers">12.9.7. <code class="literal">httpd_design_handlers</code> Configuration Options</a></span></dt><dt><span class="section"><a href="#couchdb-single-config-options_httpd_global_handlers">12.9.8. <code class="literal">httpd_global_handlers</code> Configuration Options</a></span></dt><dt><span class="section"><a href="#couchdb-single-config-options_log">12.9.9. <code class="literal">log</code> Configuration Options</a></span></dt><dt><span class="section"><a href="#couchdb-single-config-options_query_servers">12.9.10. <code class="literal">query_servers</code> Configuration Options</a></span></dt><dt><span class="section"><a href="#couchdb-single-config-options_query_server_config">12.9.11. <code class="literal">query_server_config</code> Configuration Options</a></span></dt><dt><span class="section"><a href="#couchdb-single-config-options_replicator">12.9.12. <code class="literal">replicator</code> Configuration Options</a></span></dt><dt><span class="section"><a href="#couchdb-single-config-options_stats">12.9.13. <code class="literal">stats</code> Configuration Options</a></span></dt><dt><span class="section"><a href="#couchdb-single-config-options_uuids">12.9.14. <code class="literal">uuids</code> Configuration Options</a></span></dt></dl></dd></dl></div><p>
    &nbsp;
  </p><div class="section" title="12.1.&nbsp;CouchDB Configuration Files"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-single-configuration-files"></a>12.1.&nbsp;CouchDB Configuration Files</h2></div></div></div><p>
      &nbsp;
    </p></div><div class="section" title="12.2.&nbsp;Configuration File Locations"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-single-configuration-files-locations"></a>12.2.&nbsp;Configuration File Locations</h2></div></div></div><p>
      CouchDB reads files from the following locations, in the following
      order.
    </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
          <code class="filename">PREFIX/default.ini</code>
        </p></li><li class="listitem"><p>
          <code class="filename">PREFIX/default.d/*</code>
        </p></li><li class="listitem"><p>
          <code class="filename">PREFIX/local.ini</code>
        </p></li><li class="listitem"><p>
          <code class="filename">PREFIX/local.d/*</code>
        </p></li></ol></div><p>
      Settings in successive documents override the settings in earlier
      entries. For example, setting the <code class="literal">bind_address</code>
      parameter in <code class="filename">local.ini</code> would override any
      setting in <code class="literal">default.ini</code>.
    </p><div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
        The <code class="filename">default.ini</code> file may be overwritten
        during an upgrade or re-installation, so localised changes
        should be made to the <code class="filename">local.ini</code> file or
        files within the <code class="filename">local.d</code> directory.
      </p></div></div><div class="section" title="12.3.&nbsp;MochiWeb Server Options"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-single-configuration-mochiweb"></a>12.3.&nbsp;MochiWeb Server Options</h2></div></div></div><p>
      Server options for the MochiWeb component of CouchDB can be added
      to the configuration files. Settings should be added to the
      <code class="literal">server_options</code> option of the
      <code class="literal">[httpd]</code> section of
      <code class="filename">local.ini</code>. For example:
    </p><pre class="programlisting">[httpd]
server_options = [{backlog, 128}, {acceptor_pool_size, 16}]</pre></div><div class="section" title="12.4.&nbsp;OS Daemons"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-single-configuration-osprocess"></a>12.4.&nbsp;OS Daemons</h2></div></div></div><p>
      CouchDB now supports starting external processes. The support is
      simple and enables CouchDB to start each configured OS daemon. If
      the daemon stops at any point, CouchDB will restart it (with
      protection to ensure regularly failing daemons are not repeatedly
      restarted).
    </p><p>
      The daemon starting process is one-to-one; for each each
      configured daemon in the configuration file, CouchDB will start
      exactly one instance. If you need to run multiple instances, then
      you must create separate individual configurations. Daemons are
      configured within the <code class="literal">[os_daemons]</code> section of
      your configuration file (<code class="filename">local.ini</code>). The
      format of each configured daemon is:
    </p><pre class="programlisting">NAME = PATH ARGS</pre><p>
      Where <code class="literal">NAME</code> is an arbitrary (and unique) name to
      identify the daemon; <code class="literal">PATH</code> is the full path to
      the daemon to be executed; <code class="literal">ARGS</code> are any
      required arguments to the daemon.
    </p><p>
      For example:
    </p><pre class="programlisting">[os_daemons]
basic_responder = /usr/local/bin/responsder.js</pre><p>
      There is no interactivity between CouchDB and the running process,
      but you can use the OS Daemons service to create new HTTP servers
      and responders and then use the new proxy service to redirect
      requests and output to the CouchDB managed service. For more
      information on proxying, see
      <a class="xref" href="#couchdb-single-features-proxying" title="2.2.&nbsp;HTTP Proxying">Section&nbsp;2.2, &ldquo;HTTP Proxying&rdquo;</a>. For
      further background on the OS Daemon service, see
      <a class="ulink" href="http://davispj.com/2010/09/26/new-couchdb-externals-api.html" target="_top">CouchDB
      Externals API</a>
    </p></div><div class="section" title="12.5.&nbsp;Update Notifications"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-single-configuration-update_notification"></a>12.5.&nbsp;Update Notifications</h2></div></div></div><p>
      &nbsp;
    </p></div><div class="section" title="12.6.&nbsp;Socket Options Configuration Setting"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-single-configuration-socketoptions"></a>12.6.&nbsp;Socket Options Configuration Setting</h2></div></div></div><p>
      The socket options for the listening socket in CouchDB can now be
      set within the CouchDB configuration file. The setting should be
      added to the <code class="literal">[httpd]</code> section of the file using
      the option name <code class="literal">socket_options</code>. The
      specification is as a list of tuples. For example:
    </p><pre class="programlisting">[httpd]
socket_options = [{recbuf, 262144}, {sndbuf, 262144}, {nodelay, true}]</pre><p>
      The options supported are a subset of full options supported by
      the TCP/IP stack. A list of the supported options are provided in
      the
      <a class="ulink" href="http://www.erlang.org/doc/man/inet.html#setopts-2" target="_top">Erlang
      inet</a> documentation.
    </p></div><div class="section" title="12.7.&nbsp;vhosts definitions"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-single-configuration-vhost"></a>12.7.&nbsp;<code class="literal">vhosts</code> definitions</h2></div></div></div><p>
      Similar to the rewrites section of a <code class="literal">_design</code>
      document, the <code class="literal">vhosts</code> system uses variables in
      the form of :varname or wildcards in the form of asterisks. The
      variable results can be output into the resulting path as they are
      in the rewriter.
    </p></div><div class="section" title="12.8.&nbsp;Configuring SSL Network Sockets"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-single-configuration-ssl"></a>12.8.&nbsp;Configuring SSL Network Sockets</h2></div></div></div><p>
      SSL configuration in CouchDB was designed to be as easy as
      possible. All you need is two files; a certificate and a private
      key. If you bought an official SSL certificate from a certificate
      authority, both should be in your possession already.
    </p><p>
      If you just want to try this out and don't want to pay anything
      upfront, you can create a self-signed certificate. Everything will
      work the same, but clients will get a warning about an insecure
      certificate.
    </p><p>
      You will need the OpenSSL command line tool installed. It probably
      already is.
    </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>mkdir cert &amp;&amp; cd cert</code></strong>
shell&gt; <strong class="userinput"><code>openssl genrsa &gt; privkey.pem</code></strong>
shell&gt; <strong class="userinput"><code>openssl req -new -x509 -key privkey.pem -out mycert.pem -days 1095</code></strong>
shell&gt; <strong class="userinput"><code>ls</code></strong>
mycert.pem privkey.pem</pre><p>
      Now, you need to edit CouchDB's configuration, either by editing
      your <code class="filename">local.ini</code> file or using the
      <code class="literal">/_config</code> API calls or the configuration screen
      in Futon. Here is what you need to do in
      <code class="filename">local.ini</code>, you can infer what needs doing in
      the other places.
    </p><p>
      Be sure to make these edits. Under <code class="literal">[daemons]</code>
      you should see:
    </p><pre class="programlisting">; enable SSL support by uncommenting the following line and supply the PEM's below.
; the default ssl port CouchDB listens on is 6984
;httpsd = {couch_httpd, start_link, [https]}</pre><p>
      Here uncomment the last line:
    </p><pre class="programlisting">httpsd = {couch_httpd, start_link, [https]}</pre><p>
      Next, under <code class="literal">[ssl]</code> you will see:
    </p><pre class="programlisting">;cert_file = /full/path/to/server_cert.pem
;key_file = /full/path/to/server_key.pem</pre><p>
      Uncomment and adjust the paths so it matches your system's paths:
    </p><pre class="programlisting">cert_file = /home/jan/cert/mycert.pem
key_file = /home/jan/cert/privkey.pem</pre><p>
      For more information please read
      <a class="ulink" href="http://www.openssl.org/docs/HOWTO/certificates.txt" target="_top">http://www.openssl.org/docs/HOWTO/certificates.txt</a>.
    </p><p>
      Now start (or restart) CouchDB. You should be able to connect to
      it using HTTPS on port 6984:
    </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>curl https://127.0.0.1:6984/</code></strong>
curl: (60) SSL certificate problem, verify that the CA cert is OK. Details:
error:14090086:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify failed
More details here: http://curl.haxx.se/docs/sslcerts.html

curl performs SSL certificate verification by default, using a "bundle"
of Certificate Authority (CA) public keys (CA certs). If the default
bundle file isn't adequate, you can specify an alternate file
using the --cacert option.
If this HTTPS server uses a certificate signed by a CA represented in
the bundle, the certificate verification probably failed due to a
problem with the certificate (it might be expired, or the name might
not match the domain name in the URL).
If you'd like to turn off curl's verification of the certificate, use
the -k (or --insecure) option.</pre><p>
      Oh no what happened?! &mdash; Remember, clients will notify their
      users that your certificate is self signed.
      <span class="command"><strong>curl</strong></span> is the client in this case and it notifies
      you. Luckily you trust yourself (don't you?) and you can specify
      the <code class="option">-k</code> option as the message reads:
    </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>curl -k https://127.0.0.1:6984/</code></strong>
{"couchdb":"Welcome","version":"1.1.0"}</pre></div><div class="section" title="12.9.&nbsp;CouchDB Configuration Options"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-single-config-options"></a>12.9.&nbsp;CouchDB Configuration Options</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#couchdb-single-config-options_attachments">12.9.1. <code class="literal">attachments</code> Configuration Options</a></span></dt><dt><span class="section"><a href="#couchdb-single-config-options_couchdb">12.9.2. <code class="literal">couchdb</code> Configuration Options</a></span></dt><dt><span class="section"><a href="#couchdb-single-config-options_daemons">12.9.3. <code class="literal">daemons</code> Configuration Options</a></span></dt><dt><span class="section"><a href="#couchdb-single-config-options_httpd_db_handlers">12.9.4. <code class="literal">httpd_db_handlers</code> Configuration Options</a></span></dt><dt><span class="section"><a href="#couchdb-single-config-options_couch_httpd_auth">12.9.5. <code class="literal">couch_httpd_auth</code> Configuration Options</a></span></dt><dt><span class="section"><a href="#couchdb-single-config-options_httpd">12.9.6. <code class="literal">httpd</code> Configuration Options</a></span></dt><dt><span class="section"><a href="#couchdb-single-config-options_httpd_design_handlers">12.9.7. <code class="literal">httpd_design_handlers</code> Configuration Options</a></span></dt><dt><span class="section"><a href="#couchdb-single-config-options_httpd_global_handlers">12.9.8. <code class="literal">httpd_global_handlers</code> Configuration Options</a></span></dt><dt><span class="section"><a href="#couchdb-single-config-options_log">12.9.9. <code class="literal">log</code> Configuration Options</a></span></dt><dt><span class="section"><a href="#couchdb-single-config-options_query_servers">12.9.10. <code class="literal">query_servers</code> Configuration Options</a></span></dt><dt><span class="section"><a href="#couchdb-single-config-options_query_server_config">12.9.11. <code class="literal">query_server_config</code> Configuration Options</a></span></dt><dt><span class="section"><a href="#couchdb-single-config-options_replicator">12.9.12. <code class="literal">replicator</code> Configuration Options</a></span></dt><dt><span class="section"><a href="#couchdb-single-config-options_stats">12.9.13. <code class="literal">stats</code> Configuration Options</a></span></dt><dt><span class="section"><a href="#couchdb-single-config-options_uuids">12.9.14. <code class="literal">uuids</code> Configuration Options</a></span></dt></dl></div><p>
    &nbsp;
  </p><div class="table"><a name="table-couchdb-single-config-options-summary"></a><p class="title"><b>Table&nbsp;12.1.&nbsp;Configuration Groups</b></p><div class="table-contents"><table summary="Configuration Groups" border="1"><colgroup><col class="section" width="50%"><col class="desc" width="50%"></colgroup><thead><tr><th>Section</th><th>Description</th></tr></thead><tbody><tr><td><code class="literal">attachments</code></td><td>
 Attachment options
 </td></tr><tr><td><code class="literal">couchdb</code></td><td>
 CouchDB specific options
 </td></tr><tr><td><code class="literal">daemons</code></td><td>
 Daemons and background processes
 </td></tr><tr><td><code class="literal">httpd_db_handlers</code></td><td>
 Database Operation handlers
 </td></tr><tr><td><code class="literal">couch_httpd_auth</code></td><td>
 HTTPD Authentication options
 </td></tr><tr><td><code class="literal">httpd</code></td><td>
 HTTPD Server options
 </td></tr><tr><td><code class="literal">httpd_design_handlers</code></td><td>
 Handlers for design document operations
 </td></tr><tr><td><code class="literal">httpd_global_handlers</code></td><td>
 Handlers for global operations
 </td></tr><tr><td><code class="literal">log</code></td><td>
 Logging options
 </td></tr><tr><td><code class="literal">query_servers</code></td><td>
 Query Server options
 </td></tr><tr><td><code class="literal">query_server_config</code></td><td>
 Query server options
 </td></tr><tr><td><code class="literal">replicator</code></td><td>
 Replicator Options
 </td></tr><tr><td><code class="literal">ssl</code></td><td>
 SSL (Secure Sockets Layer) Options
 </td></tr><tr><td><code class="literal">stats</code></td><td>
 Statistics options
 </td></tr><tr><td><code class="literal">uuids</code></td><td>
 UUID generation options
 </td></tr></tbody></table></div></div><br class="table-break"><div class="section" title="12.9.1.&nbsp;attachments Configuration Options"><div class="titlepage"><div><div><h3 class="title"><a name="couchdb-single-config-options_attachments"></a>12.9.1.&nbsp;<code class="literal">attachments</code> Configuration Options</h3></div></div></div><p>
      &nbsp;
    </p><div class="table"><a name="table-couchdb-single-config-options-attachments-summary"></a><p class="title"><b>Table&nbsp;12.2.&nbsp;Configuration Groups</b></p><div class="table-contents"><table summary="Configuration Groups" border="1"><colgroup><col class="option" width="50%"><col class="desc" width="50%"></colgroup><thead><tr><th>Option</th><th>Description</th></tr></thead><tbody><tr><td><code class="literal">compressible_types</code></td><td>
 compressible_types
 </td></tr><tr><td><code class="literal">compression_level</code></td><td>
 compression_level
 </td></tr></tbody></table></div></div><br class="table-break"></div><div class="section" title="12.9.2.&nbsp;couchdb Configuration Options"><div class="titlepage"><div><div><h3 class="title"><a name="couchdb-single-config-options_couchdb"></a>12.9.2.&nbsp;<code class="literal">couchdb</code> Configuration Options</h3></div></div></div><p>
      &nbsp;
    </p><div class="table"><a name="table-couchdb-single-config-options-couchdb-summary"></a><p class="title"><b>Table&nbsp;12.3.&nbsp;Configuration Groups</b></p><div class="table-contents"><table summary="Configuration Groups" border="1"><colgroup><col class="option" width="50%"><col class="desc" width="50%"></colgroup><thead><tr><th>Option</th><th>Description</th></tr></thead><tbody><tr><td><code class="literal">database_dir</code></td><td>
 database_dir
 </td></tr><tr><td><code class="literal">delayed_commits</code></td><td>
 delayed_commits
 </td></tr><tr><td><code class="literal">max_attachment_chunk_size</code></td><td>
 max_attachment_chunk_size
 </td></tr><tr><td><code class="literal">max_dbs_open</code></td><td>
 max_dbs_open
 </td></tr><tr><td><code class="literal">max_document_size</code></td><td>
 max_document_size
 </td></tr><tr><td><code class="literal">os_process_timeout</code></td><td>
 os_process_timeout
 </td></tr><tr><td><code class="literal">uri_file</code></td><td>
 uri_file
 </td></tr><tr><td><code class="literal">util_driver_dir</code></td><td>
 util_driver_dir
 </td></tr><tr><td><code class="literal">view_index_dir</code></td><td>
 view_index_dir
 </td></tr></tbody></table></div></div><br class="table-break"></div><div class="section" title="12.9.3.&nbsp;daemons Configuration Options"><div class="titlepage"><div><div><h3 class="title"><a name="couchdb-single-config-options_daemons"></a>12.9.3.&nbsp;<code class="literal">daemons</code> Configuration Options</h3></div></div></div><p>
      &nbsp;
    </p><div class="table"><a name="table-couchdb-single-config-options-daemons-summary"></a><p class="title"><b>Table&nbsp;12.4.&nbsp;Configuration Groups</b></p><div class="table-contents"><table summary="Configuration Groups" border="1"><colgroup><col class="option" width="50%"><col class="desc" width="50%"></colgroup><thead><tr><th>Option</th><th>Description</th></tr></thead><tbody><tr><td><code class="literal">httpsd</code></td><td>
 Enabled HTTPS service
 </td></tr><tr><td><code class="literal">auth_cache</code></td><td>
 auth_cache
 </td></tr><tr><td><code class="literal">db_update_notifier</code></td><td>
 db_update_notifier
 </td></tr><tr><td><code class="literal">external_manager</code></td><td>
 external_manager
 </td></tr><tr><td><code class="literal">httpd</code></td><td>
 httpd
 </td></tr><tr><td><code class="literal">query_servers</code></td><td>
 query_servers
 </td></tr><tr><td><code class="literal">stats_aggregator</code></td><td>
 stats_aggregator
 </td></tr><tr><td><code class="literal">stats_collector</code></td><td>
 stats_collector
 </td></tr><tr><td><code class="literal">uuids</code></td><td>
 uuids
 </td></tr><tr><td><code class="literal">view_manager</code></td><td>
 view_manager
 </td></tr></tbody></table></div></div><br class="table-break"></div><div class="section" title="12.9.4.&nbsp;httpd_db_handlers Configuration Options"><div class="titlepage"><div><div><h3 class="title"><a name="couchdb-single-config-options_httpd_db_handlers"></a>12.9.4.&nbsp;<code class="literal">httpd_db_handlers</code> Configuration Options</h3></div></div></div><p>
      &nbsp;
    </p><div class="table"><a name="table-couchdb-single-config-options-httpd_db_handlers-summary"></a><p class="title"><b>Table&nbsp;12.5.&nbsp;Configuration Groups</b></p><div class="table-contents"><table summary="Configuration Groups" border="1"><colgroup><col class="option" width="50%"><col class="desc" width="50%"></colgroup><thead><tr><th>Option</th><th>Description</th></tr></thead><tbody><tr><td><code class="literal">_changes</code></td><td>
 _changes
 </td></tr><tr><td><code class="literal">_compact</code></td><td>
 _compact
 </td></tr><tr><td><code class="literal">_design</code></td><td>
 _design
 </td></tr><tr><td><code class="literal">_temp_view</code></td><td>
 _temp_view
 </td></tr><tr><td><code class="literal">_view_cleanup</code></td><td>
 _view_cleanup
 </td></tr></tbody></table></div></div><br class="table-break"></div><div class="section" title="12.9.5.&nbsp;couch_httpd_auth Configuration Options"><div class="titlepage"><div><div><h3 class="title"><a name="couchdb-single-config-options_couch_httpd_auth"></a>12.9.5.&nbsp;<code class="literal">couch_httpd_auth</code> Configuration Options</h3></div></div></div><p>
      &nbsp;
    </p><div class="table"><a name="table-couchdb-single-config-options-couch_httpd_auth-summary"></a><p class="title"><b>Table&nbsp;12.6.&nbsp;Configuration Groups</b></p><div class="table-contents"><table summary="Configuration Groups" border="1"><colgroup><col class="option" width="50%"><col class="desc" width="50%"></colgroup><thead><tr><th>Option</th><th>Description</th></tr></thead><tbody><tr><td><code class="literal">auth_cache_size</code></td><td>
 auth_cache_size
 </td></tr><tr><td><code class="literal">authentication_db</code></td><td>
 authentication_db
 </td></tr><tr><td><code class="literal">authentication_redirect</code></td><td>
 authentication_redirect
 </td></tr><tr><td><code class="literal">require_valid_user</code></td><td>
 require_valid_user
 </td></tr><tr><td><code class="literal">timeout</code></td><td>
 timeout
 </td></tr></tbody></table></div></div><br class="table-break"></div><div class="section" title="12.9.6.&nbsp;httpd Configuration Options"><div class="titlepage"><div><div><h3 class="title"><a name="couchdb-single-config-options_httpd"></a>12.9.6.&nbsp;<code class="literal">httpd</code> Configuration Options</h3></div></div></div><p>
      &nbsp;
    </p><div class="table"><a name="table-couchdb-single-config-options-httpd-summary"></a><p class="title"><b>Table&nbsp;12.7.&nbsp;Configuration Groups</b></p><div class="table-contents"><table summary="Configuration Groups" border="1"><colgroup><col class="option" width="50%"><col class="desc" width="50%"></colgroup><thead><tr><th>Option</th><th>Description</th></tr></thead><tbody><tr><td><code class="literal">nodelay</code></td><td>
 Enable TCP_NODELAY
 </td></tr><tr><td><code class="literal">allow_jsonp</code></td><td>
 allow_jsonp
 </td></tr><tr><td><code class="literal">authentication_handlers</code></td><td>
 authentication_handlers
 </td></tr><tr><td><code class="literal">bind_address</code></td><td>
 bind_address
 </td></tr><tr><td><code class="literal">default_handler</code></td><td>
 default_handler
 </td></tr><tr><td><code class="literal">max_connections</code></td><td>
 max_connections
 </td></tr><tr><td><code class="literal">port</code></td><td>
 port
 </td></tr><tr><td><code class="literal">secure_rewrites</code></td><td>
 secure_rewrites
 </td></tr><tr><td><code class="literal">vhost_global_handlers</code></td><td>
 vhost_global_handlers
 </td></tr></tbody></table></div></div><br class="table-break"></div><div class="section" title="12.9.7.&nbsp;httpd_design_handlers Configuration Options"><div class="titlepage"><div><div><h3 class="title"><a name="couchdb-single-config-options_httpd_design_handlers"></a>12.9.7.&nbsp;<code class="literal">httpd_design_handlers</code> Configuration Options</h3></div></div></div><p>
      &nbsp;
    </p><div class="table"><a name="table-couchdb-single-config-options-httpd_design_handlers-summary"></a><p class="title"><b>Table&nbsp;12.8.&nbsp;Configuration Groups</b></p><div class="table-contents"><table summary="Configuration Groups" border="1"><colgroup><col class="option" width="50%"><col class="desc" width="50%"></colgroup><thead><tr><th>Option</th><th>Description</th></tr></thead><tbody><tr><td><code class="literal">_info</code></td><td>
 _info
 </td></tr><tr><td><code class="literal">_list</code></td><td>
 _list
 </td></tr><tr><td><code class="literal">_rewrite</code></td><td>
 _rewrite
 </td></tr><tr><td><code class="literal">_show</code></td><td>
 _show
 </td></tr><tr><td><code class="literal">_update</code></td><td>
 _update
 </td></tr><tr><td><code class="literal">_view</code></td><td>
 _view
 </td></tr></tbody></table></div></div><br class="table-break"></div><div class="section" title="12.9.8.&nbsp;httpd_global_handlers Configuration Options"><div class="titlepage"><div><div><h3 class="title"><a name="couchdb-single-config-options_httpd_global_handlers"></a>12.9.8.&nbsp;<code class="literal">httpd_global_handlers</code> Configuration Options</h3></div></div></div><p>
      &nbsp;
    </p><div class="table"><a name="table-couchdb-single-config-options-httpd_global_handlers-summary"></a><p class="title"><b>Table&nbsp;12.9.&nbsp;Configuration Groups</b></p><div class="table-contents"><table summary="Configuration Groups" border="1"><colgroup><col class="option" width="50%"><col class="desc" width="50%"></colgroup><thead><tr><th>Option</th><th>Description</th></tr></thead><tbody><tr><td><code class="literal">/</code></td><td>
 /
 </td></tr><tr><td><code class="literal">_active_tasks</code></td><td>
 _active_tasks
 </td></tr><tr><td><code class="literal">_all_dbs</code></td><td>
 _all_dbs
 </td></tr><tr><td><code class="literal">_config</code></td><td>
 _config
 </td></tr><tr><td><code class="literal">_log</code></td><td>
 _log
 </td></tr><tr><td><code class="literal">_oauth</code></td><td>
 _oauth
 </td></tr><tr><td><code class="literal">_replicate</code></td><td>
 _replicate
 </td></tr><tr><td><code class="literal">_restart</code></td><td>
 _restart
 </td></tr><tr><td><code class="literal">_session</code></td><td>
 _session
 </td></tr><tr><td><code class="literal">_stats</code></td><td>
 _stats
 </td></tr><tr><td><code class="literal">_utils</code></td><td>
 _utils
 </td></tr><tr><td><code class="literal">_uuids</code></td><td>
 _uuids
 </td></tr><tr><td><code class="literal">favicon.ico</code></td><td>
 favicon.ico
 </td></tr></tbody></table></div></div><br class="table-break"></div><div class="section" title="12.9.9.&nbsp;log Configuration Options"><div class="titlepage"><div><div><h3 class="title"><a name="couchdb-single-config-options_log"></a>12.9.9.&nbsp;<code class="literal">log</code> Configuration Options</h3></div></div></div><p>
      &nbsp;
    </p><div class="table"><a name="table-couchdb-single-config-options-log-summary"></a><p class="title"><b>Table&nbsp;12.10.&nbsp;Configuration Groups</b></p><div class="table-contents"><table summary="Configuration Groups" border="1"><colgroup><col class="option" width="50%"><col class="desc" width="50%"></colgroup><thead><tr><th>Option</th><th>Description</th></tr></thead><tbody><tr><td><code class="literal">file</code></td><td>
 file
 </td></tr><tr><td><code class="literal">include_sasl</code></td><td>
 include_sasl
 </td></tr><tr><td><code class="literal">level</code></td><td>
 level
 </td></tr></tbody></table></div></div><br class="table-break"></div><div class="section" title="12.9.10.&nbsp;query_servers Configuration Options"><div class="titlepage"><div><div><h3 class="title"><a name="couchdb-single-config-options_query_servers"></a>12.9.10.&nbsp;<code class="literal">query_servers</code> Configuration Options</h3></div></div></div><p>
      &nbsp;
    </p><div class="table"><a name="table-couchdb-single-config-options-query_servers-summary"></a><p class="title"><b>Table&nbsp;12.11.&nbsp;Configuration Groups</b></p><div class="table-contents"><table summary="Configuration Groups" border="1"><colgroup><col class="option" width="50%"><col class="desc" width="50%"></colgroup><thead><tr><th>Option</th><th>Description</th></tr></thead><tbody><tr><td><code class="literal">javascript</code></td><td>
 javascript
 </td></tr></tbody></table></div></div><br class="table-break"></div><div class="section" title="12.9.11.&nbsp;query_server_config Configuration Options"><div class="titlepage"><div><div><h3 class="title"><a name="couchdb-single-config-options_query_server_config"></a>12.9.11.&nbsp;<code class="literal">query_server_config</code> Configuration Options</h3></div></div></div><p>
      &nbsp;
    </p><div class="table"><a name="table-couchdb-single-config-options-query_server_config-summary"></a><p class="title"><b>Table&nbsp;12.12.&nbsp;Configuration Groups</b></p><div class="table-contents"><table summary="Configuration Groups" border="1"><colgroup><col class="option" width="50%"><col class="desc" width="50%"></colgroup><thead><tr><th>Option</th><th>Description</th></tr></thead><tbody><tr><td><code class="literal">reduce_limit</code></td><td>
 reduce_limit
 </td></tr></tbody></table></div></div><br class="table-break"></div><div class="section" title="12.9.12.&nbsp;replicator Configuration Options"><div class="titlepage"><div><div><h3 class="title"><a name="couchdb-single-config-options_replicator"></a>12.9.12.&nbsp;<code class="literal">replicator</code> Configuration Options</h3></div></div></div><p>
      &nbsp;
    </p><div class="table"><a name="table-couchdb-single-config-options-replicator-summary"></a><p class="title"><b>Table&nbsp;12.13.&nbsp;Configuration Groups</b></p><div class="table-contents"><table summary="Configuration Groups" border="1"><colgroup><col class="option" width="50%"><col class="desc" width="50%"></colgroup><thead><tr><th>Option</th><th>Description</th></tr></thead><tbody><tr><td><code class="literal">max_http_pipeline_size</code></td><td>
 max_http_pipeline_size
 </td></tr><tr><td><code class="literal">max_http_sessions</code></td><td>
 max_http_sessions
 </td></tr></tbody></table></div></div><br class="table-break"></div><div class="section" title="12.9.13.&nbsp;stats Configuration Options"><div class="titlepage"><div><div><h3 class="title"><a name="couchdb-single-config-options_stats"></a>12.9.13.&nbsp;<code class="literal">stats</code> Configuration Options</h3></div></div></div><p>
      &nbsp;
    </p><div class="table"><a name="table-couchdb-single-config-options-stats-summary"></a><p class="title"><b>Table&nbsp;12.14.&nbsp;Configuration Groups</b></p><div class="table-contents"><table summary="Configuration Groups" border="1"><colgroup><col class="option" width="50%"><col class="desc" width="50%"></colgroup><thead><tr><th>Option</th><th>Description</th></tr></thead><tbody><tr><td><code class="literal">rate</code></td><td>
 rate
 </td></tr><tr><td><code class="literal">samples</code></td><td>
 samples
 </td></tr></tbody></table></div></div><br class="table-break"></div><div class="section" title="12.9.14.&nbsp;uuids Configuration Options"><div class="titlepage"><div><div><h3 class="title"><a name="couchdb-single-config-options_uuids"></a>12.9.14.&nbsp;<code class="literal">uuids</code> Configuration Options</h3></div></div></div><p>
      &nbsp;
    </p><div class="table"><a name="table-couchdb-single-config-options-uuids-summary"></a><p class="title"><b>Table&nbsp;12.15.&nbsp;Configuration Groups</b></p><div class="table-contents"><table summary="Configuration Groups" border="1"><colgroup><col class="option" width="50%"><col class="desc" width="50%"></colgroup><thead><tr><th>Option</th><th>Description</th></tr></thead><tbody><tr><td><code class="literal">algorithm</code></td><td>
 algorithm
 </td></tr></tbody></table></div></div><br class="table-break"></div></div></div><div class="appendix" title="Appendix&nbsp;A.&nbsp;JSON Structure Reference"><div class="titlepage"><div><div><h2 class="title"><a name="couchdb-api-json"></a>Appendix&nbsp;A.&nbsp;JSON Structure Reference</h2></div></div></div><p>
    The following appendix provides a quick reference to all the JSON
    structures that you can supply to CouchDB, or get in return to
    requests.
  </p><div class="table"><a name="table-couchdb-api-json-summary"></a><p class="title"><b>Table&nbsp;A.1.&nbsp;JSON Structures</b></p><div class="table-contents"><table summary="JSON Structures" border="1"><colgroup><col class="desc" width="100%"></colgroup><thead><tr><th>Description</th></tr></thead><tbody><tr><td><a class="link" href="#table-couchdb-api-json_all-docs" title="Table&nbsp;A.2.&nbsp; All Database Documents">
 All Database Documents
 </a></td></tr><tr><td><a class="link" href="#table-couchdb-api-json_bulkdocsreturn" title="Table&nbsp;A.3.&nbsp; Bulk Document Response">
 Bulk Document Response
 </a></td></tr><tr><td><a class="link" href="#table-couchdb-api-json_bulkdocs" title="Table&nbsp;A.4.&nbsp; Bulk Documents">
 Bulk Documents
 </a></td></tr><tr><td><a class="link" href="#table-couchdb-api-json_changes" title="Table&nbsp;A.5.&nbsp; Changes information for a database">
 Changes information for a database
 </a></td></tr><tr><td><a class="link" href="#table-couchdb-api-json_document" title="Table&nbsp;A.6.&nbsp; CouchDB Document">
 CouchDB Document
 </a></td></tr><tr><td><a class="link" href="#table-couchdb-api-json_jsonerror" title="Table&nbsp;A.7.&nbsp; CouchDB Error Status">
 CouchDB Error Status
 </a></td></tr><tr><td><a class="link" href="#table-couchdb-api-json_db-info" title="Table&nbsp;A.8.&nbsp; CouchDB database information object">
 CouchDB database information object
 </a></td></tr><tr><td><a class="link" href="#table-couchdb-api-json_design-doc" title="Table&nbsp;A.9.&nbsp; Design Document">
 Design Document
 </a></td></tr><tr><td><a class="link" href="#table-couchdb-api-json_design-doc_info" title="Table&nbsp;A.10.&nbsp; Design Document Information">
 Design Document Information
 </a></td></tr><tr><td><a class="link" href="#table-couchdb-api-json_design-doc_info-spatial" title="Table&nbsp;A.11.&nbsp; Design Document spatial index Information">
 Design Document spatial index Information
 </a></td></tr><tr><td><a class="link" href="#table-couchdb-api-json_document_with_attachments" title="Table&nbsp;A.12.&nbsp; Document with Attachments">
 Document with Attachments
 </a></td></tr><tr><td><a class="link" href="#table-couchdb-api-json_activetasks" title="Table&nbsp;A.13.&nbsp; List of Active Tasks">
 List of Active Tasks
 </a></td></tr><tr><td><a class="link" href="#table-couchdb-api-json_replication" title="Table&nbsp;A.14.&nbsp; Replication Settings">
 Replication Settings
 </a></td></tr><tr><td><a class="link" href="#table-couchdb-api-json_replication-status" title="Table&nbsp;A.15.&nbsp; Replication Status">
 Replication Status
 </a></td></tr><tr><td><a class="link" href="#table-couchdb-api-json_document_with_revs_info" title="Table&nbsp;A.16.&nbsp; Returned CouchDB Document with Detailed Revision Info">
 Returned CouchDB Document with Detailed Revision Info
 </a></td></tr><tr><td><a class="link" href="#table-couchdb-api-json_document_with_revs" title="Table&nbsp;A.17.&nbsp; Returned CouchDB Document with Revision Info">
 Returned CouchDB Document with Revision Info
 </a></td></tr><tr><td><a class="link" href="#table-couchdb-api-json_returneddocument_with_attachments" title="Table&nbsp;A.18.&nbsp; Returned Document with Attachments">
 Returned Document with Attachments
 </a></td></tr><tr><td><a class="link" href="#table-couchdb-api-json_security" title="Table&nbsp;A.19.&nbsp; Security Object">
 Security Object
 </a></td></tr></tbody></table></div></div><br class="table-break"><div class="table"><a name="table-couchdb-api-json_all-docs"></a><p class="title"><b>Table&nbsp;A.2.&nbsp;
 All Database Documents
 </b></p><div class="table-contents"><table summary="
 All Database Documents
 " border="1"><colgroup><col class="item" width="30%"><col class="desc" width="70%"></colgroup><tbody><tr><td><span class="bold"><strong>Field</strong></span></td><td><span class="bold"><strong>Description</strong></span></td></tr><tr><td><code class="literal">offset</code>  </td><td>
 Offset where the document list started
 </td></tr><tr><td><code class="literal">rows</code> <code class="literal">[array]</code> </td><td>
 Array of document object
 </td></tr><tr><td><code class="literal">total_rows</code>  </td><td>
 Number of documents in the database/view
 </td></tr><tr><td><code class="literal">update_seq</code> (optional) </td><td>
 Current update sequence for the database
 </td></tr></tbody></table></div></div><br class="table-break"><div class="table"><a name="table-couchdb-api-json_bulkdocsreturn"></a><p class="title"><b>Table&nbsp;A.3.&nbsp;
 Bulk Document Response
 </b></p><div class="table-contents"><table summary="
 Bulk Document Response
 " border="1"><colgroup><col class="item" width="30%"><col class="desc" width="70%"></colgroup><tbody><tr><td><span class="bold"><strong>Field</strong></span></td><td><span class="bold"><strong>Description</strong></span></td></tr><tr><td><code class="literal">docs</code> <code class="literal">[array]</code> </td><td>
 Bulk Docs Returned Documents
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">error</code>  </td><td>
 Error type
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">id</code>  </td><td>
 Document ID
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">reason</code>  </td><td>
 Error string with extended reason
 </td></tr></tbody></table></div></div><br class="table-break"><div class="table"><a name="table-couchdb-api-json_bulkdocs"></a><p class="title"><b>Table&nbsp;A.4.&nbsp;
 Bulk Documents
 </b></p><div class="table-contents"><table summary="
 Bulk Documents
 " border="1"><colgroup><col class="item" width="30%"><col class="desc" width="70%"></colgroup><tbody><tr><td><span class="bold"><strong>Field</strong></span></td><td><span class="bold"><strong>Description</strong></span></td></tr><tr><td><code class="literal">all_or_nothing</code> (optional) </td><td>
 Sets the database commit mode to use all-or-nothing semantics
 </td></tr><tr><td><code class="literal">docs</code> <code class="literal">[array]</code> </td><td>
 Bulk Documents Document
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">_id</code> (optional) </td><td>
 Document ID
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">_rev</code> (optional) </td><td>
 Revision ID (when updating an existing document)
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">_deleted</code> (optional) </td><td>
 Whether the document should be deleted
 </td></tr></tbody></table></div></div><br class="table-break"><div class="table"><a name="table-couchdb-api-json_changes"></a><p class="title"><b>Table&nbsp;A.5.&nbsp;
 Changes information for a database
 </b></p><div class="table-contents"><table summary="
 Changes information for a database
 " border="1"><colgroup><col class="item" width="30%"><col class="desc" width="70%"></colgroup><tbody><tr><td><span class="bold"><strong>Field</strong></span></td><td><span class="bold"><strong>Description</strong></span></td></tr><tr><td><code class="literal">last_seq</code>  </td><td>
 Last change sequence number
 </td></tr><tr><td><code class="literal">results</code> <code class="literal">[array]</code> </td><td>
 Changes made to a database
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">changes</code> <code class="literal">[array]</code> </td><td>
 List of changes, field-by-field, for this document
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">id</code>  </td><td>
 Document ID
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">seq</code>  </td><td>
 Update sequence number
 </td></tr></tbody></table></div></div><br class="table-break"><div class="table"><a name="table-couchdb-api-json_document"></a><p class="title"><b>Table&nbsp;A.6.&nbsp;
 CouchDB Document
 </b></p><div class="table-contents"><table summary="
 CouchDB Document
 " border="1"><colgroup><col class="item" width="30%"><col class="desc" width="70%"></colgroup><tbody><tr><td><span class="bold"><strong>Field</strong></span></td><td><span class="bold"><strong>Description</strong></span></td></tr><tr><td><code class="literal">_id</code> (optional) </td><td>
 Document ID
 </td></tr><tr><td><code class="literal">_rev</code> (optional) </td><td>
 Revision ID (when updating an existing document)
 </td></tr></tbody></table></div></div><br class="table-break"><div class="table"><a name="table-couchdb-api-json_jsonerror"></a><p class="title"><b>Table&nbsp;A.7.&nbsp;
 CouchDB Error Status
 </b></p><div class="table-contents"><table summary="
 CouchDB Error Status
 " border="1"><colgroup><col class="item" width="30%"><col class="desc" width="70%"></colgroup><tbody><tr><td><span class="bold"><strong>Field</strong></span></td><td><span class="bold"><strong>Description</strong></span></td></tr><tr><td><code class="literal">error</code>  </td><td>
 Error type
 </td></tr><tr><td><code class="literal">id</code>  </td><td>
 Document ID
 </td></tr><tr><td><code class="literal">reason</code>  </td><td>
 Error string with extended reason
 </td></tr></tbody></table></div></div><br class="table-break"><div class="table"><a name="table-couchdb-api-json_db-info"></a><p class="title"><b>Table&nbsp;A.8.&nbsp;
 CouchDB database information object
 </b></p><div class="table-contents"><table summary="
 CouchDB database information object
 " border="1"><colgroup><col class="item" width="30%"><col class="desc" width="70%"></colgroup><tbody><tr><td><span class="bold"><strong>Field</strong></span></td><td><span class="bold"><strong>Description</strong></span></td></tr><tr><td><code class="literal">committed_update_seq</code>  </td><td>
 The number of committed update.
 </td></tr><tr><td><code class="literal">compact_running</code>  </td><td>
 Set to true if the database compaction routine is operating on
 this database.
 </td></tr><tr><td><code class="literal">db_name</code>  </td><td>
 The name of the database.
 </td></tr><tr><td><code class="literal">disk_format_version</code>  </td><td>
 The version of the physical format used for the data when it is
 stored on disk.
 </td></tr><tr><td><code class="literal">disk_size</code>  </td><td>
 Size in bytes of the data as stored on the disk. Views indexes
 are not included in the calculation.
 </td></tr><tr><td><code class="literal">doc_count</code>  </td><td>
 A count of the documents in the specified database.
 </td></tr><tr><td><code class="literal">doc_del_count</code>  </td><td>
 Number of deleted documents
 </td></tr><tr><td><code class="literal">instance_start_time</code>  </td><td>
 Timestamp of when the database was created, expressed in
 milliseconds since the epoch.
 </td></tr><tr><td><code class="literal">purge_seq</code>  </td><td>
 The number of purge operations on the database.
 </td></tr><tr><td><code class="literal">update_seq</code>  </td><td>
 The current number of updates to the database.
 </td></tr></tbody></table></div></div><br class="table-break"><div class="table"><a name="table-couchdb-api-json_design-doc"></a><p class="title"><b>Table&nbsp;A.9.&nbsp;
 Design Document
 </b></p><div class="table-contents"><table summary="
 Design Document
 " border="1"><colgroup><col class="item" width="30%"><col class="desc" width="70%"></colgroup><tbody><tr><td><span class="bold"><strong>Field</strong></span></td><td><span class="bold"><strong>Description</strong></span></td></tr><tr><td><code class="literal">_id</code>  </td><td>
 Design Document ID
 </td></tr><tr><td><code class="literal">_rev</code>  </td><td>
 Design Document Revision
 </td></tr><tr><td><code class="literal">views</code>  </td><td>
 View
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">viewname</code>  </td><td>
 View Definition
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">map</code>  </td><td>
 Map Function for View
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">reduce</code> (optional) </td><td>
 Reduce Function for View
 </td></tr></tbody></table></div></div><br class="table-break"><div class="table"><a name="table-couchdb-api-json_design-doc_info"></a><p class="title"><b>Table&nbsp;A.10.&nbsp;
 Design Document Information
 </b></p><div class="table-contents"><table summary="
 Design Document Information
 " border="1"><colgroup><col class="item" width="30%"><col class="desc" width="70%"></colgroup><tbody><tr><td><span class="bold"><strong>Field</strong></span></td><td><span class="bold"><strong>Description</strong></span></td></tr><tr><td><code class="literal">name</code>  </td><td>
 Name/ID of Design Document
 </td></tr><tr><td><code class="literal">view_index</code>  </td><td>
 View Index
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">compact_running</code>  </td><td>
 Indicates whether a compaction routine is currently running on
 the view
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">disk_size</code>  </td><td>
 Size in bytes of the view as stored on disk
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">language</code>  </td><td>
 Language for the defined views
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">purge_seq</code>  </td><td>
 The purge sequence that has been processed
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">signature</code>  </td><td>
 MD5 signature of the views for the design document
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">update_seq</code>  </td><td>
 The update sequence of the corresponding database that has been
 indexed
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">updater_running</code>  </td><td>
 Indicates if the view is currently being updated
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">waiting_clients</code>  </td><td>
 Number of clients waiting on views from this design document
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">waiting_commit</code>  </td><td>
 Indicates if there are outstanding commits to the underlying
 database that need to processed
 </td></tr></tbody></table></div></div><br class="table-break"><div class="table"><a name="table-couchdb-api-json_design-doc_info-spatial"></a><p class="title"><b>Table&nbsp;A.11.&nbsp;
 Design Document spatial index Information
 </b></p><div class="table-contents"><table summary="
 Design Document spatial index Information
 " border="1"><colgroup><col class="item" width="30%"><col class="desc" width="70%"></colgroup><tbody><tr><td><span class="bold"><strong>Field</strong></span></td><td><span class="bold"><strong>Description</strong></span></td></tr><tr><td><code class="literal">name</code>  </td><td>
 Name/ID of Design Document
 </td></tr><tr><td><code class="literal">spatial_index</code>  </td><td>
 View Index
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">compact_running</code>  </td><td>
 Indicates whether a compaction routine is currently running on
 the view
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">disk_size</code>  </td><td>
 Size in bytes of the view as stored on disk
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">language</code>  </td><td>
 Language for the defined views
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">purge_seq</code>  </td><td>
 The purge sequence that has been processed
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">signature</code>  </td><td>
 MD5 signature of the views for the design document
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">update_seq</code>  </td><td>
 The update sequence of the corresponding database that has been
 indexed
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">updater_running</code>  </td><td>
 Indicates if the view is currently being updated
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">waiting_clients</code>  </td><td>
 Number of clients waiting on views from this design document
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">waiting_commit</code>  </td><td>
 Indicates if there are outstanding commits to the underlying
 database that need to processed
 </td></tr></tbody></table></div></div><br class="table-break"><div class="table"><a name="table-couchdb-api-json_document_with_attachments"></a><p class="title"><b>Table&nbsp;A.12.&nbsp;
 Document with Attachments
 </b></p><div class="table-contents"><table summary="
 Document with Attachments
 " border="1"><colgroup><col class="item" width="30%"><col class="desc" width="70%"></colgroup><tbody><tr><td><span class="bold"><strong>Field</strong></span></td><td><span class="bold"><strong>Description</strong></span></td></tr><tr><td><code class="literal">_id</code> (optional) </td><td>
 Document ID
 </td></tr><tr><td><code class="literal">_rev</code> (optional) </td><td>
 Revision ID (when updating an existing document)
 </td></tr><tr><td><code class="literal">_attachments</code> (optional) </td><td>
 Document Attachment
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">filename</code>  </td><td>
 Attachment information
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">content_type</code>  </td><td>
 MIME Content type string
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">data</code>  </td><td>
 File attachment content, Base64 encoded
 </td></tr></tbody></table></div></div><br class="table-break"><div class="table"><a name="table-couchdb-api-json_activetasks"></a><p class="title"><b>Table&nbsp;A.13.&nbsp;
 List of Active Tasks
 </b></p><div class="table-contents"><table summary="
 List of Active Tasks
 " border="1"><colgroup><col class="item" width="30%"><col class="desc" width="70%"></colgroup><tbody><tr><td><span class="bold"><strong>Field</strong></span></td><td><span class="bold"><strong>Description</strong></span></td></tr><tr><td><code class="literal">tasks</code> <code class="literal">[array]</code> </td><td>
 Active Task
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">pid</code>  </td><td>
 Process ID
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">status</code>  </td><td>
 Task status message
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">task</code>  </td><td>
 Task name
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">type</code>  </td><td>
 Operation Type
 </td></tr></tbody></table></div></div><br class="table-break"><div class="table"><a name="table-couchdb-api-json_replication"></a><p class="title"><b>Table&nbsp;A.14.&nbsp;
 Replication Settings
 </b></p><div class="table-contents"><table summary="
 Replication Settings
 " border="1"><colgroup><col class="item" width="30%"><col class="desc" width="70%"></colgroup><tbody><tr><td><span class="bold"><strong>Field</strong></span></td><td><span class="bold"><strong>Description</strong></span></td></tr><tr><td><code class="literal">cancel</code> (optional) </td><td>
 Cancels the replication
 </td></tr><tr><td><code class="literal">continuous</code> (optional) </td><td>
 Configure the replication to be continuous
 </td></tr><tr><td><code class="literal">create_target</code> (optional) </td><td>
 Creates the target database
 </td></tr><tr><td><code class="literal">doc_ids</code> (optional) </td><td>
 Array of document IDs to be synchronized
 </td></tr><tr><td><code class="literal">proxy</code> (optional) </td><td>
 Address of a proxy server through which replication should occur
 </td></tr><tr><td><code class="literal">source</code>  </td><td>
 Source database name or URL
 </td></tr><tr><td><code class="literal">target</code>  </td><td>
 Target database name or URL
 </td></tr></tbody></table></div></div><br class="table-break"><div class="table"><a name="table-couchdb-api-json_replication-status"></a><p class="title"><b>Table&nbsp;A.15.&nbsp;
 Replication Status
 </b></p><div class="table-contents"><table summary="
 Replication Status
 " border="1"><colgroup><col class="item" width="30%"><col class="desc" width="70%"></colgroup><tbody><tr><td><span class="bold"><strong>Field</strong></span></td><td><span class="bold"><strong>Description</strong></span></td></tr><tr><td><code class="literal">history</code> <code class="literal">[array]</code> </td><td>
 Replication History
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">doc_write_failures</code>  </td><td>
 Number of document write failures
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">docs_read</code>  </td><td>
 Number of documents read
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">docs_written</code>  </td><td>
 Number of documents written to target
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">end_last_seq</code>  </td><td>
 Last sequence number in changes stream
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">end_time</code>  </td><td>
 Date/Time replication operation completed
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">missing_checked</code>  </td><td>
 Number of missing documents checked
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">missing_found</code>  </td><td>
 Number of missing documents found
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">recorded_seq</code>  </td><td>
 Last recorded sequence number
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">session_id</code>  </td><td>
 Session ID for this replication operation
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">start_last_seq</code>  </td><td>
 First sequence number in changes stream
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">start_time</code>  </td><td>
 Date/Time replication operation started
 </td></tr><tr><td><code class="literal">ok</code>  </td><td>
 Replication status
 </td></tr><tr><td><code class="literal">session_id</code>  </td><td>
 Unique session ID
 </td></tr><tr><td><code class="literal">source_last_seq</code>  </td><td>
 Last sequence number read from source database
 </td></tr></tbody></table></div></div><br class="table-break"><div class="table"><a name="table-couchdb-api-json_document_with_revs_info"></a><p class="title"><b>Table&nbsp;A.16.&nbsp;
 Returned CouchDB Document with Detailed Revision Info
 </b></p><div class="table-contents"><table summary="
 Returned CouchDB Document with Detailed Revision Info
 " border="1"><colgroup><col class="item" width="30%"><col class="desc" width="70%"></colgroup><tbody><tr><td><span class="bold"><strong>Field</strong></span></td><td><span class="bold"><strong>Description</strong></span></td></tr><tr><td><code class="literal">_id</code> (optional) </td><td>
 Document ID
 </td></tr><tr><td><code class="literal">_rev</code> (optional) </td><td>
 Revision ID (when updating an existing document)
 </td></tr><tr><td><code class="literal">_revs_info</code> <code class="literal">[array]</code> </td><td>
 CouchDB Document Extended Revision Info
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">rev</code>  </td><td>
 Full revision string
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">status</code>  </td><td>
 Status of the revision
 </td></tr></tbody></table></div></div><br class="table-break"><div class="table"><a name="table-couchdb-api-json_document_with_revs"></a><p class="title"><b>Table&nbsp;A.17.&nbsp;
 Returned CouchDB Document with Revision Info
 </b></p><div class="table-contents"><table summary="
 Returned CouchDB Document with Revision Info
 " border="1"><colgroup><col class="item" width="30%"><col class="desc" width="70%"></colgroup><tbody><tr><td><span class="bold"><strong>Field</strong></span></td><td><span class="bold"><strong>Description</strong></span></td></tr><tr><td><code class="literal">_id</code> (optional) </td><td>
 Document ID
 </td></tr><tr><td><code class="literal">_rev</code> (optional) </td><td>
 Revision ID (when updating an existing document)
 </td></tr><tr><td><code class="literal">_revisions</code>  </td><td>
 CouchDB Document Revisions
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">ids</code> <code class="literal">[array]</code> </td><td>
 Array of valid revision IDs, in reverse order (latest first)
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">start</code>  </td><td>
 Prefix number for the latest revision
 </td></tr></tbody></table></div></div><br class="table-break"><div class="table"><a name="table-couchdb-api-json_returneddocument_with_attachments"></a><p class="title"><b>Table&nbsp;A.18.&nbsp;
 Returned Document with Attachments
 </b></p><div class="table-contents"><table summary="
 Returned Document with Attachments
 " border="1"><colgroup><col class="item" width="30%"><col class="desc" width="70%"></colgroup><tbody><tr><td><span class="bold"><strong>Field</strong></span></td><td><span class="bold"><strong>Description</strong></span></td></tr><tr><td><code class="literal">_id</code> (optional) </td><td>
 Document ID
 </td></tr><tr><td><code class="literal">_rev</code> (optional) </td><td>
 Revision ID (when updating an existing document)
 </td></tr><tr><td><code class="literal">_attachments</code> (optional) </td><td>
 Document Attachment
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">filename</code>  </td><td>
 Attachment
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">content_type</code>  </td><td>
 MIME Content type string
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">length</code>  </td><td>
 Length (bytes) of the attachment data
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">revpos</code>  </td><td>
 Revision where this attachment exists
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">stub</code>  </td><td>
 Indicates whether the attachment is a stub
 </td></tr></tbody></table></div></div><br class="table-break"><div class="table"><a name="table-couchdb-api-json_security"></a><p class="title"><b>Table&nbsp;A.19.&nbsp;
 Security Object
 </b></p><div class="table-contents"><table summary="
 Security Object
 " border="1"><colgroup><col class="item" width="30%"><col class="desc" width="70%"></colgroup><tbody><tr><td><span class="bold"><strong>Field</strong></span></td><td><span class="bold"><strong>Description</strong></span></td></tr><tr><td><code class="literal">admins</code>  </td><td>
 Roles/Users with admin privileges
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">roles</code> <code class="literal">[array]</code> </td><td>
 List of roles with parent privilege
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">users</code> <code class="literal">[array]</code> </td><td>
 List of users with parent privilege
 </td></tr><tr><td><code class="literal">readers</code>  </td><td>
 Roles/Users with reader privileges
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">roles</code> <code class="literal">[array]</code> </td><td>
 List of roles with parent privilege
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">users</code> <code class="literal">[array]</code> </td><td>
 List of users with parent privilege
 </td></tr></tbody></table></div></div><br class="table-break"></div></div></body></html>